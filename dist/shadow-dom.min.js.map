{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src\\custom-elements.js","src\\interfaces\\Attr.js","src\\interfaces\\CharacterData.js","src\\interfaces\\CustomEvent.js","src\\interfaces\\DOMTokenList.js","src\\interfaces\\Document.js","src\\interfaces\\Element.js","src\\interfaces\\Event.js","src\\interfaces\\EventTarget.js","src\\interfaces\\HTMLSlotElement.js","src\\interfaces\\HTMLTableElement.js","src\\interfaces\\HTMLTableRowElement.js","src\\interfaces\\HTMLTableSectionElement.js","src\\interfaces\\MutationObserver.js","src\\interfaces\\NamedNodeMap.js","src\\interfaces\\Node.js","src\\interfaces\\ShadowRoot.js","src\\interfaces\\Text.js","src\\main.js","src\\mixins\\ChildNode.js","src\\mixins\\DocumentOrShadowRoot.js","src\\mixins\\NonDocumentTypeChildNode.js","src\\mixins\\NonElementParentNode.js","src\\mixins\\ParentNode.js","src\\mixins\\Slotable.js","src\\reflect.js","src\\shadow-dom.js","src\\utils.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","install","builtInElementInterfaces","installHtmlConstructors","registry","CustomElementRegistry","Object","defineProperty","window","value","writable","configurable","enumerable","Document","prototype","createElement","createElementNS","nativeMutationObserver","addedNodes","nodeType","Node","ELEMENT_NODE","tryToUpgradeElementSync","observe","document","childList","subtree","addEventListener","disconnect","treeOrderShadowInclusiveForEach","push","forEach","once","customElementsReactionStack","backupElementQueue","processingBackupElementQueue","setInstallation","uninstall","getPrivateState","uninstallHtmlConstructors","originalCreateElement","originalCreateElementNS","setPrivateState","isInstalled","getInstallation","gatherBuiltInElementInterfaces","getOwnPropertyNames","test","originalHTMLElement","name","object","constructor","shimHtmlConstructors","Function","makeHtmlConstructor","getPrototypeOf","this","TypeError","definitions","htmlConstructor","c","constructionStack","localName","setPrototypeOf","customElementState","customElementDefinition","m","alreadyConstructedMarker","makeDOMException","createAnElement","lookupCustomElementDefinition","isValue","upgradeElement","enqueueUpgradeReaction","HTMLElement","attributes","hasChildNodes","parentNode","ownerDocument","namespaceURI","htmlNamespace","reportError","toLowerCase","is","setAttribute","isCustom","isValidCustomElementName","charCodeAt","defaultView","customElements","elementDefinitionIsRunning","whenDefinedPromiseMap","shouldNotUpgrade","reactionQueue","enqueueCallbackReaction","isConnected","splice","pop","tryToUpgradeElement","enqueueElementOnAppropriateElementQueue","setImmediate","invokeReactions","lifecycleCallbacks","observedAttributes","indexOf","type","callbackReactionType","callback","args","upgradeReactionType","definition","apply","executeCEReactions","descriptors","appendChild","message","getCallback","_custom","shadowRoot","childNodes","console","error","nativeSupport","promisesSupported","MutationObserver","default","arguments","Array","setTimeout","concat","__proto__","getOwnPropertyDescriptor","define","extends","HTMLUnknownElement","connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","d","slice","p","element","v","resolve","get","whenDefined","Promise","promise","_interopRequireDefault","__esModule","_interopRequireWildcard","hasOwnProperty","_utils","$","_customElements","_customElements2","Attr","setExistingAttributeValue","getData","CharacterData","data","replaceData","appendData","insertData","deleteData","$CustomEvent","bubbles","cancelable","composed","detail","createEvent","initCustomEvent","setShadowState","CustomEvent","validateTokens","validateToken","makeError","createDOMTokenList","getAttribute","split","sort","create","DOMTokenList","tokens","getOrCreateDOMTokenList","getShadowState","tokenLists","item","contains","add","setAttributeValue","join","remove","toggle","replace","getElementsByTagName","filterByRoot","getElementsByTagNameNS","getElementsByClassName","importNode","DOCUMENT_NODE","isShadowRoot","clone","adoptNode","adopt","_ShadowRoot","_ShadowRoot2","Element","getAttributeNode","changeAttribute","appendAttribute","setAttributeNS","getAttributeNodeNS","removeAttribute","removeAttributeByName","removeAttributeNS","removeAttributeByNamespace","setAttributeNode","setAttributeNodeNS","removeAttributeNode","ownerElement","attachShadow","mode","createDocumentFragment","extend","host","removeChild","closest","matches","parentElement","insertAdjacentElement","insertAdjacent","insertAdjacentText","createTextNode","innerHTML","serializeHTMLFragment","parseHTMLFragment","DocumentFragment","replaceAll","outerHTML","DOCUMENT_FRAGMENT_NODE","insertAdjacentHTML","$Event","initEvent","hasRelatedTarget","currentTarget","target","stopImmediatePropagation","stopPropagation","stopImmediatePropagationFlag","composedPath","path","Window","closedShadowHidden","shadowIncludingRoot","builtInComposedEvents","relatedTarget","calculatePath","Event","FocusEvent","MouseEvent","retarget","getTheParent","shadowIncludingInclusiveAncestor","root","assignedSlot","calculateRelatedTarget","calculateTarget","removeEventListener","dispatchEvent","capture","passive","EventListenerCollection","addListener","attach","removeListener","empty","detach","hostListeners","shadowListeners","eventPhase","CAPTURING_PHASE","invokeListeners","AT_TARGET","getListeners","BUBBLING_PHASE","listeners","calculatedPath","h","assignedNodes","flatten","findFlattenedSlotables","deleteCaption","caption","deleteTHead","tHead","deleteTFoot","tFoot","deleteRow","rows","deleteCell","cells","$MutationObserver","createMutationObserver","observer","interface","takeRecords","queue","setNamedItem","setNamedItemNS","removeNamedItem","removeNamedItemNS","ancestorOf","preceding","reverse","Math","abs","min","elementTextContent","TEXT_NODE","getRootNode","firstChild","lastChild","previousSibling","nextSibling","nodeValue","ATTRIBUTE_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","textContent","normalize","cloneNode","isEqualNode","DOCUMENT_TYPE_NODE","publicId","systemId","prefix","compareDocumentPosition","atttributes","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_DISCONNECTED","insertBefore","preInsert","append","replaceChild","preRemove","nodeName","splitText","insert","_shadowDom","_shadowDom2","installShadowDom","installCustomElements","shadowDomPolyfilled","customElementsPolyfilled","before","convertNodesIntoANode","after","replaceWith","activeElement","native","previousElementSibling","descriptor","nextElementSibling","getElementById","treeOrderRecursiveSelectFirst","id","children","firstElementChild","lastElementChild","childElementCount","prepend","querySelector","querySelectorAll","treeOrderRecursiveSelectAll","reflectString","set","reflectBoolean","hasAttribute","reflectInteger","parseInt","toString","reflectFloat","parseFloat","reflectDOMTokenList","_DOMTokenList","reflectHTMLElement","reflectTextContent","patchAll","interfaces","className","classList","slot","title","lang","translate","dir","hidden","tabIndex","accessKey","draggable","contextMenu","HTMLMenuElement","spellcheck","contentEditable","HTMLAnchorElement","download","rel","rev","relList","hreflang","text","HTMLAreaElement","alt","coords","shape","HTMLBaseElement","href","HTMLButtonElement","autofocus","disabled","formAction","formEnctype","formMethod","formNoValidate","formTarget","menu","HTMLCanvasElement","width","height","HTMLDataElement","HTMLDetailsElement","open","HTMLEmbedElement","src","HTMLFieldSetElement","HTMLFormElement","acceptCharset","action","autocomplete","enctype","encoding","method","noValidate","HTMLIFrameElement","srcdoc","sandbox","allowFullscreen","HTMLImageElement","srcset","crossOrigin","useMap","isMap","HTMLInputElement","accept","defaultChecked","dirName","inputMode","max","maxLength","minLength","multiple","pattern","placeholder","readOnly","required","size","step","defaultValue","HTMLKeygenElement","challenge","keytype","HTMLLabelElement","htmlFor","HTMLLegendElement","HTMLLIElement","HTMLLinkElement","media","sizes","HTMLMapElement","HTMLMediaElement","preload","loop","autoplay","mediaGroup","controls","defaultMuted","label","HTMLMenuItemElement","icon","checked","radiogroup","HTMLMetaElement","httpEquiv","content","HTMLMeterElement","low","high","optimum","HTMLModElement","cite","dateTime","HTMLObjectElement","typeMustMatch","HTMLOListElement","reversed","start","HTMLOptGroupElement","HTMLOptionElement","defaultSelected","HTMLOutputElement","HTMLParamElement","HTMLProgressElement","HTMLQuoteElement","HTMLScriptElement","charset","async","defer","nonce","HTMLSelectElement","HTMLSourceElement","HTMLStyleElement","HTMLTableCellElement","colSpan","rowSpan","headers","HTMLTableColElement","span","HTMLTableHeaderCellElement","scope","abbr","HTMLTextAreaElement","cols","wrap","HTMLTimeElement","HTMLTrackElement","kind","srclang","HTMLVideoElement","poster","inUse","reflect","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","_Attr2","_CharacterData2","_CustomEvent2","_Document2","_DOMTokenList2","_Element2","_Event2","_Event","EventTarget","_EventTarget2","HTMLSlotElement","_HTMLSlotElement2","HTMLTableElement","_HTMLTableElement2","HTMLTableRowElement","_HTMLTableRowElement2","HTMLTableSectionElement","_HTMLTableSectionElement2","_MutationObserver2","NamedNodeMap","_NamedNodeMap2","_Node2","Text","_Text2","DocumentType","_ChildNode2","_DocumentOrShadowRoot2","_NonDocumentTypeChildNode2","_NonElementParentNode2","_ParentNode2","_Slotable2","_reflect","_Attr","_CharacterData","_CustomEvent","_Document","_Element","_EventTarget","_HTMLSlotElement","_HTMLTableElement","_HTMLTableRowElement","_HTMLTableSectionElement","_MutationObserver","_NamedNodeMap","_Node","_Text","_ChildNode","_DocumentOrShadowRoot","_NonDocumentTypeChildNode","_NonElementParentNode","_ParentNode","_Slotable","_shadow","forEachShadowIncludingDescendant","forEachShadowIncludingInclusiveDescendant","parsingElement","parsingFragment","qualifiedName","descendant","inclusiveDescendant","ancestor","inclusiveAncestor","hostIncludingInclusiveAncestor","shadowIncludingDescendant","shadowIncludingInclusiveDescendant","shadowIncludingAncestor","updateSlotName","assignSlotablesForATree","updateSlotableName","assignSlotables","assignASlot","attributeChangeSteps","queueMutationRecord","replaceAttribute","getNamedItem","getNamedItemNS","findASlot","findSlotables","k","signalASlotChange","renderSlotablesAsync","signalSlotList","queueMutationObserverCompoundMicrotask","ensurePreInsertionValidity","g","N","observers","options","instance","createTransientObserver","mutationObservers","getOrCreateNodeObservers","nodes","node","attributeFilter","characterData","b","S","attributeOldValue","characterDataOldValue","E","w","A","attributeName","attributeNamespace","theEmptyList","removedNodes","oldValue","freeze","mutationObserverCompoundMicrotaskQueuedFlag","notifyMutationObservers"],"mappings":"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","file":"./dist/shadow-dom.min.js.map","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n// https://html.spec.whatwg.org/multipage/scripting.html#custom-elements\n\n// TODO: CEReactions annotations for Range in the DOM spec\n// TODO: CEReactions for interfaces in the HTML spec\n\nvar nativeSupport = 'customElements' in window;\nvar promisesSupported = 'Promise' in window;\nvar originalHTMLElement = window.HTMLElement;\nvar originalCreateElement = Document.prototype.createElement;\nvar originalCreateElementNS = Document.prototype.createElementNS;\nvar nativeMutationObserver = window.MutationObserver;\nvar htmlNamespace = 'http://www.w3.org/1999/xhtml';\nvar alreadyConstructedMarker = 1;\nvar upgradeReactionType = 1;\nvar callbackReactionType = 2;\n\nexports.default = {\n    nativeSupport: nativeSupport,\n    install: install,\n    uninstall: uninstall,\n    isInstalled: isInstalled,\n    shimHtmlConstructors: shimHtmlConstructors,\n    isCustom: isCustom,\n    tryToUpgradeElement: tryToUpgradeElement,\n    enqueueCallbackReaction: enqueueCallbackReaction,\n    executeCEReactions: executeCEReactions,\n    isValidCustomElementName: isValidCustomElementName\n};\n\n\nvar setImmediate = 'setImmediate' in window ? window.setImmediate : function (callback) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n    }\n\n    return setTimeout.apply(undefined, [callback, 0].concat(args));\n};\n\nvar setPrototypeOf = function () {\n    if (Object.setPrototypeOf) {\n        return Object.setPrototypeOf;\n    }\n\n    var test = {};\n    var proto = {};\n    test.__proto__ = proto;\n    if (Object.getPrototypeOf(test) === proto) {\n        return function (object, proto) {\n            object.__proto__ = proto;\n            return object;\n        };\n    }\n\n    return function (object, proto) {\n        var names = Object.getOwnPropertyNames(proto);\n        for (var i = 0; i < names.length; i++) {\n            var name = names[i];\n            var descriptor = Object.getOwnPropertyDescriptor(proto, name);\n            Object.defineProperty(object, name, descriptor);\n        }\n    };\n}();\n\n// Installation/uninstallation\n\nfunction install() {\n    var installation = {};\n\n    installation.builtInElementInterfaces = installHtmlConstructors();\n    installation.registry = new CustomElementRegistry();\n\n    Object.defineProperty(window, 'customElements', {\n        value: installation.registry,\n        writable: false,\n        configurable: true,\n        enumerable: true\n    });\n\n    Document.prototype.createElement = createElement;\n    Document.prototype.createElementNS = createElementNS;\n\n    if (nativeMutationObserver) {\n        (function () {\n            var observer = new nativeMutationObserver(function (records) {\n                for (var i = 0; i < records.length; i++) {\n                    for (var j = 0; j < records[i].addedNodes.length; j++) {\n                        var added = records[i].addedNodes[j];\n                        if (added.nodeType === Node.ELEMENT_NODE) {\n                            tryToUpgradeElementSync(added);\n                        }\n                    }\n                }\n            });\n            observer.observe(window.document, {\n                childList: true,\n                subtree: true\n            });\n            window.document.addEventListener('DOMContentLoaded', function () {\n                observer.disconnect();\n            });\n        })();\n    }\n\n    window.document.addEventListener('DOMContentLoaded', function () {\n        // Upgrading elements initially present in the document\n        var elements = [];\n        treeOrderShadowInclusiveForEach(document, function (element) {\n            elements.push(element);\n        });\n        elements.forEach(tryToUpgradeElementSync);\n    }, { once: true });\n\n    installation.customElementsReactionStack = [];\n    installation.backupElementQueue = [];\n    installation.processingBackupElementQueue = false;\n\n    setInstallation(window, installation);\n}\n\nfunction uninstall() {\n    var windowState = getPrivateState(window);\n\n    if (!windowState) {\n        return;\n    }\n\n    uninstallHtmlConstructors(windowState.builtInElementInterfaces);\n\n    delete window['customElements'];\n\n    Document.prototype.createElement = originalCreateElement;\n    Document.prototype.createElementNS = originalCreateElementNS;\n\n    setPrivateState(window, undefined);\n}\n\nfunction isInstalled() {\n    return getInstallation(window) != null;\n}\n\nfunction gatherBuiltInElementInterfaces() {\n    var builtInElementInterfaces = [];\n    var windowPropertyNames = Object.getOwnPropertyNames(window);\n    for (var i = 0; i < windowPropertyNames.length; i++) {\n        var name = windowPropertyNames[i];\n        if (/^webkit/.test(name)) {\n            // This just avoids a slew of warnings.\n            continue;\n        }\n        var object = window[name];\n        if (object && object instanceof originalHTMLElement || object === originalHTMLElement) {\n            builtInElementInterfaces.push({ name: name, object: object, constructor: object.prototype.constructor });\n        }\n    }\n    return builtInElementInterfaces;\n}\n\nfunction shimHtmlConstructors() {\n    try {\n        // Ensure that we are only shimming browsers that support ES2015 class syntax.\n        new Function('return class {}');\n\n        var _makeHtmlConstructor = new Function('originalHTMLElement', 'return function(){const newTarget=new.target||this.constructor;' + 'return Reflect.construct(originalHTMLElement, [], newTarget);}');\n\n        var builtInElementInterfaces = gatherBuiltInElementInterfaces();\n        for (var i = 0; i < builtInElementInterfaces.length; i++) {\n            var _builtInElementInterf = builtInElementInterfaces[i],\n                name = _builtInElementInterf.name,\n                object = _builtInElementInterf.object;\n\n            var htmlConstructor = _makeHtmlConstructor(object);\n            htmlConstructor.prototype = object.prototype;\n            Object.defineProperty(object.prototype, 'constructor', {\n                value: htmlConstructor,\n                writable: true,\n                configurable: true\n            });\n            window[name] = htmlConstructor;\n        }\n    } catch (error) {\n        return;\n    }\n}\n\nfunction installHtmlConstructors() {\n    var builtInElementInterfaces = gatherBuiltInElementInterfaces();\n    for (var i = 0; i < builtInElementInterfaces.length; i++) {\n        var _builtInElementInterf2 = builtInElementInterfaces[i],\n            name = _builtInElementInterf2.name,\n            object = _builtInElementInterf2.object;\n\n        var htmlConstructor = makeHtmlConstructor();\n        htmlConstructor.prototype = object.prototype;\n        Object.defineProperty(object.prototype, 'constructor', {\n            value: htmlConstructor,\n            writable: true,\n            configurable: true\n        });\n        window[name] = htmlConstructor;\n    }\n    return builtInElementInterfaces;\n}\n\nfunction uninstallHtmlConstructors(builtInElementInterfaces) {\n    for (var i = 0; i < builtInElementInterfaces.length; i++) {\n        var _builtInElementInterf3 = builtInElementInterfaces[i],\n            name = _builtInElementInterf3.name,\n            object = _builtInElementInterf3.object,\n            _constructor = _builtInElementInterf3.constructor;\n\n        Object.defineProperty(object.prototype, 'constructor', {\n            value: _constructor,\n            writable: true,\n            configurable: true\n        });\n        window[name] = object;\n    }\n}\n\nfunction makeHtmlConstructor() {\n    return function htmlConstructor() {\n        var thisPrototype = Object.getPrototypeOf(this);\n\n        // 1. Let registry...\n        var registry = window['customElements'];\n        var registryState = getPrivateState(registry);\n\n        // 2. If NewTarget...\n        if (thisPrototype.constructor === htmlConstructor) {\n            throw new TypeError('Illegal constructor');\n        }\n\n        // 3. Let definition...\n        var definition = void 0;\n        for (var i = 0; i < registryState.definitions.length; i++) {\n            var current = registryState.definitions[i];\n            if (current.constructor === thisPrototype.constructor) {\n                definition = current;\n                break;\n            }\n        }\n        if (!definition) {\n            throw new TypeError();\n        }\n\n        // 4. If definition's local name is equal...\n        // 5. Otherwise... (customized built-in)\n        if (htmlConstructor !== definition.htmlConstructor) {\n            // TODO: assert this is the correct HTML___Element\n            throw new TypeError('Illegal constructor');\n        }\n\n        // 6. let prototype...\n        var prototype = thisPrototype;\n\n        // 7. if prototype is not Object...\n        // in this polyfill, this should always be true\n\n        // 8. If construction stack is empty...\n        var constructionStack = definition.constructionStack;\n        if (constructionStack.length === 0) {\n            var _element = originalCreateElement.call(window.document, definition.localName);\n            setPrototypeOf(_element, prototype);\n            setPrivateState(_element, {\n                customElementState: 'custom',\n                customElementDefinition: definition\n            });\n            return _element;\n        }\n\n        var lastIndex = constructionStack.length - 1;\n        // 9. Let element be the last entry\n        var element = constructionStack[lastIndex];\n        // 10. if alreadyConstructedMarker\n        if (element === alreadyConstructedMarker) {\n            throw makeDOMException('InvalidStateError', 'This element instance is already constructed');\n        }\n        // 11. set prototype\n        setPrototypeOf(element, prototype);\n        // 12. replace last entry\n        constructionStack[lastIndex] = alreadyConstructedMarker;\n        // 13. return element\n        return element;\n    };\n}\n\n// DOM element creation\n\nfunction createAnElement(document, qualifiedOrLocalName, nameSpace, prefix, is, synchronousCustomElements) {\n    is = is || null;\n    var result = null;\n    var definition = lookupCustomElementDefinition(document, nameSpace, qualifiedOrLocalName, is);\n    if (definition && definition.name != definition.localName) {\n        result = originalCreateElement.call(document, qualifiedOrLocalName);\n        setPrivateState(result, {\n            customElementState: 'undefined',\n            customElementDefinition: null,\n            isValue: is\n        });\n        if (synchronousCustomElements) {\n            upgradeElement(result, definition);\n        } else {\n            enqueueUpgradeReaction(result, definition);\n        }\n    } else if (definition) {\n        if (synchronousCustomElements) {\n            try {\n                result = new definition.constructor();\n                if (!(result instanceof HTMLElement)) {\n                    throw new TypeError('Illegal constructor');\n                }\n                if (result.attributes.length !== 0 || result.hasChildNodes() || result.parentNode || result.ownerDocument !== document || result.namespaceURI !== htmlNamespace || result.localName !== qualifiedOrLocalName) {\n                    var error = new Error('Invalid state manipulation during custom element construction');\n                    error.name = 'NotSupportedError';\n                    throw error;\n                }\n            } catch (error) {\n                reportError(error);\n                result = originalCreateElement.call(document, qualifiedOrLocalName);\n                // should be HTMLUnknownElement already\n                setPrivateState(result, {\n                    customElementState: 'failed'\n                });\n            }\n        } else {\n            result = originalCreateElement.call(document, qualifiedOrLocalName);\n            Object.setPrototypeOf(result, HTMLElement.prototype);\n            enqueueUpgradeReaction(result, definition);\n        }\n    } else {\n        result = nameSpace ? originalCreateElementNS.call(document, nameSpace, qualifiedOrLocalName) : originalCreateElement.call(document, qualifiedOrLocalName);\n        // skip setting the custom element state to 'undefined' in order\n        // to avoid unnecessary allocation.\n    }\n    return result;\n}\n\nfunction createElement(localName, options) {\n    var nameSpace = null;\n    //if (this instanceof HTMLDocument) {\n    localName = localName.toLowerCase();\n    nameSpace = htmlNamespace;\n    //}\n    var is = options ? options.is || null : null;\n    var element = createAnElement(this, localName, nameSpace, null, is, true);\n    if (is != null) {\n        element.setAttribute('is', is);\n    }\n    return element;\n}\n\nfunction createElementNS(nameSpace, qualifiedName, options) {\n    var is = options ? options.is || null : null;\n    var element = createAnElement(this, qualifiedName, nameSpace, null, is, true);\n    if (is != null) {\n        element.setAttribute('is', is);\n    }\n    return element;\n}\n\n// Custom Element spec\n\nfunction isCustom(node) {\n    if (node.nodeType != Node.ELEMENT_NODE) {\n        return false;\n    }\n    var nodeState = getPrivateState(node);\n    if (!nodeState) {\n        return false;\n    }\n    return nodeState.customElementState === 'custom';\n}\n\nfunction isValidCustomElementName(localName) {\n    // https://html.spec.whatwg.org/multipage/scripting.html#valid-custom-element-name\n    switch (localName) {\n        case \"annotation-xml\":\n        case \"color-profile\":\n        case \"font-face\":\n        case \"font-face-src\":\n        case \"font-face-uri\":\n        case \"font-face-format\":\n        case \"font-face-name\":\n        case \"missing-glyph\":\n            return false;\n    }\n\n    var nameLength = localName.length;\n\n    if (nameLength < 2) {\n        return false;\n    }\n\n    var firstCode = localName.charCodeAt(0);\n    if (firstCode < 0x61 /* a */ || firstCode > 0x7A /* z */) {\n            return false;\n        }\n\n    var foundHyphen = false;\n\n    for (var i = 1; i < nameLength; i++) {\n        var code = localName.charCodeAt(i);\n        if (code >= 0x61 /* a */ && code <= 0x7A /* z */) {\n                continue;\n            }\n        if (code === 0x2D /* - */) {\n                foundHyphen = true;\n                continue;\n            }\n        if (code === 0x2E /* . */ || code === 0x5F /* _ */ || code === 0xB7 /* · */) {\n                continue;\n            }\n        if (code >= 0x30 /* 0 */ && code <= 0x39 /* 9 */) {\n                continue;\n            }\n        if (code < 0x00C0) {\n            return false;\n        }\n        if (code >= 0xC0 && code <= 0xD6) {\n            continue;\n        }\n        if (code >= 0xD8 && code <= 0xF6) {\n            continue;\n        }\n        if (code >= 0xF8 && code <= 0x37D) {\n            continue;\n        }\n        if (code >= 0x37F && code <= 0x1FFF) {\n            continue;\n        }\n        if (code >= 0x200C && code <= 0x200D) {\n            continue;\n        }\n        if (code >= 0x203F && code <= 0x2040) {\n            continue;\n        }\n        if (code >= 0x2070 && code <= 0x218F) {\n            continue;\n        }\n        if (code >= 0x2C00 && code <= 0x2FEF) {\n            continue;\n        }\n        if (code >= 0x3001 && code <= 0xD7FF) {\n            continue;\n        }\n        if (code >= 0xF900 && code <= 0xFDCF) {\n            continue;\n        }\n        if (code >= 0xFDF0 && code <= 0xFFFD) {\n            continue;\n        }\n        if (code >= 0x10000 && code <= 0xEFFFF) {\n            continue;\n        }\n        return false;\n    }\n\n    return foundHyphen;\n}\n\nfunction lookupCustomElementDefinition(document, nameSpace, localName, is) {\n    if (nameSpace !== htmlNamespace) {\n        return null;\n    }\n    if (!document.defaultView) {\n        return null;\n    }\n    var registry = document.defaultView.customElements;\n    var privateState = getPrivateState(registry);\n    for (var i = 0; i < privateState.definitions.length; i++) {\n        var definition = privateState.definitions[i];\n        if (definition.localName === localName) {\n            if (definition.name === localName || definition.name === is) {\n                return definition;\n            }\n        }\n    }\n    return null;\n}\n\nfunction CustomElementRegistry() {\n    setPrivateState(this, {\n        definitions: [],\n        elementDefinitionIsRunning: false,\n        whenDefinedPromiseMap: {}\n    });\n}\n\nCustomElementRegistry.prototype = {\n    define: function define(name, constructor, options) {\n        var privateState = getPrivateState(this);\n        if (constructor !== constructor.prototype.constructor) {\n            throw new TypeError('The passed argument must be a constructor');\n        }\n        if (!isValidCustomElementName(name)) {\n            throw makeDOMException('SyntaxError');\n        }\n        // TODO: check for already defined name\n        // TODO: check for already defined constructor\n        var localName = name;\n        var extensionOf = options ? options.extends : null;\n        var htmlConstructor = window.HTMLElement;\n        if (extensionOf != null) {\n            if (isValidCustomElementName(extensionOf)) {\n                throw makeDOMException('NotSupportedError');\n            }\n            var testElement = originalCreateElement.call(window.document, extensionOf);\n            if (testElement instanceof HTMLUnknownElement) {\n                // TODO: check for HTMLUnknownElement\n            }\n            localName = extensionOf;\n            htmlConstructor = Object.getPrototypeOf(testElement).constructor;\n        }\n        if (privateState.elementDefinitionIsRunning) {\n            throw makeDOMException('NotSupportedError');\n        }\n        privateState.elementDefinitionIsRunning = true;\n        var caught = null;\n        var observedAttributes = [];\n        var lifecycleCallbacks = void 0;\n        var nativeInterface = void 0;\n        try {\n            var prototype = constructor.prototype;\n            if (!(prototype instanceof Object)) {\n                throw new TypeError('Invalid prototype');\n            }\n            lifecycleCallbacks = {\n                'connectedCallback': getCallback(prototype, 'connectedCallback'),\n                'disconnectedCallback': getCallback(prototype, 'disconnectedCallback'),\n                'adoptedCallback': getCallback(prototype, 'adoptedCallback'),\n                'attributeChangedCallback': getCallback(prototype, 'attributeChangedCallback')\n            };\n            if (lifecycleCallbacks['attributeChangedCallback']) {\n                var observedAttributesIterable = constructor.observedAttributes;\n                if (observedAttributesIterable) {\n                    observedAttributes = observedAttributesIterable.slice();\n                }\n            }\n        } catch (error) {\n            caught = error;\n        }\n        privateState.elementDefinitionIsRunning = false;\n        if (caught) {\n            throw caught;\n        }\n        var definition = {\n            name: name,\n            localName: localName,\n            constructor: constructor,\n            observedAttributes: observedAttributes,\n            lifecycleCallbacks: lifecycleCallbacks,\n            constructionStack: [],\n            htmlConstructor: htmlConstructor\n        };\n        privateState.definitions.push(definition);\n        var document = window.document;\n        treeOrderShadowInclusiveForEach(document, function (node) {\n            if (node.nodeType === Node.ELEMENT_NODE && node.namespaceURI === htmlNamespace && node.localName === localName) {\n                if (extensionOf) {\n                    var nodeState = getPrivateState(node);\n                    if (nodeState.isValue !== extensionOf) {\n                        return;\n                    }\n                }\n                enqueueUpgradeReaction(element, definition);\n            }\n        });\n        var entry = privateState.whenDefinedPromiseMap[name];\n        if (entry) {\n            setImmediate(function () {\n                entry.resolve();\n                privateState.whenDefinedPromiseMap[name] = null;\n            });\n        }\n    },\n    get: function get(name) {\n        var privateState = getPrivateState(this);\n        for (var i = 0; i < privateState.definitions.length; i++) {\n            var definition = privateState.definitions[i];\n            if (definition.name === name) {\n                return definition.constructor;\n            }\n        }\n        return undefined;\n    },\n    whenDefined: function whenDefined(name) {\n        if (!promisesSupported) {\n            throw new Error('Please include a promise polyfill.');\n        }\n        if (!isValidCustomElementName(name)) {\n            throw makeDOMException('SyntaxError', 'Invalid custom element name');\n        }\n        var privateState = getPrivateState(this);\n        for (var i = 0; i < privateState.definitions.length; i++) {\n            var definition = privateState.definitions[i];\n            if (name === definition.name) {\n                return Promise.resolve();\n            }\n        }\n        var entry = privateState.whenDefinedPromiseMap[name];\n        if (!entry) {\n            entry = { promise: null, resolve: null };\n            entry.promise = new Promise(function (resolve, reject) {\n                entry.resolve = resolve;\n            });\n            privateState.whenDefinedPromiseMap[name] = entry;\n        }\n        return entry.promise;\n    }\n};\n\nfunction upgradeElement(element, definition) {\n    // https://html.spec.whatwg.org/multipage/scripting.html#concept-upgrade-an-element\n    var elementState = getPrivateState(element);\n    if (!elementState) {\n        elementState = setPrivateState(element, {\n            reactionQueue: [],\n            customElementDefinition: definition\n        });\n    } else if (shouldNotUpgrade(elementState)) {\n        return;\n    }\n    var attributes = element.attributes;\n    for (var i = 0; i < attributes.length; i++) {\n        var attribute = attributes[i];\n        var _args = [attribute.localName, null, attribute.value, attribute.namespaceURI];\n        enqueueCallbackReaction(element, 'attributeChangedCallback', _args);\n    }\n    if (element.isConnected) {\n        enqueueCallbackReaction(element, 'connectedCallback', []);\n    }\n    definition.constructionStack.push(element);\n    var caught = null;\n    try {\n        var constructResult = new definition.constructor();\n        if (constructResult !== element) {\n            throw makeDOMException('InvalidStateError');\n        }\n    } catch (error) {\n        caught = error;\n        delete element.prototype;\n        elementState.customElementState = 'failed';\n        elementState.customElementDefinition = null;\n        elementState.reactionQueue.splice(0, elementState.reactionQueue.length);\n    }\n    definition.constructionStack.pop();\n    if (caught) {\n        throw caught;\n    }\n    elementState.customElementState = 'custom';\n}\n\nfunction tryToUpgradeElementSync(element) {\n    var elementState = getPrivateState(element);\n    var isValue = null;\n    if (elementState) {\n        if (shouldNotUpgrade(elementState)) {\n            return;\n        }\n        isValue = elementState.isValue;\n    }\n    var definition = lookupCustomElementDefinition(element.ownerDocument, element.namespaceURI, element.localName, isValue);\n    if (definition) {\n        upgradeElement(element, definition);\n    }\n}\n\nfunction tryToUpgradeElement(element) {\n    var elementState = getPrivateState(element);\n    var isValue = null;\n    if (elementState) {\n        if (shouldNotUpgrade(elementState)) {\n            return;\n        }\n        isValue = elementState.isValue;\n    }\n    var definition = lookupCustomElementDefinition(element.ownerDocument, element.namespaceURI, element.localName, isValue);\n    if (definition) {\n        enqueueUpgradeReaction(element, definition);\n    }\n}\n\nfunction enqueueElementOnAppropriateElementQueue(element) {\n    var installation = getInstallation(window);\n    if (!installation) {\n        return;\n    }\n    // https://html.spec.whatwg.org/multipage/scripting.html#enqueue-an-element-on-the-appropriate-element-queue\n    // 1. If the custom element reactions stack is empty, then:\n    var stack = installation.customElementsReactionStack;\n    if (stack.length === 0) {\n        // 1. Add element to the backup element queue.\n        installation.backupElementQueue.push(element);\n        // 2. If the processing the backup element queue flag is set, abort this algorithm.\n        if (installation.processingBackupElementQueue) {\n            return;\n        }\n        // 3. Set the processing the backup element queue flag.\n        installation.processingBackupElementQueue = true;\n        // 4. Queue a microtask to perform the following steps:\n        setImmediate(function () {\n            // 1. Invoke custom element reactions in the backup element queue.\n            invokeReactions(installation.backupElementQueue);\n            // 2. Unset the processing the backup element queue flag.\n            installation.processingBackupElementQueue = false;\n        });\n    }\n    // 2. Otherwise, add element to the current element queue.\n    else {\n            stack[stack.length - 1].push(element);\n        }\n}\n\nfunction enqueueCallbackReaction(element, callbackName, args) {\n    // https://html.spec.whatwg.org/multipage/scripting.html#enqueue-a-custom-element-callback-reaction\n    var elementState = getPrivateState(element);\n    var definition = elementState.customElementDefinition;\n    var callback = definition.lifecycleCallbacks[callbackName];\n    if (callback == null) {\n        return;\n    }\n    if (callbackName === 'attributeChangedCallback') {\n        var attributeName = args[0];\n        if (definition.observedAttributes.indexOf(attributeName) === -1) {\n            return;\n        }\n    }\n    if (!elementState.reactionQueue) {\n        elementState.reactionQueue = [];\n    }\n    elementState.reactionQueue.push({ type: callbackReactionType, callback: callback, args: args });\n    enqueueElementOnAppropriateElementQueue(element);\n}\n\nfunction enqueueUpgradeReaction(element, definition) {\n    // https://html.spec.whatwg.org/multipage/scripting.html#enqueue-a-custom-element-upgrade-reaction\n    var elementState = getPrivateState(element) || setPrivateState(element, { reactionQueue: [] });\n    elementState.customElementDefinition = definition;\n    elementState.reactionQueue.push({ type: upgradeReactionType, definition: definition });\n    enqueueElementOnAppropriateElementQueue(element);\n}\n\nfunction invokeReactions(queue) {\n    // https://html.spec.whatwg.org/multipage/scripting.html#invoke-custom-element-reactions\n    for (var i = 0; i < queue.length; i++) {\n        var _element2 = queue[i];\n        var reactions = getPrivateState(_element2).reactionQueue;\n        while (reactions.length) {\n            try {\n                var splicedOut = reactions.splice(0, 1);\n                var reaction = splicedOut[0];\n                switch (reaction.type) {\n                    case upgradeReactionType:\n                        upgradeElement(_element2, reaction.definition);\n                        break;\n                    case callbackReactionType:\n                        reaction.callback.apply(_element2, reaction.args);\n                        break;\n                }\n            } catch (error) {\n                reportError(error);\n            }\n        }\n    }\n}\n\nfunction executeCEReactions(callback) {\n    var installation = getInstallation(window);\n    if (installation) {\n        var stack = installation.customElementsReactionStack;\n        stack.push([]);\n        var result = callback();\n        invokeReactions(stack.pop());\n        return result;\n    }\n    return callback();\n}\n\n// Utility functions\n\nfunction shouldNotUpgrade(privateState) {\n    return privateState && (privateState.customElementState === 'custom' || privateState.customElementState === 'failed');\n}\n\nfunction makeDOMException(name, message) {\n    try {\n        var sacrifice = originalCreateElement.call(window.document, 'div');\n        descriptors.Node.appendChild.call(sacrifice, sacrifice);\n    } catch (error) {\n        error.message = message;\n        error.name = name;\n        return error;\n    }\n}\n\nfunction getCallback(prototype, callbackName) {\n    var callback = prototype[callbackName];\n    if (callback && typeof callback === 'function') {\n        return callback;\n    }\n    return null;\n}\n\nfunction getPrivateState(object) {\n    return object._custom;\n}\n\nfunction setPrivateState(object, state) {\n    return object._custom = state;\n}\n\nfunction getInstallation(window) {\n    return window._custom;\n}\n\nfunction setInstallation(window, installation) {\n    window._custom = installation;\n}\n\nfunction treeOrderShadowInclusiveForEach(node, callback) {\n    callback(node);\n    var shadowRoot = node.shadowRoot;\n    if (shadowRoot) {\n        treeOrderShadowInclusiveForEach(shadowRoot, callback);\n    }\n    var childNodes = node.childNodes;\n    for (var i = 0; i < childNodes.length; i++) {\n        treeOrderShadowInclusiveForEach(childNodes[i], callback);\n    }\n}\n\nfunction reportError(error) {\n    if ('console' in window && 'error' in window.console) {\n        window.console.error(error);\n    }\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// https://dom.spec.whatwg.org/#interface-attr\n\nexports.default = {\n\n    get value() {\n        return $.descriptors.Attr.value.get.call(this);\n    },\n\n    set value(value) {\n        var _this = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            $.setExistingAttributeValue(_this, value);\n        });\n    }\n\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar getData = $.descriptors.CharacterData.data.get; // https://dom.spec.whatwg.org/#interface-characterdata\n\nexports.default = {\n\n    get data() {\n        return getData.call(this);\n    },\n\n    set data(value) {\n        var length = getData.call(this).length;\n        $.replaceData(this, 0, length, value);\n    },\n\n    appendData: function appendData(data) {\n        var length = getData.call(this).length;\n        $.replaceData(this, length, 0, data);\n    },\n    insertData: function insertData(offset, data) {\n        $.replaceData(this, offset, 0, data);\n    },\n    deleteData: function deleteData(offset, count) {\n        $.replaceData(this, offset, count, '');\n    },\n    replaceData: function replaceData(offset, count, data) {\n        $.replaceData(this, offset, count, data);\n    }\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = $CustomEvent;\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction $CustomEvent(type, init) {\n    var bubbles = false;\n    var cancelable = false;\n    var composed = false;\n    var detail = null;\n    if (init) {\n        bubbles = init.bubbles === true;\n        cancelable = init.cancelable === true;\n        composed = init.composed === true;\n        detail = init.detail || null;\n    }\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, bubbles, cancelable, detail);\n    $.setShadowState(event, { composed: composed });\n    return event;\n} // https://dom.spec.whatwg.org/#interface-customevent\n\n$CustomEvent.prototype = window.CustomEvent.prototype;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getOrCreateDOMTokenList = getOrCreateDOMTokenList;\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// https://dom.spec.whatwg.org/#interface-domtokenlist\n\nexports.default = {\n\n    get length() {\n        var state = $.getShadowState(this);\n        return state.tokens.length;\n    },\n\n    // TODO: Caveat about indexer expressions?\n    item: function item(index) {\n        var state = $.getShadowState(this);\n        return index >= state.tokens.length ? null : state.tokens[index];\n    },\n    contains: function contains(token) {\n        var state = $.getShadowState(this);\n        return state.tokens.indexOf(token) !== -1;\n    },\n    add: function add() {\n        var _this = this;\n\n        for (var _len = arguments.length, tokens = Array(_len), _key = 0; _key < _len; _key++) {\n            tokens[_key] = arguments[_key];\n        }\n\n        return _customElements2.default.executeCEReactions(function () {\n            validateTokens(tokens);\n            var state = $.getShadowState(_this);\n            for (var i = 0; i < tokens.length; i++) {\n                var token = tokens[i];\n                var index = state.tokens.indexOf(token);\n                if (index === -1) {\n                    state.tokens.push(token);\n                }\n            }\n            state.tokens.sort();\n            $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n        });\n    },\n    remove: function remove() {\n        var _this2 = this;\n\n        for (var _len2 = arguments.length, tokens = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            tokens[_key2] = arguments[_key2];\n        }\n\n        return _customElements2.default.executeCEReactions(function () {\n            validateTokens(tokens);\n            var state = $.getShadowState(_this2);\n            for (var i = 0; i < tokens.length; i++) {\n                var token = tokens[i];\n                var index = state.tokens.indexOf(token);\n                if (index !== -1) {\n                    state.tokens.splice(index, 1);\n                }\n            }\n            $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n        });\n    },\n    toggle: function toggle(token, force) {\n        var _this3 = this,\n            _arguments = arguments;\n\n        return _customElements2.default.executeCEReactions(function () {\n            validateToken(token);\n            var state = $.getShadowState(_this3);\n            var index = state.tokens.indexOf(token);\n            if (index !== -1) {\n                if (_arguments.length === 1 || force === false) {\n                    state.tokens.splice(index, 1);\n                    $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n                    return false;\n                } else {\n                    return true;\n                }\n            } else {\n                if (force === false) {\n                    return false;\n                } else {\n                    state.tokens.push(token);\n                    state.tokens.sort();\n                    $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n                    return true;\n                }\n            }\n        });\n    },\n    replace: function replace(token, newToken) {\n        var _this4 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            validateToken(token);\n            validateToken(newToken);\n            var state = $.getShadowState(_this4);\n            var index = state.tokens.indexOf(token);\n            if (index === -1) {\n                return;\n            }\n            state.tokens[index] = newToken;\n            state.tokens.sort();\n            $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n        });\n    },\n\n\n    get value() {\n        var state = $.getShadowState(this);\n        return state.element.getAttribute(state.localName) || '';\n    },\n\n    set value(value) {\n        var _this5 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            var state = $.getShadowState(_this5);\n            $.setAttributeValue(state.element, state.localName, value);\n            // TODO: Remove usage of slice in favor of direct parse\n            state.tokens = $.slice(_this5);\n        });\n    }\n\n};\n\n\nfunction validateTokens(tokens) {\n    for (var i = 0; i < tokens.length; i++) {\n        validateToken(tokens[i]);\n    }\n}\n\nfunction validateToken(token) {\n    if (token == '') {\n        throw $.makeError('SyntaxError');\n    }\n    if (/\\s/.test(token)) {\n        throw $.makeError('InvalidCharacterError');\n    }\n}\n\nfunction createDOMTokenList(element, localName) {\n    // TODO: run the steps per the DOM spec for 'when a DOMTokenList is created'\n    var originalValue = element.getAttribute(localName);\n    var tokens = originalValue ? originalValue.split(/\\s/).sort() : [];\n    var tokenList = Object.create(DOMTokenList.prototype);\n    $.setShadowState(tokenList, { element: element, localName: localName, tokens: tokens });\n    return tokenList;\n}\n\nfunction getOrCreateDOMTokenList(element, localName) {\n    var elementState = $.getShadowState(element) || $.setShadowState(element, { tokenLists: {} });\n    if (!elementState.tokenLists) {\n        elementState.tokenLists = {};\n    }\n    var tokenList = void 0;\n    if (tokenList = elementState.tokenLists[localName]) {\n        return tokenList;\n    }\n    return elementState.tokenLists[localName] = createDOMTokenList(element, localName);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// https://dom.spec.whatwg.org/#interface-document\n\nexports.default = {\n\n    // TODO: tests\n    getElementsByTagName: function getElementsByTagName(qualifiedName) {\n        var results = $.descriptors.Document.getElementsByTagName.value.call(this, qualifiedName);\n        return $.filterByRoot(this, results);\n    },\n\n\n    // TODO: tests\n    getElementsByTagNameNS: function getElementsByTagNameNS(ns, localName) {\n        var results = $.descriptors.Document.getElementsByTagNameNS.value.call(this, ns, localName);\n        return $.filterByRoot(this, results);\n    },\n\n\n    // TODO: tests\n    getElementsByClassName: function getElementsByClassName(names) {\n        var results = $.descriptors.Document.getElementsByClassName.value.call(this, name);\n        return $.filterByRoot(this, results);\n    },\n\n\n    // TODO: tests\n    importNode: function importNode(node, deep) {\n        var _this = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            if (node.nodeType === Node.DOCUMENT_NODE || $.isShadowRoot(node)) {\n                throw $.makeError('NotSupportedError');\n            }\n\n            return $.clone(node, _this, deep);\n        });\n    },\n\n\n    // TODO: tests\n    adoptNode: function adoptNode(node) {\n        var _this2 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            return $.adopt(node, _this2);\n        });\n    }\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nvar _ShadowRoot = require('../interfaces/ShadowRoot.js');\n\nvar _ShadowRoot2 = _interopRequireDefault(_ShadowRoot);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.default = {\n\n    // TODO: tests\n    get attributes() {\n        var attributes = $.descriptors.Element.attributes.get.call(this);\n        var shadowState = $.getShadowState(attributes);\n        if (!shadowState) {\n            $.setShadowState(attributes, { element: this });\n        }\n        return attributes;\n    },\n\n    // TODO: tests\n    setAttribute: function setAttribute(qualifiedName, value) {\n        var _this = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            var attribute = $.descriptors.Element.getAttributeNode.value.call(_this, qualifiedName);\n            if (!attribute) {\n                $.descriptors.Element.setAttribute.value.call(_this, qualifiedName, value);\n                attribute = $.descriptors.Element.getAttributeNode.value.call(_this, qualifiedName);\n                $.appendAttribute(attribute, _this);\n            } else {\n                $.changeAttribute(attribute, _this, value);\n            }\n        });\n    },\n\n\n    // TODO: tests\n    setAttributeNS: function setAttributeNS(nameSpace, qualifiedName, value) {\n        var _this2 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            var attribute = $.descriptors.Element.getAttributeNodeNS.value.call(_this2, nameSpace, qualifiedName);\n            if (!attribute) {\n                $.descriptors.Element.setAttributeNS.value.call(_this2, nameSpace, qualifiedName, value);\n                attribute = $.descriptors.Element.getAttributeNodeNS.value.call(_this2, nameSpace, qualifiedName);\n                $.appendAttribute(attribute, _this2);\n            } else {\n                $.changeAttribute(attribute, _this2, value);\n            }\n        });\n    },\n\n\n    // TODO: tests\n    removeAttribute: function removeAttribute(qualifiedName) {\n        var _this3 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            $.removeAttributeByName(qualifiedName, _this3);\n        });\n    },\n\n\n    // TODO: tests\n    removeAttributeNS: function removeAttributeNS(namespace, localName) {\n        var _this4 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            $.removeAttributeByNamespace(namespace, localName, _this4);\n        });\n    },\n\n\n    // TODO: tests\n    setAttributeNode: function setAttributeNode(attr) {\n        var _this5 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            return $.setAttribute(attr, _this5, $.descriptors.Element.setAttributeNode);\n        });\n    },\n\n\n    // TODO: tests\n    setAttributeNodeNS: function setAttributeNodeNS(attr) {\n        var _this6 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            return $.setAttribute(attr, _this6, $.descriptors.Element.setAttributeNodeNS);\n        });\n    },\n\n\n    // TODO: tests\n    removeAttributeNode: function removeAttributeNode(attr) {\n        var _this7 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            if (attr.ownerElement !== _this7) {\n                throw $.makeError('NotFoundError');\n            }\n            $.removeAttribute(attr, _this7);\n            return attr;\n        });\n    },\n    attachShadow: function attachShadow(init) {\n        // https://dom.spec.whatwg.org/#dom-element-attachshadow\n        if (!init || init.mode !== 'open' && init.mode !== 'closed') {\n            throw $.makeError('TypeError');\n        }\n\n        if (this.namespaceURI !== 'http://www.w3.org/1999/xhtml') {\n            throw $.makeError('NotSupportedError');\n        }\n\n        switch (this.localName) {\n            case \"article\":case \"aside\":case \"blockquote\":case \"body\":\n            case \"div\":case \"footer\":case \"h1\":case \"h2\":case \"h3\":\n            case \"h4\":case \"h5\":case \"h6\":case \"header\":case \"main\":\n            case \"nav\":case \"p\":case \"section\":case \"span\":\n                break;\n            default:\n                if (_customElements2.default.isValidCustomElementName(this.localName)) {\n                    break;\n                }\n                throw $.makeError('NotSupportedError');\n        }\n\n        if (this.shadowRoot) {\n            throw $.makeError('InvalidStateError');\n        }\n\n        var shadow = this.ownerDocument.createDocumentFragment();\n\n        $.extend(shadow, _ShadowRoot2.default);\n\n        $.setShadowState(shadow, {\n            host: this,\n            mode: init.mode,\n            childNodes: []\n        });\n\n        var originalChildNodes = $.descriptors.Node.childNodes.get.call(this);\n        var removeChild = $.descriptors.Node.removeChild.value;\n        var savedChildNodes = new Array(originalChildNodes.length);\n        var firstChild = void 0;\n        var i = 0;\n        while (firstChild = originalChildNodes[0]) {\n            var childState = $.getShadowState(firstChild) || $.setShadowState(firstChild, {});\n            childState.parentNode = this;\n            savedChildNodes[i++] = firstChild;\n            removeChild.call(this, firstChild);\n        }\n\n        var hostState = $.getShadowState(this);\n        if (!hostState) {\n            hostState = {};\n            $.setShadowState(this, hostState);\n        }\n        hostState.shadowRoot = shadow;\n        hostState.childNodes = savedChildNodes;\n\n        return shadow;\n    },\n\n\n    get shadowRoot() {\n        // https://dom.spec.whatwg.org/#dom-element-shadowroot\n        var shadowRoot = null;\n        var shadowState = $.getShadowState(this);\n        if (shadowState) {\n            shadowRoot = shadowState.shadowRoot;\n            if (!shadowRoot || shadowRoot.mode === 'closed') {\n                return null;\n            }\n        }\n        return shadowRoot;\n    },\n\n    // TODO: tests\n    closest: function closest(selectors) {\n        var element = this;\n\n        do {\n            if (element.matches(selectors)) {\n                return element;\n            }\n        } while (element = element.parentElement);\n    },\n\n\n    // TODO: tests\n    getElementsByTagName: function getElementsByTagName(qualifiedName) {\n        var results = $.descriptors.Element.getElementsByTagName.value.call(this, qualifiedName);\n        return $.filterByRoot(this, results);\n    },\n\n\n    // TODO: tests\n    getElementsByTagNameNS: function getElementsByTagNameNS(ns, localName) {\n        var results = $.descriptors.Element.getElementsByTagNameNS.value.call(this, ns, localName);\n        return $.filterByRoot(this, results);\n    },\n\n\n    // TODO: tests\n    getElementsByClassName: function getElementsByClassName(names) {\n        var results = $.descriptors.Element.getElementsByClassName.value.call(this, name);\n        return $.filterByRoot(this, results);\n    },\n\n\n    // TODO: tests\n    insertAdjacentElement: function insertAdjacentElement(where, element) {\n        var _this8 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            // https://dom.spec.whatwg.org/#dom-element-insertadjacentelement\n            return $.insertAdjacent(_this8, where, element);\n        });\n    },\n\n\n    // TODO: tests\n    insertAdjacentText: function insertAdjacentText(where, data) {\n        // https://dom.spec.whatwg.org/#dom-element-insertadjacenttext\n        var text = this.ownerDocument.createTextNode(data);\n        $.insertAdjacent(this, where, text);\n        return;\n    },\n\n\n    // https://w3c.github.io/DOM-Parsing/#extensions-to-the-element-interface\n\n    // TODO: more thorough tests of the serialization\n    get innerHTML() {\n        // https://w3c.github.io/DOM-Parsing/#dom-element-innerhtml\n        return $.serializeHTMLFragment(this);\n    },\n\n    // TODO: MutationObserver tests\n    set innerHTML(value) {\n        var _this9 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-innerhtml\n            var fragment = $.parseHTMLFragment(value, _this9);\n            var content = _this9['content'];\n            if (content instanceof DocumentFragment) {\n                $.replaceAll(fragment, content);\n            } else {\n                $.replaceAll(fragment, _this9);\n            }\n        });\n    },\n\n    // TODO: tests\n    get outerHTML() {\n        // https://w3c.github.io/DOM-Parsing/#dom-element-outerhtml\n        return $.serializeHTMLFragment({ childNodes: [this] });\n    },\n\n    // TODO: tests\n    set outerHTML(value) {\n        var _this10 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-outerhtml\n            var parent = _this10.parentNode;\n            if (parent === null) {\n                return;\n            }\n            if (parent.nodeType === Node.DOCUMENT_NODE) {\n                throw $.makeError('NoModificationAllowedError');\n            }\n            if (parent.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n                parent = _this10.ownerDocument.createElement('body');\n            }\n            var fragment = $.parseHTMLFragment(value, parent);\n            $.replace(_this10, fragment, _this10.parentNode);\n        });\n    },\n\n    // TODO: tests\n    insertAdjacentHTML: function insertAdjacentHTML(position, text) {\n        var _this11 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-insertadjacenthtml\n            // We aren't going to go exactly by the books for this one.\n            var fragment = $.parseHTMLFragment(text, _this11);\n            $.insertAdjacent(_this11, position, fragment);\n        });\n    }\n}; // https://dom.spec.whatwg.org/#interface-element","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.hasRelatedTarget = undefined;\nexports.default = $Event;\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction $Event(type, init) {\n    var bubbles = false;\n    var cancelable = false;\n    var composed = false;\n    if (init) {\n        bubbles = init.bubbles === true;\n        cancelable = init.cancelable === true;\n        composed = init.composed === true;\n    }\n    var event = document.createEvent('event');\n    event.initEvent(type, bubbles, cancelable);\n    $.setShadowState(event, { composed: composed });\n    return event;\n} // https://dom.spec.whatwg.org/#interface-event\n\n$Event.prototype = {\n\n    get currentTarget() {\n        return $.getShadowState(this).currentTarget;\n    },\n\n    get target() {\n        return $.getShadowState(this).target;\n    },\n\n    stopImmediatePropagation: function stopImmediatePropagation() {\n        this.stopPropagation();\n        $.getShadowState(this).stopImmediatePropagationFlag = true;\n    },\n    composedPath: function composedPath() {\n        // https://dom.spec.whatwg.org/#dom-event-composedpath\n\n        // 1. Let composedPath be a new empty list.\n        var composedPath = [];\n\n        // 2. Let currentTarget be context object’s currentTarget attribute value.\n        var currentTarget = this.currentTarget;\n\n        // 3. For each tuple in context object’s path:\n        var path = $.getShadowState(this).path;\n\n        if (path) {\n            var c = 0;\n            for (var i = 0; i < path.length; i++) {\n                var item = path[i][0];\n                if (currentTarget instanceof Window) {\n                    if (!(item instanceof Node) || !$.closedShadowHidden(item, $.shadowIncludingRoot(item))) {\n                        composedPath[c++] = item;\n                    }\n                } else if (currentTarget instanceof Node) {\n                    if (!$.closedShadowHidden(item, currentTarget)) {\n                        composedPath[c++] = item;\n                    }\n                } else {\n                    composedPath[c++] = item;\n                }\n            }\n        }\n\n        // 4. return composedPath.\n        return composedPath;\n    },\n\n\n    get composed() {\n        // TODO: Compare against the actual prototype instead of just the type strings\n        return $.getShadowState(this).composed || builtInComposedEvents.indexOf(this.type) !== -1;\n    }\n\n};\n\n// FocusEvent:\n// relatedTarget will be the element losing or gaining focus\n// MouseEvent:\n// relatedTarget will be the element being moved into or out of\nvar hasRelatedTarget = exports.hasRelatedTarget = {\n\n    get relatedTarget() {\n        return $.getShadowState(this).relatedTarget;\n    }\n\n};\n\nvar builtInComposedEvents = [\n// FocusEvent\n'blur', 'focus', 'focusin', 'focusout',\n// MouseEvent\n'click', 'dblclick', 'mousedown', 'mouseenter', 'mouseleave', 'mousemove', 'mouseout', 'mouseover', 'mouseup',\n// WheelEvent\n'wheel',\n// InputEvent\n'beforeinput', 'input',\n// KeyboardEvent\n'keydown', 'keyup',\n// CompositionEvent\n'compositionstart', 'compositionupdate', 'compositionend',\n// Legacy UIEvent\n'DOMActivate',\n// Legacy FocusEvent\n'DOMFocusIn', 'DOMFocusOut',\n// Legacy KeyboardEvent\n'keypress'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (base) {\n\n    var native = {\n        addEventListener: base.prototype.addEventListener,\n        removeEventListener: base.prototype.removeEventListener,\n        dispatchEvent: base.prototype.dispatchEvent\n    };\n\n    return {\n        addEventListener: function addEventListener(type, callback, options) {\n            if (typeof callback !== 'function') {\n                return;\n            }\n\n            var listener = { callback: callback };\n            var capture = false;\n\n            if (typeof options === 'boolean') {\n                capture = options;\n            } else if (typeof options !== 'undefined') {\n                capture = options.capture === true;\n                listener.once = options.once === true;\n                // we don't do anything with passive.\n                listener.passive = options.passive === true;\n            }\n\n            var collection = EventListenerCollection.get(this, type, capture) || EventListenerCollection.create(this, type, capture);\n\n            collection.addListener(this, listener);\n            collection.attach(native.addEventListener);\n        },\n        removeEventListener: function removeEventListener(type, callback, options) {\n            if (typeof callback !== 'function') {\n                return;\n            }\n\n            var listener = { callback: callback };\n            var capture = false;\n\n            if (typeof options === 'boolean') {\n                capture = options;\n            } else if (typeof options !== 'undefined') {\n                capture = options.capture === true;\n            }\n\n            var collection = EventListenerCollection.get(this, type, capture);\n\n            if (!collection) {\n                return;\n            }\n\n            collection.removeListener(this, listener);\n\n            if (collection.empty) {\n                collection.detach(native.removeEventListener);\n            }\n        }\n    };\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// https://dom.spec.whatwg.org/#interface-eventtarget\n\nvar EventListenerCollection = function EventListenerCollection(target, type, capture) {\n    var _this = this;\n\n    this.target = target;\n    this.type = type;\n    this.capture = capture;\n\n    this.hostListeners = [];\n    this.shadowListeners = [];\n\n    this.callback = function (event) {\n        var shadowRoot = null;\n        var targetState = $.getShadowState(target);\n        if (targetState) {\n            shadowRoot = targetState.shadowRoot;\n        }\n        switch (event.eventPhase) {\n            case Event.prototype.CAPTURING_PHASE:\n                _this.invokeListeners(event, _this.target, _this.hostListeners);\n                if (shadowRoot) {\n                    _this.invokeListeners(event, shadowRoot, _this.shadowListeners);\n                }\n                break;\n            case Event.prototype.AT_TARGET:\n                var nativeTarget = $.descriptors.Event.target.get.call(event);\n                _this.invokeListeners(event, nativeTarget, _this.getListeners(nativeTarget));\n                break;\n            case Event.prototype.BUBBLING_PHASE:\n                if (shadowRoot) {\n                    _this.invokeListeners(event, shadowRoot, _this.shadowListeners);\n                }\n                _this.invokeListeners(event, _this.target, _this.hostListeners);\n                break;\n        }\n    };\n};\n\nEventListenerCollection.get = function (target, type, capture) {\n    var targetState = $.getShadowState(target);\n    var nativeTarget = target;\n    var nativeTargetState = targetState;\n    if (targetState && targetState.host) {\n        nativeTarget = targetState.host;\n        nativeTargetState = $.getShadowState(nativeTarget);\n    }\n    if (!nativeTargetState || !nativeTargetState.listeners) {\n        return null;\n    }\n    var collections = nativeTargetState.listeners;\n    for (var i = 0; i < collections.length; i++) {\n        var collection = collections[i];\n        if (collection.target === nativeTarget && collection.type === type && collection.capture === capture) {\n            return collection;\n        }\n    }\n    return null;\n};\n\nEventListenerCollection.create = function (target, type, capture) {\n    var targetState = $.getShadowState(target);\n    var nativeTarget = target;\n    var nativeTargetState = targetState;\n    if (targetState && targetState.host) {\n        nativeTarget = targetState.host;\n        nativeTargetState = $.getShadowState(nativeTarget);\n    }\n    if (!nativeTargetState) {\n        nativeTargetState = $.setShadowState(nativeTarget, { listeners: [] });\n    } else if (!nativeTargetState.listeners) {\n        nativeTargetState.listeners = [];\n    }\n    var collection = new EventListenerCollection(nativeTarget, type, capture);\n    nativeTargetState.listeners.push(collection);\n    return collection;\n};\n\nEventListenerCollection.prototype = {\n\n    get empty() {\n        return this.hostListeners.length === 0 && this.shadowListeners.length === 0;\n    },\n\n    getListeners: function getListeners(target) {\n        var targetState = $.getShadowState(target);\n        if (targetState && targetState.host) {\n            return this.shadowListeners;\n        }\n        return this.hostListeners;\n    },\n    addListener: function addListener(target, listener) {\n        var listeners = this.getListeners(target);\n\n        for (var i = 0; i < listeners.length; i++) {\n            if (listener.callback === listeners[i].callback) {\n                return;\n            }\n        }\n\n        listeners.push(listener);\n    },\n    removeListener: function removeListener(target, listener) {\n        var listeners = this.getListeners(target);\n\n        for (var i = 0; i < listeners.length; i++) {\n            var other = listeners[i];\n            if (listener.callback === other.callback) {\n                listeners.splice(i, 1);\n                break;\n            }\n        }\n    },\n    invokeListeners: function invokeListeners(event, currentTarget, listeners) {\n        var eventState = $.getShadowState(event) || $.setShadowState(event, {});\n        var path = eventState.calculatedPath;\n        if (!path) {\n            path = eventState.calculatedPath = calculatePath(event);\n        }\n        // if there is no target, the event is not composed and should be stopped\n        var target = calculateTarget(currentTarget, path);\n        if (!target) {\n            event.stopImmediatePropagation();\n        } else {\n            var relatedTarget = calculateRelatedTarget(currentTarget, path);\n            var remove = void 0;\n\n            eventState.path = path;\n            eventState.currentTarget = currentTarget;\n            eventState.target = target;\n            eventState.relatedTarget = relatedTarget;\n\n            for (var i = 0; i < listeners.length; i++) {\n                var listener = listeners[i];\n                var result = listener.callback.call(currentTarget, event);\n                if (listener.once) {\n                    if (!remove) {\n                        remove = [listener];\n                    } else {\n                        remove.push[listener];\n                    }\n                }\n                if (eventState.stopImmediatePropagationFlag) {\n                    break;\n                }\n            }\n\n            eventState.path = null;\n            eventState.currentTarget = null;\n\n            if (remove) {\n                for (var _i = 0; _i < remove.length; _i++) {\n                    var index = listeners.indexOf(remove[_i]);\n                    listeners.splice(index, 1);\n                }\n            }\n        }\n    },\n    attach: function attach(descriptor) {\n        descriptor.call(this.target, this.type, this.callback, this.capture);\n    },\n    detach: function detach(descriptor) {\n        descriptor.call(this.target, this.type, this.callback, this.capture);\n    }\n};\n\nfunction calculatePath(event) {\n    // https://dom.spec.whatwg.org/#concept-event-dispatch\n\n    var path = [];\n    var p = 0;\n\n    var target = $.descriptors.Event.target.get.call(event);\n\n    var relatedTargetDescriptor = null;\n\n    if (event instanceof FocusEvent) {\n        relatedTargetDescriptor = $.descriptors.FocusEvent.relatedTarget;\n    } else if (event instanceof MouseEvent) {\n        relatedTargetDescriptor = $.descriptors.MouseEvent.relatedTarget;\n    }\n\n    // Skip (native)\n    // 1. Set event’s dispatch flag.\n\n    // 2. Let targetOverride be target, if legacy target override flag is \n    // not given, and target’s associated Document otherwise. \n    var targetOverride = target;\n\n    // 3. Let relatedTarget be the result of retargeting event’s relatedTarget \n    // against target if event’s relatedTarget is non-null, and null otherwise.\n    var originalRelatedTarget = null;\n    var relatedTarget = null;\n    if (relatedTargetDescriptor) {\n        originalRelatedTarget = relatedTargetDescriptor.get.call(event);\n        if (originalRelatedTarget) {\n            relatedTarget = $.retarget(originalRelatedTarget, target);\n        }\n    }\n\n    // Skip (native)\n    // 4. If target is relatedTarget and target is not event’s relatedTarget, then return true.\n\n    // 5. Append (target, targetOverride, relatedTarget) to event’s path.\n    path[p++] = [target, targetOverride, relatedTarget];\n\n    // Skip (native)\n    // 6. Let isActivationEvent be true, if event is a MouseEvent object and \n    // event’s type attribute is \"click\", and false otherwise.\n    // 7. Let activationTarget be target, if isActivationEvent is true and \n    //target has activation behavior, and null otherwise.\n\n    // 8. Let parent be the result of invoking target’s get the parent with event.\n    var parent = getTheParent(target, event, path);\n\n    // 9. While parent is non-null:\n    while (parent != null) {\n        // 1. Let relatedTarget be the result of retargeting event’s relatedTarget\n        // against parent if event’s relatedTarget is non-null, and null otherwise.\n        if (originalRelatedTarget) {\n            relatedTarget = $.retarget(originalRelatedTarget, parent);\n        }\n        // 2. If target’s root is a shadow-including inclusive ancestor of parent, then... \n        // append (parent, null, relatedTarget) to event’s path.\n        if ($.shadowIncludingInclusiveAncestor($.root(target), parent)) {\n            path[p++] = [parent, null, relatedTarget];\n            parent = getTheParent(parent, event, path);\n            continue;\n        }\n        // 3. Otherwise, if parent and relatedTarget are identical, then set parent to null.\n        else if (parent === relatedTarget) {\n                break;\n            }\n            // 4. Otherwise, set target to parent and then... \n            // append (parent, target, relatedTarget) to event’s path.\n            else {\n                    target = parent;\n                    path[p++] = [parent, target, relatedTarget];\n                    parent = getTheParent(parent, event, path);\n                    continue;\n                }\n        // 5. If parent is non-null, then set parent to the result of \n        // invoking parent’s get the parent with event.\n        // NOTE: This step was duplicated above to save some cycles.\n    }\n\n    return path;\n}\n\nfunction getTheParent(node, event, path) {\n    // https://dom.spec.whatwg.org/#get-the-parent\n    // Each EventTarget object also has an associated get the parent \n    // algorithm, which takes an event event, and returns an EventTarget \n    // object. Unless specified otherwise it returns null.\n\n    // A node’s get the parent algorithm, given an event, \n    // returns the node’s assigned slot, if node is assigned, \n    // and node’s parent otherwise.\n\n    // A document’s get the parent algorithm, given an event, returns null if event’s \n    // type attribute value is \"load\" or document does not have a browsing context, \n    // and the document’s associated Window object otherwise.\n\n    // A shadow root’s get the parent algorithm, given an event, returns null if \n    // event’s composed flag is unset and shadow root is the root of event’s \n    // path’s first tuple’s item, and shadow root’s host otherwise.\n\n    if (node instanceof Node) {\n        if (node.nodeType === Node.DOCUMENT_NODE) {\n            if (event.type === 'load') {\n                // or browsing context?\n                return null;\n            }\n            return node.defaultView;\n        } else if ($.isShadowRoot(node)) {\n            if (!event.composed) {\n                var item = path[0][0];\n                if ($.root(item) === node) {\n                    return null;\n                }\n            }\n            return node.host;\n        }\n        return node.assignedSlot || node.parentNode;\n    }\n\n    return null;\n}\n\nfunction calculateRelatedTarget(currentTarget, path) {\n    for (var i = 0; i < path.length; i++) {\n        var item = path[i][0];\n        var relatedTarget = path[i][2];\n        if (item === currentTarget) {\n            return relatedTarget;\n        }\n    }\n    return null;\n}\n\nfunction calculateTarget(currentTarget, path) {\n    for (var i = 0; i < path.length; i++) {\n        var item = path[i][0];\n        if (item === currentTarget) {\n            for (var j = i; j >= 0; j--) {\n                var target = path[j][1];\n                if (target != null) {\n                    return target;\n                }\n            }\n            return null;\n        }\n    }\n    return null;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.default = {\n\n    // TODO: tests\n    get name() {\n        if (this.localName !== 'slot') {\n            return;\n        }\n\n        return this.getAttribute('name') || '';\n    },\n\n    // TODO: tests\n    set name(value) {\n        if (this.localName !== 'slot') {\n            return;\n        }\n\n        $.setAttributeValue(this, 'name', value);\n    },\n\n    // TODO: tests\n    assignedNodes: function assignedNodes(options) {\n        if (this.localName !== 'slot') {\n            return;\n        }\n\n        // https://html.spec.whatwg.org/multipage/scripting.html#dom-slot-assignednodes\n        // The assignedNodes(options) method, when invoked, must run these steps:\n\n        // 1. If the value of options's flatten member is false, then return this element's assigned nodes.\n        if (!options || options.flatten !== true) {\n            var assignedNodes = null;\n            var shadowState = $.getShadowState(this);\n            if (shadowState) {\n                assignedNodes = shadowState.assignedNodes;\n            }\n            return assignedNodes || [];\n        }\n\n        // 2. Return the result of finding flattened slotables with this element.\n        return $.findFlattenedSlotables(this);\n    }\n}; // https://html.spec.whatwg.org/multipage/scripting.html#the-slot-element","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.default = {\n\n    // TODO: tests\n    deleteCaption: function deleteCaption() {\n        var caption = this.caption;\n        if (caption) {\n            $.remove(caption, this);\n        }\n    },\n\n\n    // TODO: tests\n    deleteTHead: function deleteTHead() {\n        var tHead = this.tHead;\n        if (tHead) {\n            $.remove(tHead, this);\n        }\n    },\n\n\n    // TODO: tests\n    deleteTFoot: function deleteTFoot() {\n        var tFoot = this.tFoot;\n        if (tFoot) {\n            $.remove(tFoot, this);\n        }\n    },\n\n\n    // TODO: tests\n    deleteRow: function deleteRow(index) {\n        // https://www.w3.org/TR/html5/single-page.html#dom-table-deleterow\n        if (index === -1) {\n            index = this.rows.length - 1;\n        }\n        if (index < 0 || index >= this.rows.length) {\n            throw $.makeError('IndexSizeError');\n        }\n        this.rows[index].remove();\n    }\n}; // https://www.w3.org/TR/html5/single-page.html#the-table-element","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.default = {\n\n    // TODO: tests\n    deleteCell: function deleteCell(index) {\n        // https://www.w3.org/TR/html5/single-page.html#dom-tr-deletecell\n        if (index === -1) {\n            index = this.cells.length - 1;\n        }\n        if (index < 0 || index >= this.cells.length) {\n            throw $.makeError('IndexSizeError');\n        }\n        this.cells[index].remove();\n    }\n}; // https://www.w3.org/TR/html5/single-page.html#the-tr-element","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.default = {\n\n    // TODO: tests\n    deleteRow: function deleteRow(index) {\n        // https://www.w3.org/TR/html5/single-page.html#dom-tbody-deleterow\n        if (index < 0 || index >= this.rows.length) {\n            throw $.makeError('IndexSizeError');\n        }\n        this.rows[index].remove();\n    }\n}; // https://www.w3.org/TR/html5/single-page.html#the-tbody-element","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = $MutationObserver;\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction $MutationObserver(callback) {\n    var observer = $.createMutationObserver(callback);\n    $.setShadowState(this, { observer: observer });\n    observer.interface = this;\n} // https://dom.spec.whatwg.org/#interface-mutationobserver\n\n$MutationObserver.prototype = {\n    observe: function observe(target, options) {\n        $.getShadowState(this).observer.observe(target, options);\n    },\n    disconnect: function disconnect() {\n        $.getShadowState(this).observer.disconnect();\n    },\n    takeRecords: function takeRecords() {\n        var records = $.getShadowState(this).observer.queue;\n        return records.splice(0, records.length);\n    }\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// https://dom.spec.whatwg.org/#interface-namednodemap\n\nexports.default = {\n\n    // TODO: tests\n    setNamedItem: function setNamedItem(attr) {\n        var _this = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            var shadowState = $.getShadowState(_this);\n            return $.setAttribute(attr, shadowState.element, $.descriptors.Element.setAttributeNode);\n        });\n    },\n\n\n    // TODO: tests\n    setNamedItemNS: function setNamedItemNS(attr) {\n        var _this2 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            var shadowState = $.getShadowState(_this2);\n            return $.setAttribute(attr, shadowState.element, $.descriptors.Element.setAttributeNodeNS);\n        });\n    },\n\n\n    // TODO: tests\n    removeNamedItem: function removeNamedItem(qualifiedName) {\n        var _this3 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            var shadowState = $.getShadowState(_this3);\n            var attr = $.removeAttributeByName(qualifiedName, shadowState.element);\n            if (!attr) {\n                throw $.makeError('NotFoundError');\n            }\n            return attr;\n        });\n    },\n\n\n    // TODO: tests\n    removeNamedItemNS: function removeNamedItemNS(namespace, localName) {\n        var _this4 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            var shadowState = $.getShadowState(_this4);\n            var attr = $.removeAttributeByNamespace(namespace, localName, shadowState.element);\n            if (!attr) {\n                throw $.makeError('NotFoundError');\n            }\n            return attr;\n        });\n    }\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// https://dom.spec.whatwg.org/#interface-node\n\nexports.default = {\n\n    get isConnected() {\n        return $.shadowIncludingRoot(this).nodeType === Node.DOCUMENT_NODE;\n    },\n\n    getRootNode: function getRootNode(options) {\n        var composed = options && options.composed === true;\n        return composed ? $.shadowIncludingRoot(this) : $.root(this);\n    },\n\n\n    get parentNode() {\n        var parentNode = void 0;\n        var nodeState = $.getShadowState(this);\n        if (nodeState) {\n            parentNode = nodeState.parentNode;\n        }\n\n        return parentNode || $.descriptors.Node.parentNode.get.call(this);\n    },\n\n    get parentElement() {\n        var parentNode = this.parentNode;\n        if (parentNode && parentNode.nodeType === Node.ELEMENT_NODE) {\n            return parentNode;\n        }\n\n        return null;\n    },\n\n    // TODO: tests\n    hasChildNodes: function hasChildNodes() {\n        var nodeState = $.getShadowState(this);\n        if (nodeState) {\n            var childNodes = nodeState.childNodes;\n            if (childNodes) {\n                return childNodes.length > 0;\n            }\n        }\n\n        return $.descriptors.Node.hasChildNodes.value.call(this);\n    },\n\n\n    // TODO: tests\n    get childNodes() {\n        var nodeState = $.getShadowState(this);\n        if (nodeState) {\n            var childNodes = nodeState.childNodes;\n            if (childNodes) {\n                var childNodesLength = childNodes.length;\n                var result = new Array(childNodesLength);\n                for (var i = 0; i < childNodesLength; i++) {\n                    result[i] = childNodes[i];\n                }\n                return result;\n            }\n        }\n\n        return $.descriptors.Node.childNodes.get.call(this);\n    },\n\n    // TODO: tests\n    get firstChild() {\n        var nodeState = $.getShadowState(this);\n        if (nodeState) {\n            var childNodes = nodeState.childNodes;\n            if (childNodes) {\n                if (childNodes.length) {\n                    return childNodes[0];\n                }\n                return null;\n            }\n        }\n\n        return $.descriptors.Node.firstChild.get.call(this);\n    },\n\n    // TODO: tests\n    get lastChild() {\n        var nodeState = $.getShadowState(this);\n        if (nodeState) {\n            var childNodes = nodeState.childNodes;\n            if (childNodes) {\n                if (childNodes.length) {\n                    return childNodes[childNodes.length - 1];\n                }\n                return null;\n            }\n        }\n\n        return $.descriptors.Node.lastChild.get.call(this);\n    },\n\n    // TODO: tests\n    get previousSibling() {\n        var nodeState = $.getShadowState(this);\n        if (nodeState) {\n            var parentNode = nodeState.parentNode;\n            if (parentNode) {\n                var childNodes = $.getShadowState(parentNode).childNodes;\n                var siblingIndex = childNodes.indexOf(this) - 1;\n                return siblingIndex < 0 ? null : childNodes[siblingIndex];\n            }\n        }\n\n        return $.descriptors.Node.previousSibling.get.call(this);\n    },\n\n    // TODO: tests\n    get nextSibling() {\n        var nodeState = $.getShadowState(this);\n        if (nodeState) {\n            var parentNode = nodeState.parentNode;\n            if (parentNode) {\n                var childNodes = $.getShadowState(parentNode).childNodes;\n                var siblingIndex = childNodes.indexOf(this) + 1;\n                return siblingIndex === childNodes.length ? null : childNodes[siblingIndex];\n            }\n        }\n\n        return $.descriptors.Node.nextSibling.get.call(this);\n    },\n\n    // TODO: consider creating a raw property descriptor\n    // that uses the native get instead of a pass-through function\n    get nodeValue() {\n        return $.descriptors.Node.nodeValue.get.call(this);\n    },\n\n    // TODO: MutationObserver tests\n    set nodeValue(value) {\n        var _this = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            switch (_this.nodeType) {\n                case Node.ATTRIBUTE_NODE:\n                    $.setExistingAttributeValue(_this, value);\n                    break;\n                case Node.TEXT_NODE:\n                case Node.PROCESSING_INSTRUCTION_NODE:\n                case Node.COMMENT_NODE:\n                    var length = $.descriptors.CharacterData.data.get.call(_this).length;\n                    $.replaceData(_this, 0, length, value);\n                    break;\n            }\n        });\n    },\n\n    get textContent() {\n        switch (this.nodeType) {\n            case Node.DOCUMENT_FRAGMENT_NODE:\n            case Node.ELEMENT_NODE:\n                return elementTextContent(this);\n            case Node.ATTRIBUTE_NODE:\n                return $.descriptors.Attr.value.get.call(this);\n            case Node.TEXT_NODE:\n            case Node.PROCESSING_INSTRUCTION_NODE:\n            case Node.COMMENT_NODE:\n                return $.descriptors.CharacterData.data.get.call(this);\n            default:\n                return null;\n        }\n    },\n\n    // TODO: MutationObserver tests\n    set textContent(value) {\n        var _this2 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            switch (_this2.nodeType) {\n                case Node.DOCUMENT_FRAGMENT_NODE:\n                case Node.ELEMENT_NODE:\n                    var node = null;\n                    if (value !== '') {\n                        node = _this2.ownerDocument.createTextNode(value);\n                    }\n                    $.replaceAll(node, _this2);\n                    break;\n                case Node.ATTRIBUTE_NODE:\n                    $.setExistingAttributeValue(_this2, value);\n                    break;\n                case Node.TEXT_NODE:\n                case Node.PROCESSING_INSTRUCTION_NODE:\n                case Node.COMMENT_NODE:\n                    $.replaceData(_this2, 0, _this2.data.length, value);\n                    break;\n            }\n        });\n    },\n\n    // TODO: tests\n    normalize: function normalize() {\n        var _this3 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            // https://dom.spec.whatwg.org/#dom-node-normalize\n            // The normalize() method, when invoked, must run these steps \n            // for each descendant exclusive Text node node of context object:\n            var childNodes = _this3.childNodes;\n            var dataDescriptor = $.descriptors.CharacterData.data;\n            for (var i = 0; i < childNodes.length; i++) {\n                var childNode = childNodes[i];\n                if (childNode.nodeType === Node.TEXT_NODE) {\n                    var length = dataDescriptor.get.call(childNode).length;\n                    if (length === 0) {\n                        $.remove(childNode, _this3);\n                        continue;\n                    }\n                    var data = '';\n                    var contiguousTextNodes = new Array(childNodes.length);\n                    var contiguousCount = 0;\n                    var next = childNode;\n                    while (next = next.nextSibling && next.nodeType === Node.TEXT_NODE) {\n                        data += dataDescriptor.get.call(next);\n                        contiguousTextNodes[contiguousCount++] = next;\n                    }\n                    $.replaceData(childNode, length, 0, data);\n                    // TODO: (Range)\n                    for (var j = 0; j < contiguousCount; j++) {\n                        $.remove(contiguousTextNodes[j], _this3);\n                    }\n                } else {\n                    childNode.normalize();\n                }\n            }\n        });\n    },\n\n\n    // TODO: tests\n    cloneNode: function cloneNode(deep) {\n        var _this4 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            // https://dom.spec.whatwg.org/#dom-node-clonenode\n            // The cloneNode(deep) method, when invoked, must run these steps:\n\n            // 1. If context object is a shadow root, then throw a NotSupportedError.\n            if ($.isShadowRoot(_this4)) {\n                throw $.makeError('NotSupportedError');\n            }\n\n            // 2. Return a clone of the context object, with the clone children flag set if deep is true.\n            return $.clone(_this4, undefined, deep);\n        });\n    },\n\n\n    // TODO: tests\n    isEqualNode: function isEqualNode(other) {\n        // https://dom.spec.whatwg.org/#dom-node-isequalnode\n        // https://dom.spec.whatwg.org/#concept-node-equals\n        if (!other) {\n            return false;\n        }\n\n        if (this.nodeType !== other.nodeType) {\n            return false;\n        }\n\n        var thisAttributes = void 0;\n        var otherAttributes = void 0;\n\n        switch (this.nodeType) {\n            case Node.DOCUMENT_TYPE_NODE:\n                if (this.name !== other.name || this.publicId !== other.publicId || this.systemId !== other.systemId) {\n                    return false;\n                }\n                break;\n            case Node.ELEMENT_NODE:\n                if (this.namespaceURI !== other.namespaceURI || this.prefix !== other.prefix || this.localName !== other.localName) {\n                    return false;\n                }\n                thisAttributes = $.descriptors.Element.attributes.get.call(this);\n                otherAttributes = $.descriptors.Element.attributes.get.call(other);\n                if (thisAttributes.length != otherAttributes.length) {\n                    return false;\n                }\n                break;\n            case Node.ATTRIBUTE_NODE:\n                if (this.namespaceURI !== other.namespaceURI || this.localName !== other.localName || this.value !== other.value) {\n                    return false;\n                }\n                break;\n            case Node.PROCESSING_INSTRUCTION_NODE:\n                if (this.target !== other.target || this.data !== other.data) {\n                    return false;\n                }\n                break;\n            case Node.TEXT_NODE:\n            case Node.COMMENT_NODE:\n                if (this.data !== other.data) {\n                    return false;\n                }\n                break;\n        }\n\n        if (this.nodeType == Node.ELEMENT_NODE) {\n            for (var i = 0; i < thisAttributes.length; i++) {\n                var attr1 = thisAttributes[i];\n                var attr2 = otherAttributes[attr1.name];\n                if (attr1.value !== attr2.value) {\n                    return false;\n                }\n            }\n        }\n\n        var childNodes1 = this.childNodes;\n        var childNodes2 = other.childNodes;\n        if (childNodes1.length !== other.childNodes.length) {\n            return false;\n        }\n\n        for (var _i = 0; _i < childNodes1.length; _i++) {\n            if (!childNodes1[_i].isEqualNode(childNodes2[_i])) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n\n    // TODO: tests\n    compareDocumentPosition: function compareDocumentPosition(other) {\n        // https://dom.spec.whatwg.org/#dom-node-comparedocumentposition\n\n        if (this === other) {\n            return 0;\n        }\n\n        var node1 = other;\n        var node2 = this;\n        var attr1 = null;\n        var attr2 = null;\n\n        if (node1.nodeType == Document.prototype.ATTRIBUTE_NODE) {\n            attr1 = node1;\n            node1 = attr1.ownerElement;\n        }\n\n        if (node2.nodeType == Document.prototype.ATTRIBUTE_NODE) {\n            attr2 = node2;\n            node2 = attr2.ownerElement;\n\n            if (attr1 && node1 && node2 === node1) {\n                var attrs = node2.atttributes;\n                for (var i = 0; i < attrs.length; i++) {\n                    var attr = attrs[i];\n                    if (attr.isEqualNode(attr1)) {\n                        return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_PRECEDING;\n                    } else if (attr.isEqualNode(attr2)) {\n                        return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n                    }\n                }\n            }\n        }\n\n        if (!node1 || !node2 || $.root(node1) !== $.root(node2)) {\n            return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_FOLLOWING + Document.prototype.DOCUMENT_POSITION_DISCONNECTED;\n        }\n\n        if (ancestorOf(node2, node1) || node1 === node2 && attr2) {\n            return Document.prototype.DOCUMENT_POSITION_CONTAINS + Document.prototype.DOCUMENT_POSITION_PRECEDING;\n        }\n\n        if (ancestorOf(node1, node2) || node1 === node2 && attr1) {\n            return Document.prototype.DOCUMENT_POSITION_CONTAINS + Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n        }\n\n        if (preceding(node1, node2)) {\n            return Document.prototype.DOCUMENT_POSITION_PRECEDING;\n        }\n\n        return Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n    },\n\n\n    // TODO: tests\n    contains: function contains(node) {\n        // https://dom.spec.whatwg.org/#dom-node-contains\n\n        var parent = node.parentNode;\n\n        if (!parent) {\n            return false;\n        }\n\n        do {\n            if (parent === this) {\n                return true;\n            }\n        } while (parent = parent.parentNode);\n\n        return false;\n    },\n\n\n    // TODO: tests\n    insertBefore: function insertBefore(node, child) {\n        var _this5 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            // https://dom.spec.whatwg.org/#dom-node-insertbefore\n            // The insertBefore(node, child) method, when invoked, must return the result \n            // of pre-inserting node into context object before child.\n            return $.preInsert(node, _this5, child);\n        });\n    },\n\n\n    // TODO: tests\n    appendChild: function appendChild(node) {\n        var _this6 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            // https://dom.spec.whatwg.org/#dom-node-appendchild\n            // The appendChild(node) method, when invoked, must return the result of \n            // appending node to context object.\n            return $.append(node, _this6);\n        });\n    },\n\n\n    // TODO: tests\n    replaceChild: function replaceChild(node, child) {\n        var _this7 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            // https://dom.spec.whatwg.org/#dom-node-replacechild\n            // The replaceChild(node, child) method, when invoked, must return the \n            // result of replacing child with node within context object.\n            return $.replace(child, node, _this7);\n        });\n    },\n\n\n    // TODO: tests\n    removeChild: function removeChild(child) {\n        var _this8 = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            // https://dom.spec.whatwg.org/#dom-node-removechild\n            // The removeChild(child) method, when invoked, must return the result of \n            // pre-removing child from context object.\n            return $.preRemove(child, _this8);\n        });\n    }\n};\n\n\nfunction ancestorOf(node, ancestor) {\n    var parent = node.parentNode;\n\n    do {\n        if (parent === ancestor) {\n            return true;\n        }\n    } while (parent = parent.parentNode);\n\n    return false;\n}\n\nfunction preceding(element1, element2) {\n    function precedingSiblings(parent, sibling1, sibling2) {\n        var siblings = parent.childNodes;\n        for (var _i2 = 0; _i2 < siblings.length; _i2++) {\n            var sibling = siblings[_i2];\n            if (sibling === sibling1) {\n                return true;\n            } else if (sibling === sibling2) {\n                return false;\n            }\n        }\n    }\n\n    // Check if they're already siblings.\n    var ancestor1 = element1.parentNode;\n    var ancestor2 = element2.parentNode;\n\n    if (ancestor1 === ancestor2) {\n        return precedingSiblings(element1, element2);\n    }\n\n    // Find the closest common ancestor.\n    var ancestors1 = [ancestor1];\n    var ancestors2 = [ancestor2];\n\n    while (ancestor1 = ancestor1.parentNode) {\n        ancestors1.push(ancestor1);\n    }\n\n    while (ancestor2 = ancestor2.parentNode) {\n        ancestors2.push(ancestor2);\n    }\n\n    ancestors1.reverse();\n    ancestors2.reverse();\n\n    var diff = Math.abs(ancestors1.length - ancestors2.length);\n    var min = Math.min(ancestors1.length, ancestors2.length);\n\n    var i = 0;\n    while (ancestors1[i] === ancestors2[i]) {\n        i++;\n    }\n\n    return precedingSiblings(ancestors1[i - 1], ancestors1[i], ancestors2[i]);\n}\n\nfunction elementTextContent(element) {\n    var result = '';\n    var childNodes = element.childNodes;\n    for (var i = 0; i < childNodes.length; i++) {\n        var childNode = childNodes[i];\n        switch (childNode.nodeType) {\n            case Node.ELEMENT_NODE:\n                result += elementTextContent(childNode);\n                break;\n            case Node.TEXT_NODE:\n                result += $.descriptors.CharacterData.data.get.call(childNode);\n                break;\n        }\n    }\n    return result;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// https://dom.spec.whatwg.org/#interface-shadowroot\n// https://www.w3.org/TR/shadow-dom/#the-shadowroot-interface\n\nexports.default = {\n\n    get nodeName() {\n        return '#shadow-root';\n    },\n\n    get mode() {\n        return $.getShadowState(this).mode;\n    },\n\n    get host() {\n        return $.getShadowState(this).host;\n    },\n\n    // TODO: tests\n    get innerHTML() {\n        return $.serializeHTMLFragment(this);\n    },\n\n    // TODO: tests\n    set innerHTML(value) {\n        var _this = this;\n\n        return _customElements2.default.executeCEReactions(function () {\n            var fragment = $.parseHTMLFragment(value, _this);\n            $.replaceAll(fragment, _this);\n        });\n    }\n\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.default = {\n\n    // TODO: tests\n    splitText: function splitText(offset) {\n        var length = this.length;\n        if (offset > length) {\n            throw $.makeError('IndexSizeError');\n        }\n        var count = length - offset;\n        var newData = this.data.slice(offset, count);\n        var newNode = this.ownerDocument.createTextNode(newData);\n        var parent = this.parentNode;\n        if (parent) {\n            $.insert(newNode, parent, this.nextSibling);\n            // TODO: (Range)\n        }\n        $.replaceData(this, offset, count, '');\n        // TODO: (Range)\n        // if (!parent) { }\n        return newNode;\n    }\n}; // https://dom.spec.whatwg.org/#interface-text","'use strict';\n\nvar _shadowDom = require('./shadow-dom.js');\n\nvar _shadowDom2 = _interopRequireDefault(_shadowDom);\n\nvar _customElements = require('./custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar installShadowDom = false;\nvar installCustomElements = false;\n\nif (window['forceShadowDomPolyfill'] || !_shadowDom2.default.nativeSupport) {\n    installShadowDom = true;\n}\n\nif (window['forceCustomElementsPolyfill'] || !_customElements2.default.nativeSupport) {\n    installShadowDom = true;\n    installCustomElements = true;\n}\n\nif (installShadowDom) {\n    _shadowDom2.default.install();\n    window.shadowDomPolyfilled = true;\n}\n\nif (installCustomElements) {\n    _customElements2.default.install();\n    window.customElementsPolyfilled = true;\n} else {\n    // TODO: Offer a way to opt out if desired\n    _customElements2.default.shimHtmlConstructors();\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (base) {\n\n    return {\n\n        // TODO: tests\n        before: function before() {\n            var _this = this;\n\n            for (var _len = arguments.length, nodes = Array(_len), _key = 0; _key < _len; _key++) {\n                nodes[_key] = arguments[_key];\n            }\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://dom.spec.whatwg.org/#dom-childnode-before\n                // The before(nodes) method, when invoked, must run these steps:\n\n                // 1. Let parent be context object’s parent.\n                var parent = _this.parentNode;\n\n                // 2. If parent is null, terminate these steps.\n                if (!parent) {\n                    return;\n                }\n\n                // 3. Let viablePreviousSibling be context object’s first preceding \n                // sibling not in nodes, and null otherwise.\n                var viablePreviousSibling = _this.previousSibling;\n                while (viablePreviousSibling && nodes.indexOf(viablePreviousSibling) !== -1) {\n                    viablePreviousSibling = viablePreviousSibling.previousSibling;\n                }\n\n                // 4. Let node be the result of converting nodes into a node, given \n                // nodes and context object’s node document. Rethrow any exceptions.\n                var node = $.convertNodesIntoANode(nodes, _this.ownerDocument);\n\n                // 5. If viablePreviousSibling is null, set it to parent’s first child, \n                // and to viablePreviousSibling’s next sibling otherwise.\n                if (viablePreviousSibling === null) {\n                    viablePreviousSibling = parent.firstChild;\n                } else {\n                    viablePreviousSibling = viablePreviousSibling.nextSibling;\n                }\n\n                // 6. Pre-insert node into parent before viablePreviousSibling. \n                // Rethrow any exceptions.\n                $.preInsert(node, parent, viablePreviousSibling);\n            });\n        },\n\n\n        // TODO: tests\n        after: function after() {\n            var _this2 = this;\n\n            for (var _len2 = arguments.length, nodes = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                nodes[_key2] = arguments[_key2];\n            }\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://dom.spec.whatwg.org/#dom-childnode-after\n                // The after(nodes) method, when invoked, must run these steps:\n\n                // 1. Let parent be context object’s parent.\n                var parent = _this2.parentNode;\n\n                // 2. If parent is null, terminate these steps.\n                if (!parent) {\n                    return;\n                }\n\n                // 3. Let viableNextSibling be context object’s first following \n                // sibling not in nodes, and null otherwise.\n                var viableNextSibling = _this2.nextSibling;\n                while (viableNextSibling && nodes.indexOf(viableNextSibling) !== -1) {\n                    viableNextSibling = viableNextSibling.nextSibling;\n                }\n\n                // 4. Let node be the result of converting nodes into a node, given \n                // nodes and context object’s node document. Rethrow any exceptions.\n                var node = $.convertNodesIntoANode(nodes, _this2.ownerDocument);\n\n                // 5. Pre-insert node into parent before viableNextSibling. Rethrow \n                // any exceptions.\n                $.preInsert(node, parent, viableNextSibling);\n            });\n        },\n\n\n        // TODO: tests\n        replaceWith: function replaceWith() {\n            var _this3 = this;\n\n            for (var _len3 = arguments.length, nodes = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                nodes[_key3] = arguments[_key3];\n            }\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://dom.spec.whatwg.org/#dom-childnode-replacewith\n                // The replaceWith(nodes) method, when invoked, must run these steps:\n\n                // 1. Let parent be context object’s parent.\n                var parent = _this3.parentNode;\n\n                // 2. If parent is null, terminate these steps.\n                if (!parent) {\n                    return;\n                }\n\n                // 3. Let viableNextSibling be context object’s first following \n                // sibling not in nodes, and null otherwise.\n                var viableNextSibling = _this3.nextSibling;\n                while (viableNextSibling && nodes.indexOf(viableNextSibling) !== -1) {\n                    viableNextSibling = viableNextSibling.nextSibling;\n                }\n\n                // 4. Let node be the result of converting nodes into a node, given \n                // nodes and context object’s node document. Rethrow any exceptions.\n                var node = $.convertNodesIntoANode(nodes, _this3.ownerDocument);\n\n                // 5. If context object’s parent is parent, replace the context object \n                // with node within parent. Rethrow any exceptions.\n                if (_this3.parentNode == parent) {\n                    $.replace(_this3, node, parent);\n                }\n                // 6. Otherwise, pre-insert node into parent before viableNextSibling. \n                // Rethrow any exceptions.\n                else {\n                        $.preInsert(node, parent, viableNextSibling);\n                    }\n            });\n        },\n\n\n        // TODO: tests\n        remove: function remove() {\n            var _this4 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://dom.spec.whatwg.org/#dom-childnode-remove\n                // The remove() method, when invoked, must run these steps:\n\n                // 1. If context object’s parent is null, terminate these steps.\n                var parent = _this4.parentNode;\n\n                if (!parent) {\n                    return;\n                }\n\n                // 2. Remove the context object from context object’s parent.\n                $.remove(_this4, parent);\n            });\n        }\n    };\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.default = {\n\n    // TODO: consider getSelection()\n    // TODO: consider elementFromPoint(double x, double y)\n    // TODO: consider elementsFromPoint(double x, double y)\n    // TODO: consider get styleSheets()\n\n    // TODO: tests\n    get activeElement() {\n        var document = this.ownerDocument || this;\n        var nativeActiveElement = native.activeElement.get.call(document);\n\n        if (!nativeActiveElement || document != $.shadowIncludingRoot(this)) {\n            return null;\n        }\n\n        return $.retarget(nativeActiveElement, this);\n    }\n\n}; // https://dom.spec.whatwg.org/#mixin-documentorshadowroot\n// https://www.w3.org/TR/shadow-dom/#extensions-to-the-documentorshadowroot-mixin","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (base) {\n\n    var native = {\n        previousElementSibling: $.descriptor(base, 'previousElementSibling'),\n        nextElementSibling: $.descriptor(base, 'nextElementSibling')\n    };\n\n    return {\n\n        // TODO: tests\n        get previousElementSibling() {\n            var nodeState = $.getShadowState(this);\n            if (nodeState && nodeState.parentNode) {\n                var childNodes = $.getShadowState(nodeState.parentNode).childNodes;\n                var index = childNodes.indexOf(this);\n                while (index > 0) {\n                    var previous = childNodes[--index];\n                    if (previous.nodeType === Node.ELEMENT_NODE) {\n                        return previous;\n                    }\n                };\n                return null;\n            } else if (native.previousElementSibling) {\n                return native.previousElementSibling.get.call(this);\n            } else {\n                var getPreviousSibling = $.descriptors.Node.previousSibling.get;\n                var previousSibling = this;\n                while (previousSibling = getPreviousSibling.call(previousSibling)) {\n                    if (previousSibling.nodeType === Node.ELEMENT_NODE) {\n                        return previousSibling;\n                    }\n                }\n                return null;\n            }\n        },\n\n        // TODO: tests\n        get nextElementSibling() {\n            var nodeState = $.getShadowState(this);\n            if (nodeState && nodeState.parentNode) {\n                var childNodes = $.getShadowState(nodeState.parentNode).childNodes;\n                var index = childNodes.indexOf(this);\n                while (index < childNodes.length - 1) {\n                    var next = childNodes[++index];\n                    if (next.nodeType === Node.ELEMENT_NODE) {\n                        return next;\n                    }\n                };\n                return null;\n            } else if (native.nextElementSibling) {\n                return native.nextElementSibling.get.call(this);\n            } else {\n                var getNextSibling = $.descriptors.Node.nextSibling.get;\n                var nextSibling = this;\n                while (nextSibling = getNextSibling.call(nextSibling)) {\n                    if (nextSibling.nodeType === Node.ELEMENT_NODE) {\n                        return nextSibling;\n                    }\n                }\n                return null;\n            }\n        }\n\n    };\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (base) {\n\n    return {\n        getElementById: function getElementById(id) {\n            // https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid\n\n            if (id === '' || /\\s/.test(id)) {\n                return null;\n            }\n\n            var firstChild = this.firstChild;\n\n            if (!firstChild) {\n                return null;\n            }\n\n            return $.treeOrderRecursiveSelectFirst(firstChild, function (node) {\n                return node.id === id;\n            });\n        }\n    };\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (base) {\n\n    var native = {\n        children: $.descriptor(base, 'children'),\n        firstElementChild: $.descriptor(base, 'firstElementChild'),\n        lastElementChild: $.descriptor(base, 'lastElementChild'),\n        childElementCount: $.descriptor(base, 'childElementCount')\n    };\n\n    return {\n\n        get children() {\n            var childNodes = void 0;\n\n            var shadowState = $.getShadowState(this);\n            if (shadowState) {\n                childNodes = shadowState.childNodes;\n            }\n\n            if (!childNodes) {\n                if (native.children) {\n                    return native.children.get.call(this);\n                }\n                childNodes = this.childNodes;\n            }\n\n            var childNodesLength = childNodes.length;\n            var elements = new Array(childNodesLength);\n            var pushed = 0;\n            for (var i = 0; i < childNodesLength; i++) {\n                var node = childNodes[i];\n                if (node.nodeType == Node.ELEMENT_NODE) {\n                    elements[pushed++] = node;\n                }\n            }\n            elements.length = pushed;\n\n            return elements;\n        },\n\n        get firstElementChild() {\n            var childNodes = void 0;\n\n            var shadowState = $.getShadowState(this);\n            if (shadowState) {\n                childNodes = shadowState.childNodes;\n            }\n\n            if (!childNodes) {\n                if (native.firstElementChild) {\n                    return native.firstElementChild.get.call(this);\n                }\n                childNodes = this.childNodes;\n            }\n\n            for (var i = 0; i < childNodes.length; i++) {\n                var node = childNodes[i];\n                if (node.nodeType == Node.ELEMENT_NODE) {\n                    return node;\n                }\n            }\n\n            return null;\n        },\n\n        get lastElementChild() {\n            var childNodes = void 0;\n\n            var shadowState = $.getShadowState(this);\n            if (shadowState) {\n                childNodes = shadowState.childNodes;\n            }\n\n            if (!childNodes) {\n                if (native.lastElementChild) {\n                    return native.lastElementChild.get.call(this);\n                }\n                childNodes = this.childNodes;\n            }\n\n            for (var i = childNodes.length - 1; i >= 0; i--) {\n                var node = childNodes[i];\n                if (node.nodeType == Node.ELEMENT_NODE) {\n                    return node;\n                }\n            }\n\n            return null;\n        },\n\n        get childElementCount() {\n            var childNodes = void 0;\n\n            var shadowState = $.getShadowState(this);\n            if (shadowState) {\n                childNodes = shadowState.childNodes;\n            }\n\n            if (!childNodes) {\n                if (native.childElementCount) {\n                    return native.childElementCount.get.call(this);\n                }\n                childNodes = this.childNodes;\n            }\n\n            var count = 0;\n\n            for (var i = 0; i < childNodes.length; i++) {\n                var node = childNodes[i];\n                if (node.nodeType == Node.ELEMENT_NODE) {\n                    count++;\n                }\n            }\n\n            return count;\n        },\n\n        // TODO: tests\n        prepend: function prepend() {\n            var _this = this;\n\n            for (var _len = arguments.length, nodes = Array(_len), _key = 0; _key < _len; _key++) {\n                nodes[_key] = arguments[_key];\n            }\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://dom.spec.whatwg.org/#dom-parentnode-prepend\n                // The prepend(nodes) method, when invoked, must run these steps:\n\n                // 1. Let node be the result of converting nodes into a node given \n                // nodes and context object’s node document. Rethrow any exceptions.\n                var node = $.convertNodesIntoANode(nodes, _this.ownerDocument || _this);\n\n                // 2. Pre-insert node into context object before the context object’s \n                // first child. Rethrow any exceptions.\n                $.preInsert(node, _this, _this.firstChild);\n            });\n        },\n\n\n        // TODO: tests\n        append: function append() {\n            var _this2 = this;\n\n            for (var _len2 = arguments.length, nodes = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                nodes[_key2] = arguments[_key2];\n            }\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://dom.spec.whatwg.org/#dom-parentnode-append\n                // The append(nodes) method, when invoked, must run these steps:\n\n                // 1. Let node be the result of converting nodes into a node given \n                // nodes and context object’s node document. Rethrow any exceptions.\n                var node = $.convertNodesIntoANode(nodes, _this2.ownerDocument || _this2);\n\n                // 2. Append node to context object. Rethrow any exceptions.\n                $.append(node, _this2);\n            });\n        },\n\n\n        // TODO: tests\n        querySelector: function querySelector(selectors) {\n            var results = this.querySelectorAll(selectors);\n\n            if (results.length) {\n                return results[0];\n            }\n\n            return null;\n        },\n\n\n        // TODO: tests\n        querySelectorAll: function querySelectorAll(selectors) {\n            // https://dom.spec.whatwg.org/#scope-match-a-selectors-string\n            // this is horrible, performance-wise.\n            // it's about 100x slower than native querySelectorAll.\n            // that might not amount to much in practice, though.\n            // after all, this is a polyfill.\n\n            var results = [];\n\n            var firstChild = this.firstChild;\n\n            if (!firstChild) {\n                return results;\n            }\n\n            $.treeOrderRecursiveSelectAll(firstChild, results, function (node) {\n                return node.nodeType === Node.ELEMENT_NODE && node.matches(selectors);\n            });\n\n            return results;\n        }\n    };\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (base) {\n\n    return {\n\n        get assignedSlot() {\n            // spec implementation is to run 'find a slot'\n            // this uses an alternative (see https://github.com/whatwg/dom/issues/369)\n            var shadowState = $.getShadowState(this);\n            if (shadowState) {\n                var slot = shadowState.assignedSlot;\n                if (slot && $.closedShadowHidden(slot, this)) {\n                    slot = null;\n                }\n                return slot;\n            }\n            return null;\n        }\n\n    };\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.patchAll = patchAll;\n\nvar _utils = require('./utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _DOMTokenList = require('./interfaces/DOMTokenList.js');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// Fear not the single page\n// https://www.w3.org/TR/html/single-page.html\n\n// TODO: implement on demand\n// These might be a bit much considering we can't do anything about inline script handlers\n// GlobalEventHandlers\n// DocumentAndElementEventHandlers\n\n// TODO: implement on demand\n// This would be useful to polyfill considering most current browsers don't implement it yet\n// HTMLHyperlinkElementUtils (Anchor, Area)\n\n// An index of IDL attributes that should reflect a corresponding content attribute.\n\nvar interfaces = {\n    'Element': {\n        'id': reflectString(),\n        'className': reflectString('class'),\n        'classList': reflectDOMTokenList('class'),\n        'slot': reflectString()\n    },\n    'HTMLElement': {\n        'title': reflectString(),\n        'lang': reflectString(),\n        'translate': reflectString(),\n        'dir': reflectString(),\n        // TODO: implement on demand\n        //'dataset': reflect.DOMStringMap('data'),\n        'hidden': reflectBoolean(),\n        'tabIndex': reflectInteger(null, 0),\n        'accessKey': reflectString(),\n        'draggable': reflectString(),\n        'contextMenu': reflectHTMLElement(window.HTMLMenuElement),\n        'spellcheck': reflectString(),\n        // ElementContentEditable\n        'contentEditable': reflectString()\n    },\n    'HTMLAnchorElement': {\n        'target': reflectString(),\n        'download': reflectString(),\n        'rel': reflectString(),\n        'rev': reflectString(),\n        'relList': reflectDOMTokenList('rel'),\n        'hreflang': reflectString(),\n        'type': reflectString(),\n        'text': reflectTextContent()\n    },\n    'HTMLAreaElement': {\n        'alt': reflectString(),\n        'coords': reflectString(),\n        'shape': reflectString(),\n        'target': reflectString(),\n        'download': reflectString(),\n        'rel': reflectString(),\n        'relList': reflectDOMTokenList('rel'),\n        'hreflang': reflectString(),\n        'type': reflectString()\n    },\n    'HTMLBaseElement': {\n        'href': reflectString(),\n        'target': reflectString()\n    },\n    'HTMLButtonElement': {\n        'autofocus': reflectBoolean(),\n        'disabled': reflectBoolean(),\n        //'form': reflectHTMLElement(HTMLFormElement, true),\n        'formAction': reflectString(),\n        'formEnctype': reflectString(),\n        'formMethod': reflectString(),\n        'formNoValidate': reflectBoolean(),\n        'formTarget': reflectString(),\n        'name': reflectString(),\n        'type': reflectString(),\n        'value': reflectString(),\n        'menu': reflectHTMLElement(window.HTMLMenuElement)\n    },\n    'HTMLCanvasElement': {\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    'HTMLDataElement': {\n        'value': reflectString()\n    },\n    'HTMLDetailsElement': {\n        'open': reflectBoolean()\n    },\n    'HTMLEmbedElement': {\n        'src': reflectString(),\n        'type': reflectString(),\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    'HTMLFieldSetElement': {\n        'disabled': reflectBoolean(),\n        //'form': reflectHTMLElement(HTMLFormElement, true),\n        'name': reflectString()\n    },\n    'HTMLFormElement': {\n        'acceptCharset': reflectString('accept-charset'),\n        'action': reflectString(),\n        'autocomplete': reflectString(),\n        'enctype': reflectString(),\n        'encoding': reflectString('enctype'),\n        'method': reflectString(),\n        'name': reflectString(),\n        'noValidate': reflectBoolean(),\n        'target': reflectString()\n    },\n    'HTMLIFrameElement': {\n        'src': reflectString(),\n        'srcdoc': reflectString(),\n        'name': reflectString(),\n        'sandbox': reflectDOMTokenList('sandbox'),\n        'allowFullscreen': reflectBoolean(),\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    'HTMLImageElement': {\n        'alt': reflectString(),\n        'src': reflectString(),\n        'srcset': reflectString(),\n        'crossOrigin': reflectString(),\n        'useMap': reflectString(),\n        'isMap': reflectBoolean(),\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    // TODO: caveat about feature testing input elements using anything besides 'type'\n    'HTMLInputElement': {\n        'accept': reflectString(),\n        'alt': reflectString(),\n        'autocomplete': reflectString(),\n        'autofocus': reflectBoolean(),\n        'defaultChecked': reflectBoolean('checked'),\n        'dirName': reflectString(),\n        'disabled': reflectBoolean(),\n        //'form': reflectHTMLElement(HTMLFormElement, true),\n        'formAction': reflectString(),\n        'formEnctype': reflectString(),\n        'formMethod': reflectString(),\n        'formNoValidate': reflectBoolean(),\n        'formTarget': reflectString(),\n        'height': reflectInteger(null, 0),\n        'inputMode': reflectString(),\n        // TODO: investigate whether we should bother with 'list'.\n        // Browsers without native Shadow DOM could end up not\n        // pulling suggestions from the correct list anyways.\n        // Possibly needs to be a caveat about this.\n        //'list': reflectSuggestionSourceElement(),\n        'max': reflectString(),\n        'maxLength': reflectInteger(0, 0),\n        'min': reflectString(),\n        'minLength': reflectInteger(0, 0),\n        'multiple': reflectBoolean(),\n        'name': reflectString(),\n        'pattern': reflectString(),\n        'placeholder': reflectString(),\n        'readOnly': reflectBoolean(),\n        'required': reflectBoolean(),\n        'size': reflectInteger(1, 1),\n        'src': reflectString(),\n        'step': reflectString(),\n        'type': reflectString(),\n        'defaultValue': reflectString('value'),\n        'width': reflectInteger(null, 0)\n    },\n    'HTMLKeygenElement': {\n        'autofocus': reflectBoolean(),\n        'challenge': reflectString(),\n        'disabled': reflectBoolean(),\n        //'form': reflectHTMLElement(HTMLFormElement, true),\n        'keytype': reflectString(),\n        'name': reflectString()\n    },\n    'HTMLLabelElement': {\n        //'form': reflectHTMLElement(HTMLFormElement, true),\n        'htmlFor': reflectString('for')\n    },\n    'HTMLLegendElement': {\n        //'form': reflectHTMLElement(HTMLFormElement, true)\n    },\n    'HTMLLIElement': {\n        'value': reflectString()\n    },\n    'HTMLLinkElement': {\n        'href': reflectString(),\n        'crossOrigin': reflectString(),\n        'rel': reflectString(),\n        'rev': reflectString(),\n        'relList': reflectDOMTokenList('rel'),\n        'media': reflectString(),\n        'hreflang': reflectString(),\n        'type': reflectString(),\n        'sizes': reflectDOMTokenList('sizes')\n    },\n    'HTMLMapElement': {\n        'name': reflectString()\n    },\n    'HTMLMediaElement': {\n        'src': reflectString(),\n        'crossOrigin': reflectString(),\n        'preload': reflectString(),\n        'loop': reflectBoolean(),\n        'autoplay': reflectBoolean(),\n        'mediaGroup': reflectString(),\n        'controls': reflectBoolean(),\n        'defaultMuted': reflectBoolean('muted')\n    },\n    'HTMLMenuElement': {\n        'type': reflectString(),\n        'label': reflectString()\n    },\n    'HTMLMenuItemElement': {\n        'type': reflectString(),\n        'label': reflectString(),\n        'icon': reflectString(),\n        'disabled': reflectBoolean(),\n        'checked': reflectBoolean('checked'),\n        'radiogroup': reflectString(),\n        'default': reflectBoolean()\n    },\n    'HTMLMetaElement': {\n        'name': reflectString(),\n        'httpEquiv': reflectString('http-equiv'),\n        'content': reflectString()\n    },\n    'HTMLMeterElement': {\n        'value': reflectFloat(null, 0),\n        'min': reflectFloat(null, 0),\n        'max': reflectFloat(null, 0),\n        'low': reflectFloat(null, 0),\n        'high': reflectFloat(null, 0),\n        'optimum': reflectFloat(null, 0)\n    },\n    'HTMLModElement': {\n        'cite': reflectString(),\n        'dateTime': reflectString()\n    },\n    'HTMLObjectElement': {\n        'data': reflectString(),\n        'type': reflectString(),\n        'typeMustMatch': reflectBoolean(),\n        'name': reflectString(),\n        //'form': reflectHTMLElement(HTMLFormElement, true),\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    'HTMLOListElement': {\n        'reversed': reflectBoolean(),\n        'start': reflectInteger(null, 0),\n        'type': reflectString()\n    },\n    'HTMLOptGroupElement': {\n        'disabled': reflectBoolean(),\n        'label': reflectString()\n    },\n    'HTMLOptionElement': {\n        'disabled': reflectBoolean(),\n        //'form': reflectHTMLElement(HTMLFormElement, true),\n        'label': reflectString(),\n        'defaultSelected': reflectBoolean('selected'),\n        'value': reflectString()\n    },\n    'HTMLOutputElement': {\n        'htmlFor': reflectDOMTokenList('for'),\n        //'form': reflectHTMLElement(HTMLFormElement, true),\n        'name': reflectString(),\n        'defaultValue': reflectString('value')\n    },\n    'HTMLParamElement': {\n        'name': reflectString(),\n        'value': reflectString()\n    },\n    'HTMLProgressElement': {\n        'value': reflectFloat(null, 0),\n        'max': reflectFloat(null, 0)\n    },\n    'HTMLQuoteElement': {\n        'cite': reflectString()\n    },\n    'HTMLScriptElement': {\n        'src': reflectString(),\n        'type': reflectString(),\n        'charset': reflectString(),\n        'async': reflectBoolean(),\n        'defer': reflectBoolean(),\n        'crossOrigin': reflectString(),\n        // TODO: implement on demand\n        // 'text': reflectScriptText(),\n        'nonce': reflectString()\n    },\n    'HTMLSelectElement': {\n        'autocomplete': reflectString(),\n        'autofocus': reflectBoolean(),\n        'disabled': reflectBoolean(),\n        //'form': reflectHTMLElement(HTMLFormElement, true),\n        'multiple': reflectBoolean(),\n        'name': reflectString(),\n        'required': reflectBoolean(),\n        'size': reflectInteger(1, 1)\n    },\n    'HTMLSourceElement': {\n        'src': reflectString(),\n        'type': reflectString(),\n        'media': reflectString()\n    },\n    'HTMLStyleElement': {\n        'media': reflectString(),\n        'nonce': reflectString(),\n        'type': reflectString()\n    },\n    'HTMLTableCellElement': {\n        'colSpan': reflectInteger(0, -1),\n        'rowSpan': reflectInteger(0, -1),\n        'headers': reflectDOMTokenList('headers')\n    },\n    'HTMLTableColElement': {\n        'span': reflectInteger(1, 1)\n    },\n    'HTMLTableHeaderCellElement': {\n        'scope': reflectString(),\n        'abbr': reflectString()\n    },\n    'HTMLTextAreaElement': {\n        'autocomplete': reflectString(),\n        'autofocus': reflectBoolean(),\n        'cols': reflectString(),\n        'dirName': reflectString(),\n        'disabled': reflectBoolean(),\n        //'form': reflectHTMLElement(HTMLFormElement, true),\n        'inputMode': reflectString(),\n        'maxLength': reflectInteger(0, 0),\n        'minLength': reflectInteger(0, 0),\n        'name': reflectString(),\n        'placeholder': reflectString(),\n        'readOnly': reflectBoolean(),\n        'required': reflectBoolean(),\n        'rows': reflectInteger(1, 1),\n        'wrap': reflectString(),\n        'defaultValue': reflectTextContent()\n    },\n    'HTMLTimeElement': {\n        'dateTime': reflectString()\n    },\n    'HTMLTrackElement': {\n        'kind': reflectString(),\n        'src': reflectString(),\n        'srclang': reflectString(),\n        'label': reflectString(),\n        'default': reflectBoolean()\n    },\n    'HTMLVideoElement': {\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0),\n        'poster': reflectString()\n    }\n};\n\n// https://www.w3.org/TR/html/single-page.html#reflection\n\nfunction reflectString(attributeName) {\n    return function (type, name) {\n        attributeName = attributeName || name.toLowerCase();\n        var descriptor = $.descriptor(type, name);\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: descriptor ? descriptor.get : function () {\n                return this.getAttribute(attributeName) || '';\n            },\n            set: function set(value) {\n                $.setAttributeValue(this, attributeName, value);\n            }\n        });\n    };\n}\n\nfunction reflectBoolean(attributeName) {\n    return function (type, name) {\n        attributeName = attributeName || name.toLowerCase();\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                return this.hasAttribute(attributeName);\n            },\n            set: function set(value) {\n                if (value === false) {\n                    $.removeAttributeByName(attributeName, this);\n                } else {\n                    $.setAttributeValue(this, attributeName, value);\n                }\n            }\n        });\n    };\n}\n\n// TODO: minValue, errors\nfunction reflectInteger(minValue, defaultValue) {\n    return function (type, name) {\n        var attributeName = name.toLowerCase();\n        defaultValue = defaultValue || 0;\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                var value = this.getAttribute(attributeName);\n                return parseInt(value) || defaultValue;\n            },\n            set: function set(value) {\n                if (typeof value !== 'number') {\n                    throw $.makeError('TypeError');\n                }\n                $.setAttributeValue(this, attributeName, value.toString());\n            }\n        });\n    };\n}\n\n// TODO: minValue, errors\nfunction reflectFloat(minValue, defaultValue) {\n    return function (type, name) {\n        var attributeName = name.toLowerCase();\n        defaultValue = defaultValue || 0;\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                var value = this.getAttribute(attributeName);\n                return parseFloat(value) || defaultValue;\n            },\n            set: function set(value) {\n                if (typeof value !== 'number') {\n                    throw $.makeError('TypeError');\n                }\n                $.setAttributeValue(this, attributeName, value.toString());\n            }\n        });\n    };\n}\n\nfunction reflectDOMTokenList(localName) {\n    return function (type, name) {\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                return (0, _DOMTokenList.getOrCreateDOMTokenList)(this, localName);\n            },\n            set: function set(value) {\n                (0, _DOMTokenList.getOrCreateDOMTokenList)(this, localName).value = value;\n            }\n        });\n    };\n}\n\nfunction reflectHTMLElement(candidateType, readOnly) {\n    return function (type, name) {\n        var attributeName = name.toLowerCase();\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                if (!this.hasAttribute(attributeName)) {\n                    return null;\n                }\n                var id = this.getAttribute(attributeName);\n                var candidate = this.ownerDocument.getElementById(id);\n                if (candidate == null || !(candidate instanceof candidateType)) {\n                    return null;\n                }\n                return candidate;\n            },\n            set: readOnly ? undefined : function (value) {\n                if (!(value instanceof candidateType)) {\n                    throw $.makeError('TypeError');\n                }\n                if (value.hasAttribute('id')) {\n                    var found = this.ownerDocument.getElementById(value.id);\n                    if (value === found) {\n                        this.setAttribute(attributeName, value.id);\n                        return;\n                    }\n                }\n                this.setAttribute(attributeName, '');\n            }\n        });\n    };\n}\n\nfunction reflectTextContent() {\n    return function (type, name) {\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                return this.textContent;\n            },\n            set: function set(value) {\n                this.textContent = value;\n            }\n        });\n    };\n}\n\nfunction patchAll() {\n    var identifiers = Object.getOwnPropertyNames(interfaces);\n    for (var i = 0; i < identifiers.length; i++) {\n        var identifier = identifiers[i];\n        if (identifier in window) {\n            var type = window[identifier];\n            var attributes = Object.getOwnPropertyNames(interfaces[identifier]);\n            for (var j = 0; j < attributes.length; j++) {\n                var attribute = attributes[j];\n                interfaces[identifier][attribute](type, attribute);\n            }\n        }\n    }\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('./utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _reflect = require('./reflect.js');\n\nvar reflect = _interopRequireWildcard(_reflect);\n\nvar _Attr = require('./interfaces/Attr.js');\n\nvar _Attr2 = _interopRequireDefault(_Attr);\n\nvar _CharacterData = require('./interfaces/CharacterData.js');\n\nvar _CharacterData2 = _interopRequireDefault(_CharacterData);\n\nvar _CustomEvent = require('./interfaces/CustomEvent.js');\n\nvar _CustomEvent2 = _interopRequireDefault(_CustomEvent);\n\nvar _Document = require('./interfaces/Document.js');\n\nvar _Document2 = _interopRequireDefault(_Document);\n\nvar _DOMTokenList = require('./interfaces/DOMTokenList.js');\n\nvar _DOMTokenList2 = _interopRequireDefault(_DOMTokenList);\n\nvar _Element = require('./interfaces/Element.js');\n\nvar _Element2 = _interopRequireDefault(_Element);\n\nvar _Event = require('./interfaces/Event.js');\n\nvar _Event2 = _interopRequireDefault(_Event);\n\nvar _EventTarget = require('./interfaces/EventTarget.js');\n\nvar _EventTarget2 = _interopRequireDefault(_EventTarget);\n\nvar _HTMLSlotElement = require('./interfaces/HTMLSlotElement.js');\n\nvar _HTMLSlotElement2 = _interopRequireDefault(_HTMLSlotElement);\n\nvar _HTMLTableElement = require('./interfaces/HTMLTableElement.js');\n\nvar _HTMLTableElement2 = _interopRequireDefault(_HTMLTableElement);\n\nvar _HTMLTableRowElement = require('./interfaces/HTMLTableRowElement.js');\n\nvar _HTMLTableRowElement2 = _interopRequireDefault(_HTMLTableRowElement);\n\nvar _HTMLTableSectionElement = require('./interfaces/HTMLTableSectionElement.js');\n\nvar _HTMLTableSectionElement2 = _interopRequireDefault(_HTMLTableSectionElement);\n\nvar _MutationObserver = require('./interfaces/MutationObserver.js');\n\nvar _MutationObserver2 = _interopRequireDefault(_MutationObserver);\n\nvar _NamedNodeMap = require('./interfaces/NamedNodeMap.js');\n\nvar _NamedNodeMap2 = _interopRequireDefault(_NamedNodeMap);\n\nvar _Node = require('./interfaces/Node.js');\n\nvar _Node2 = _interopRequireDefault(_Node);\n\nvar _ShadowRoot = require('./interfaces/ShadowRoot.js');\n\nvar _ShadowRoot2 = _interopRequireDefault(_ShadowRoot);\n\nvar _Text = require('./interfaces/Text.js');\n\nvar _Text2 = _interopRequireDefault(_Text);\n\nvar _ChildNode = require('./mixins/ChildNode.js');\n\nvar _ChildNode2 = _interopRequireDefault(_ChildNode);\n\nvar _DocumentOrShadowRoot = require('./mixins/DocumentOrShadowRoot.js');\n\nvar _DocumentOrShadowRoot2 = _interopRequireDefault(_DocumentOrShadowRoot);\n\nvar _NonDocumentTypeChildNode = require('./mixins/NonDocumentTypeChildNode.js');\n\nvar _NonDocumentTypeChildNode2 = _interopRequireDefault(_NonDocumentTypeChildNode);\n\nvar _NonElementParentNode = require('./mixins/NonElementParentNode.js');\n\nvar _NonElementParentNode2 = _interopRequireDefault(_NonElementParentNode);\n\nvar _ParentNode = require('./mixins/ParentNode.js');\n\nvar _ParentNode2 = _interopRequireDefault(_ParentNode);\n\nvar _Slotable = require('./mixins/Slotable.js');\n\nvar _Slotable2 = _interopRequireDefault(_Slotable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar nativeSupport = 'attachShadow' in Element.prototype;\n\nexports.default = {\n    nativeSupport: nativeSupport,\n    install: install\n};\n\n\nfunction install() {\n\n    // Hacky setting in case you want to use ShadyCSS.\n    window['ShadyDOM'] = { 'inUse': true };\n\n    // Reflected attributes\n    reflect.patchAll();\n\n    // Element.matches(selectors) polyfill from MDN\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill\n    // Purposefully chop out the polyfill function that uses querySelectorAll.\n    if (!Element.prototype.matches) {\n        Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector;\n    }\n\n    // Attr interface\n    $.extend(Attr, _Attr2.default);\n\n    // CharacterData interface\n    $.extend(CharacterData, _CharacterData2.default);\n\n    // CustomEvent interface\n    window.CustomEvent = _CustomEvent2.default;\n\n    // Document interface\n    $.extend(Document, _Document2.default);\n\n    // DOMTokenList interface\n    if ('DOMTokenList' in window) {\n        // TODO: what about IE9?\n        $.extend(DOMTokenList, _DOMTokenList2.default);\n    }\n\n    // Element interface\n    $.extend(Element, _Element2.default);\n\n    // Event interface\n    $.extend(Event, _Event2.default);\n    $.extend(FocusEvent, _Event.hasRelatedTarget);\n    $.extend(MouseEvent, _Event.hasRelatedTarget);\n    _Event2.default.prototype = Event.prototype;\n    window.Event = _Event2.default;\n\n    // EventTarget\n    if ('EventTarget' in Window) {\n        $.extend(EventTarget, (0, _EventTarget2.default)(EventTarget));\n    } else {\n        // In IE, EventTarget is not exposed and Window's\n        // EventTarget methods are not the same as Node's.\n        $.extend(Window, (0, _EventTarget2.default)(Window));\n        $.extend(Node, (0, _EventTarget2.default)(Node));\n    }\n\n    // HTMLSlotElement interface\n    $.extend('HTMLSlotElement' in window ? HTMLSlotElement : HTMLUnknownElement, _HTMLSlotElement2.default);\n\n    // HTMLTableElement interface\n    $.extend(HTMLTableElement, _HTMLTableElement2.default);\n\n    // HTMLTableRowElement interface\n    $.extend(HTMLTableRowElement, _HTMLTableRowElement2.default);\n\n    // HTMLTableSectionElement interface\n    $.extend(HTMLTableSectionElement, _HTMLTableSectionElement2.default);\n\n    // MutationObserver interface\n    window.MutationObserver = _MutationObserver2.default;\n\n    // NamedNodeMap interface\n    $.extend(NamedNodeMap, _NamedNodeMap2.default);\n\n    // Node interface\n    $.extend(Node, _Node2.default);\n\n    // TODO: implement Range interface\n\n    // Text interface\n    $.extend(Text, _Text2.default);\n\n    // ChildNode mixin\n    $.extend(DocumentType, (0, _ChildNode2.default)(DocumentType));\n    $.extend(Element, (0, _ChildNode2.default)(Element));\n    $.extend(CharacterData, (0, _ChildNode2.default)(CharacterData));\n\n    // DocumentOrShadowRoot mixin\n    $.extend(Document, _DocumentOrShadowRoot2.default);\n    $.extend(_ShadowRoot2.default, _DocumentOrShadowRoot2.default);\n\n    // NonDocumentTypeChildNode mixin\n    $.extend(Element, (0, _NonDocumentTypeChildNode2.default)(Element));\n    $.extend(CharacterData, (0, _NonDocumentTypeChildNode2.default)(CharacterData));\n\n    // NonElementParentNode mixin\n    $.extend(Document, (0, _NonElementParentNode2.default)(Document));\n    $.extend(DocumentFragment, (0, _NonElementParentNode2.default)(DocumentFragment));\n\n    // ParentNode mixin\n    $.extend(Document, (0, _ParentNode2.default)(Document));\n    $.extend(DocumentFragment, (0, _ParentNode2.default)(DocumentFragment));\n    $.extend(Element, (0, _ParentNode2.default)(Element));\n\n    // Slotable mixin\n    $.extend(Element, (0, _Slotable2.default)(Element));\n    $.extend(Text, (0, _Slotable2.default)(Text));\n\n    // Cleanup for IE, Edge\n    delete Node.prototype.attributes;\n    delete HTMLElement.prototype.classList;\n    delete HTMLElement.prototype.children;\n    delete HTMLElement.prototype.parentElement;\n    delete HTMLElement.prototype.innerHTML;\n    delete HTMLElement.prototype.outerHTML;\n    delete HTMLElement.prototype.insertAdjacentText;\n    delete HTMLElement.prototype.insertAdjacentElement;\n    delete HTMLElement.prototype.insertAdjacentHTML;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.setImmediate = exports.descriptors = exports.descriptor = exports.slice = undefined;\nexports.makeError = makeError;\nexports.reportError = reportError;\nexports.extend = extend;\nexports.getShadowState = getShadowState;\nexports.setShadowState = setShadowState;\nexports.treeOrderRecursiveSelectAll = treeOrderRecursiveSelectAll;\nexports.treeOrderRecursiveSelectFirst = treeOrderRecursiveSelectFirst;\nexports.filterByRoot = filterByRoot;\nexports.isShadowRoot = isShadowRoot;\nexports.parseHTMLFragment = parseHTMLFragment;\nexports.serializeHTMLFragment = serializeHTMLFragment;\nexports.root = root;\nexports.descendant = descendant;\nexports.inclusiveDescendant = inclusiveDescendant;\nexports.ancestor = ancestor;\nexports.inclusiveAncestor = inclusiveAncestor;\nexports.convertNodesIntoANode = convertNodesIntoANode;\nexports.clone = clone;\nexports.adopt = adopt;\nexports.hostIncludingInclusiveAncestor = hostIncludingInclusiveAncestor;\nexports.shadowIncludingRoot = shadowIncludingRoot;\nexports.shadowIncludingDescendant = shadowIncludingDescendant;\nexports.shadowIncludingInclusiveDescendant = shadowIncludingInclusiveDescendant;\nexports.shadowIncludingAncestor = shadowIncludingAncestor;\nexports.shadowIncludingInclusiveAncestor = shadowIncludingInclusiveAncestor;\nexports.closedShadowHidden = closedShadowHidden;\nexports.retarget = retarget;\nexports.changeAttribute = changeAttribute;\nexports.appendAttribute = appendAttribute;\nexports.removeAttribute = removeAttribute;\nexports.setAttribute = setAttribute;\nexports.setAttributeValue = setAttributeValue;\nexports.removeAttributeByName = removeAttributeByName;\nexports.removeAttributeByNamespace = removeAttributeByNamespace;\nexports.insertAdjacent = insertAdjacent;\nexports.setExistingAttributeValue = setExistingAttributeValue;\nexports.replaceData = replaceData;\nexports.findFlattenedSlotables = findFlattenedSlotables;\nexports.preInsert = preInsert;\nexports.insert = insert;\nexports.append = append;\nexports.replace = replace;\nexports.replaceAll = replaceAll;\nexports.preRemove = preRemove;\nexports.remove = remove;\nexports.createMutationObserver = createMutationObserver;\n\nvar _customElements = require('./custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar slice = exports.slice = function slice(array) {\n    return Array.prototype.slice.call(array);\n};\n\nvar descriptor = exports.descriptor = function descriptor(type, name) {\n    return Object.getOwnPropertyDescriptor(type.prototype, name);\n};\n\nvar descriptors = exports.descriptors = {\n    Attr: {\n        value: descriptor(Attr, 'value')\n    },\n    CharacterData: {\n        data: descriptor(CharacterData, 'data')\n    },\n    Document: {\n        activeElement: descriptor(Document, 'activeElement'),\n        getElementsByTagName: descriptor(Document, 'getElementsByTagName'),\n        getElementsByTagNameNS: descriptor(Document, 'getElementsByTagNameNS'),\n        getElementsByClassName: descriptor(Document, 'getElementsByClassName')\n    },\n    Element: {\n        attributes: descriptor(Element, 'attributes') || descriptor(Node, 'attributes'),\n        getAttributeNode: descriptor(Element, 'getAttributeNode'),\n        getAttributeNodeNS: descriptor(Element, 'getAttributeNodeNS'),\n        getElementsByTagName: descriptor(Element, 'getElementsByTagName'),\n        getElementsByTagNameNS: descriptor(Element, 'getElementsByTagNameNS'),\n        getElementsByClassName: descriptor(Element, 'getElementsByClassName'),\n        innerHTML: descriptor(Element, 'innerHTML') || descriptor(HTMLElement, 'innerHTML'),\n        setAttribute: descriptor(Element, 'setAttribute'),\n        setAttributeNS: descriptor(Element, 'setAttributeNS'),\n        setAttributeNode: descriptor(Element, 'setAttributeNode'),\n        setAttributeNodeNS: descriptor(Element, 'setAttributeNodeNS'),\n        removeAttributeNode: descriptor(Element, 'removeAttributeNode')\n    },\n    Event: {\n        currentTarget: descriptor(Event, 'currentTarget'),\n        target: descriptor(Event, 'target')\n    },\n    FocusEvent: {\n        relatedTarget: descriptor(FocusEvent, 'relatedTarget')\n    },\n    MouseEvent: {\n        relatedTarget: descriptor(MouseEvent, 'relatedTarget')\n    },\n    Node: {\n        parentNode: descriptor(Node, 'parentNode'),\n        hasChildNodes: descriptor(Node, 'hasChildNodes'),\n        childNodes: descriptor(Node, 'childNodes'),\n        firstChild: descriptor(Node, 'firstChild'),\n        lastChild: descriptor(Node, 'lastChild'),\n        previousSibling: descriptor(Node, 'previousSibling'),\n        nextSibling: descriptor(Node, 'nextSibling'),\n        nodeValue: descriptor(Node, 'nodeValue'),\n        cloneNode: descriptor(Node, 'cloneNode'),\n        insertBefore: descriptor(Node, 'insertBefore'),\n        removeChild: descriptor(Node, 'removeChild'),\n        appendChild: descriptor(Node, 'appendChild')\n    }\n};\n\nvar setImmediate = exports.setImmediate = 'setImmediate' in window ? window.setImmediate : function (callback) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n    }\n\n    return setTimeout.apply(undefined, [callback, 0].concat(args));\n};\n\n// TODO: analyze usages and provide brief but descriptive messages\nfunction makeError(name, message) {\n    try {\n        var sacrifice = document.createElement('div');\n        descriptors.Node.appendChild.call(sacrifice, sacrifice);\n    } catch (error) {\n        error.message = message;\n        error.name = name;\n        return error;\n    }\n}\n\nfunction reportError(error) {\n    if ('console' in window && 'error' in window.console) {\n        window.console.error(error);\n    }\n}\n\nfunction extend(object) {\n    for (var _len2 = arguments.length, mixins = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        mixins[_key2 - 1] = arguments[_key2];\n    }\n\n    for (var i = 0; i < mixins.length; i++) {\n        var mixin = mixins[i];\n        var prototype = mixin.prototype || mixin;\n        var names = Object.getOwnPropertyNames(prototype);\n        for (var j = 0; j < names.length; j++) {\n            var name = names[j];\n            if (name === 'constructor') {\n                continue;\n            }\n            var _descriptor = Object.getOwnPropertyDescriptor(prototype, name);\n            Object.defineProperty(object.prototype || object, name, _descriptor);\n        }\n    }\n}\n\nfunction getShadowState(object) {\n    return object._shadow;\n}\n\nfunction setShadowState(object, state) {\n    return object._shadow = state;\n}\n\nfunction forEachShadowIncludingDescendant(node, action) {\n    var shadowState = null;\n    var shadowRoot = null;\n    if ((shadowState = getShadowState(node)) && (shadowRoot = shadowState.shadowRoot)) {\n        action(shadowRoot);\n        forEachShadowIncludingInclusiveDescendant(shadowRoot, action);\n    }\n    var childNodes = node.childNodes;\n    for (var i = 0; i < childNodes.length; i++) {\n        var childNode = childNodes[i];\n        action(childNode);\n        forEachShadowIncludingInclusiveDescendant(childNode, action);\n    }\n}\n\nfunction forEachShadowIncludingInclusiveDescendant(node, action) {\n    action(node);\n    var shadowState = null;\n    var shadowRoot = null;\n    if ((shadowState = getShadowState(node)) && (shadowRoot = shadowState.shadowRoot)) {\n        forEachShadowIncludingInclusiveDescendant(shadowRoot, action);\n    }\n    var childNodes = node.childNodes;\n    for (var i = 0; i < childNodes.length; i++) {\n        forEachShadowIncludingInclusiveDescendant(childNodes[i], action);\n    }\n}\n\nfunction treeOrderRecursiveSelectAll(node, results, match) {\n    if (match(node)) {\n        results[results.length] = node;\n    }\n    var firstChild = node.firstChild;\n    if (firstChild) {\n        treeOrderRecursiveSelectAll(firstChild, results, match);\n    }\n    var nextSibling = node.nextSibling;\n    if (nextSibling) {\n        treeOrderRecursiveSelectAll(nextSibling, results, match);\n    }\n}\n\nfunction treeOrderRecursiveSelectFirst(node, match) {\n    if (match(node)) {\n        return node;\n    }\n    var firstChild = node.firstChild;\n    if (firstChild) {\n        var result = treeOrderRecursiveSelectFirst(firstChild, match);\n        if (result) {\n            return result;\n        }\n    }\n    var nextSibling = node.nextSibling;\n    if (nextSibling) {\n        return treeOrderRecursiveSelectFirst(nextSibling, match);\n    }\n    return null;\n}\n\nfunction filterByRoot(node, descendants) {\n    var contextRoot = root(node);\n    var filtered = new Array(descendants.length);\n    var filteredCount = 0;\n    for (var i = 0; i < descendants.length; i++) {\n        var item = descendants[i];\n        if (root(item) === contextRoot) {\n            filtered[filteredCount++] = item;\n        }\n    }\n    filtered.length = filteredCount;\n    return filtered;\n}\n\nfunction isShadowRoot(node) {\n    return node.nodeName === '#shadow-root';\n}\n\n// https://www.w3.org/TR/DOM-Parsing/\n\n// PERF: This function uses a recycled div element\n// and a recycled document fragment stored in the passed \n// element's owner document so it can avoid allocation.\n// Callers must empty the returned fragment.\nfunction parseHTMLFragment(markup, context) {\n    var document = context.ownerDocument;\n    var documentState = getShadowState(document) || setShadowState(document, {});\n    var parsingElement = documentState.parsingElement;\n    if (!parsingElement) {\n        parsingElement = documentState.parsingElement = document.createElement('div');\n    }\n    var parsingFragment = documentState.parsingFragment;\n    if (!documentState.parsingFragment) {\n        parsingFragment = documentState.parsingFragment = document.createDocumentFragment();\n    }\n    descriptors.Element.innerHTML.set.call(parsingElement, markup);\n    var nodeFirstChildGet = descriptors.Node.firstChild.get;\n    var nodeAppendChildValue = descriptors.Node.appendChild.value;\n    var firstChild = void 0;\n    while (firstChild = nodeFirstChildGet.call(parsingElement)) {\n        nodeAppendChildValue.call(parsingFragment, firstChild);\n    }\n    return parsingFragment;\n}\n\nfunction serializeHTMLFragment(node) {\n    // https://www.w3.org/TR/html5/single-page.html#html-fragment-serialization-algorithm\n\n    // 1. Let s be a string, and initialize it to the empty string.\n    var s = '';\n\n    // 2. If the node is a template element, then let the node instead be the \n    // template element's template contents (a DocumentFragment node).\n    if (node.localName === 'template') {\n        var content = node.content;\n        if (content) {\n            node = content;\n        }\n    }\n\n    // 3. For each child node of the node, in tree order, run the following steps:\n    var childNodes = node.childNodes;\n    for (var i = 0; i < childNodes.length; i++) {\n        // 1. Let current node be the child node being processed.\n        var currentNode = childNodes[i];\n        // 2. Append the appropriate string from the following list to s:\n        switch (currentNode.nodeType) {\n            case Node.ELEMENT_NODE:\n                var tagName = void 0;\n                switch (currentNode.namespaceURI) {\n                    case 'http://www.w3.org/1999/xhtml':\n                    case 'http://www.w3.org/1998/Math/MathML':\n                    case 'http://www.w3.org/2000/svg':\n                        tagName = currentNode.localName;\n                        break;\n                    default:\n                        tagName = currentNode.qualifiedName;\n                        break;\n                }\n                s += '<' + tagName;\n                var attributes = descriptors.Element.attributes.get.call(currentNode);\n                for (var j = 0; j < attributes.length; j++) {\n                    var attribute = attributes[j];\n                    s += ' ' + serializeAttributeName(attribute);\n                    s += '=\"' + escapeString(attribute.value) + '\"';\n                }\n                s += '>';\n                switch (currentNode.localName) {\n                    case 'area':case 'base':case 'basefont':case 'bgsound':\n                    case 'br':case 'col':case 'embed':case 'frame':case 'hr':\n                    case 'img':case 'input':case 'keygen':case 'link':case 'meta':\n                    case 'param':case 'source':case 'track':case 'wbr':\n                        continue;\n                    case 'pre':case 'textarea':case 'listing':\n                        var firstChild = currentNode.firstChild;\n                        if (firstChild && firstChild.nodeType === Node.TEXT_NODE && firstChild.data[0] === '\\n') {\n                            s += '\\n';\n                        }\n                        break;\n                }\n                s += serializeHTMLFragment(currentNode);\n                s += '</' + tagName + '>';\n                break;\n            case Node.TEXT_NODE:\n                switch (currentNode.parentNode.localName) {\n                    case 'style':case 'script':case 'xmp':case 'iframe':\n                    case 'noembed':case 'noframes':case 'plaintext':case 'noscript':\n                        s += currentNode.data;\n                        break;\n                    default:\n                        s += escapeString(currentNode.data);\n                        break;\n                }\n                break;\n            case Node.COMMENT_NODE:\n                s += '<!--' + currentNode.data + '-->';\n                break;\n            case Node.PROCESSING_INSTRUCTION_NODE:\n                s += '<?' + currentNode.target + ' ' + currentNode.data + '>';\n                break;\n            case Node.DOCUMENT_TYPE_NODE:\n                s += '<!DOCTYPE ' + currentNode.name + '>';\n                break;\n        }\n    }\n\n    // 4. The result of the algorithm is the string s.\n    return s;\n\n    function escapeString(string, attributeMode) {\n        if (!string || !string.length) {\n            return '';\n        }\n\n        string = string.replace('&', '&amp;');\n        string = string.replace('\\xA0', '&nbsp;');\n\n        if (attributeMode) {\n            string = string.replace('\"', '&quot;');\n        } else {\n            string = string.replace('<', '&lt;');\n            string = string.replace('>', '&gt;');\n        }\n\n        return string;\n    }\n\n    function serializeAttributeName(attribute) {\n        var namespaceURI = attribute.namespaceURI;\n        var localName = attribute.localName;\n        if (!namespaceURI) {\n            return localName;\n        }\n        switch (namespaceURI) {\n            case 'http://www.w3.org/XML/1998/namespace':\n                return 'xml:' + localName;\n            case 'http://www.w3.org/2000/xmlns/':\n                if (localName === 'xmlns') {\n                    return localName;\n                }\n                return 'xmlns:' + localName;\n            case 'http://www.w3.org/1999/xlink':\n                return 'xlink:' + localName;\n            default:\n                return attribute.name;\n        }\n    }\n}\n\n// https://dom.spec.whatwg.org/#trees\n\nfunction root(node) {\n    var root = node;\n    var parent = root.parentNode;\n\n    while (parent != null) {\n        root = parent;\n        parent = root.parentNode;\n    }\n\n    return root;\n}\n\nfunction descendant(nodeA, nodeB) {\n    var parent = nodeA.parentNode;\n\n    while (parent != null) {\n        if (nodeB === parent) {\n            return true;\n        }\n        parent = parent.parentNode;\n    }\n\n    return false;\n}\n\nfunction inclusiveDescendant(nodeA, nodeB) {\n    return nodeA === nodeB || descendant(nodeA, nodeB);\n}\n\nfunction ancestor(nodeA, nodeB) {\n    var parent = nodeB.parentNode;\n\n    while (parent != null) {\n        if (nodeA === parent) {\n            return true;\n        }\n        parent = parent.parentNode;\n    }\n\n    return false;\n}\n\nfunction inclusiveAncestor(nodeA, nodeB) {\n    return nodeA === nodeB || ancestor(nodeA, nodeB);\n}\n\n// https://dom.spec.whatwg.org/#interface-parentnode\n\nfunction convertNodesIntoANode(nodes, document) {\n    var node = null;\n\n    for (var i = 0; i < nodes.length; i++) {\n        var item = nodes[i];\n\n        if (typeof item === \"string\") {\n            nodes[i] = document.createTextNode(item);\n        }\n    }\n\n    if (nodes.length === 1) {\n        node = nodes[0];\n    } else {\n        node = document.createDocumentFragment();\n\n        for (var _i = 0; _i < nodes.length; _i++) {\n            node.appendChild(nodes[_i]);\n        }\n    }\n\n    return node;\n}\n\n// https://dom.spec.whatwg.org/#interface-node\n\nfunction clone(node, document, cloneChildren) {\n    // https://dom.spec.whatwg.org/#concept-node-clone\n    // To clone a node, with an optional document and clone children flag, run these steps:\n\n    // 1. If document is not given, let document be node’s node document.\n    document = document || node.ownerDocument;\n\n    // Use a shortcut here\n    // 2. If node is an element, then:\n    // 3. Otherwise, let copy be a node that implements the same interfaces \n    // as node, and fulfills these additional requirements, switching on node:\n    // 4. Set copy’s node document and document to copy, if copy is a document, \n    // and set copy’s node document to document otherwise.\n    // 5. Run any cloning steps defined for node in other applicable \n    // specifications and pass copy, node, document and the clone children \n    // flag if set, as parameters.\n    var copy = descriptors.Node.cloneNode.value.call(node, false);\n    if (_customElements2.default.isInstalled()) {\n        _customElements2.default.tryToUpgradeElement(copy);\n    }\n\n    // 6. If the clone children flag is set, clone all the children of node \n    // and append them to copy, with document as specified and the clone \n    // children flag being set.\n    if (cloneChildren === true) {\n        var childNodes = node.childNodes;\n        for (var i = 0; i < childNodes.length; i++) {\n            append(childNodes[i].cloneNode(true), copy);\n        }\n    }\n\n    return copy;\n}\n\nfunction adopt(node, document) {\n    // https://dom.spec.whatwg.org/#concept-node-adopt\n\n    // 1. Let oldDocument be node’s node document.\n    var oldDocument = node.ownerDocument;\n\n    // 2. If node’s parent is not null, remove node from its parent.\n    var parent = node.parentNode;\n    if (parent != null) {\n        remove(node, parent);\n    }\n\n    // 3. If document is not the same as oldDocument, run these substeps:\n    if (document != oldDocument && _customElements2.default.isInstalled()) {\n        forEachShadowIncludingInclusiveDescendant(node, function (inclusiveDescendant) {\n            if (_customElements2.default.isCustom(inclusiveDescendant)) {\n                _customElements2.default.enqueueCallbackReaction(inclusiveDescendant, 'adoptedCallback', [oldDocument, document]);\n            }\n        });\n    }\n}\n\n// https://dom.spec.whatwg.org/#interface-documentfragment\n\nfunction hostIncludingInclusiveAncestor(nodeA, nodeB) {\n    if (inclusiveAncestor(nodeA, nodeB)) {\n        return true;\n    }\n\n    var host = root(nodeB).host;\n\n    if (host && hostIncludingInclusiveAncestor(nodeA, host)) {\n        return true;\n    }\n\n    return false;\n}\n\n// https://dom.spec.whatwg.org/#interface-shadowroot\n\nfunction shadowIncludingRoot(node) {\n    var rootNode = root(node);\n    if (isShadowRoot(rootNode)) {\n        rootNode = shadowIncludingRoot(rootNode.host);\n    }\n    return rootNode;\n}\n\nfunction shadowIncludingDescendant(nodeA, nodeB) {\n    do {\n        if (isShadowRoot(nodeA)) {\n            nodeA = nodeA.host;\n        } else {\n            nodeA = nodeA.parentNode;\n        }\n        if (nodeA === nodeB) {\n            return true;\n        }\n    } while (nodeA != null);\n\n    return false;\n}\n\nfunction shadowIncludingInclusiveDescendant(nodeA, nodeB) {\n    return nodeA === nodeB || shadowIncludingDescendant(nodeA, nodeB);\n}\n\nfunction shadowIncludingAncestor(nodeA, nodeB) {\n    return shadowIncludingDescendant(nodeB, nodeA);\n}\n\nfunction shadowIncludingInclusiveAncestor(nodeA, nodeB) {\n    return nodeA === nodeB || shadowIncludingAncestor(nodeA, nodeB);\n}\n\nfunction closedShadowHidden(nodeA, nodeB) {\n    // https://dom.spec.whatwg.org/#concept-closed-shadow-hidden\n    var rootNode = root(nodeA);\n\n    if (!isShadowRoot(rootNode)) {\n        return false;\n    }\n\n    if (shadowIncludingInclusiveAncestor(rootNode, nodeB)) {\n        return false;\n    }\n\n    if (rootNode.mode === 'closed' || closedShadowHidden(rootNode.host, nodeB)) {\n        return true;\n    }\n\n    return false;\n}\n\nfunction retarget(nodeA, nodeB) {\n    // https://dom.spec.whatwg.org/#retarget\n    // To retarget an object A against an object B, repeat these steps \n    // until they return an object:\n\n    var rootNode = void 0;\n    while (rootNode = root(nodeA)) {\n        // 1. If A’s root is not a shadow root, or A’s root is a shadow-including \n        // inclusive ancestor of B, then return A.\n        if (!isShadowRoot(rootNode) || shadowIncludingInclusiveAncestor(rootNode, nodeB)) {\n            return nodeA;\n        }\n        // 2. Set A to A’s root’s host.\n        nodeA = rootNode.host;\n    }\n}\n\n// https://dom.spec.whatwg.org/#interface-element\n\nfunction updateSlotName(element, localName, oldValue, value, nameSpace) {\n    // https://dom.spec.whatwg.org/#slot-name\n    if (element.localName === 'slot') {\n        if (localName === 'name' && nameSpace == null) {\n            if (value === oldValue) {\n                return;\n            }\n            if (value == null && oldValue === '') {\n                return;\n            }\n            if (value === '' && oldValue == null) {\n                return;\n            }\n            if (value == null || value === '') {\n                descriptors.Element.setAttribute.value.call(element, 'name', '');\n            } else {\n                descriptors.Element.setAttribute.value.call(element, 'name', value);\n            }\n            assignSlotablesForATree(element);\n        }\n    }\n}\n\nfunction updateSlotableName(element, localName, oldValue, value, nameSpace) {\n    // https://dom.spec.whatwg.org/#slotable-name\n    if (localName === 'slot' && nameSpace == null) {\n        if (value === oldValue) {\n            return;\n        }\n        if (value == null && oldValue === '') {\n            return;\n        }\n        if (value === '' && oldValue == null) {\n            return;\n        }\n        if (value == null || value === '') {\n            descriptors.Element.setAttribute.value.call(element, 'slot', '');\n        } else {\n            descriptors.Element.setAttribute.value.call(element, 'slot', value);\n        }\n        var elementState = getShadowState(element);\n        if (elementState && elementState.assignedSlot) {\n            assignSlotables(elementState.assignedSlot);\n        }\n        assignASlot(element);\n    }\n}\n\nfunction attributeChangeSteps(element, localName, oldValue, value, nameSpace) {\n    updateSlotName(element, localName, oldValue, value, nameSpace);\n    updateSlotableName(element, localName, oldValue, value, nameSpace);\n}\n\nfunction changeAttribute(attribute, element, value) {\n    // https://dom.spec.whatwg.org/#concept-element-attributes-change\n\n    var name = attribute.localName;\n    var nameSpace = attribute.namespaceURI;\n    var oldValue = descriptors.Attr.value.get.call(attribute);\n    var newValue = value;\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, name, nameSpace, oldValue);\n\n    // 2. If element is custom...\n    if (_customElements2.default.isInstalled() && _customElements2.default.isCustom(element)) {\n        var _args = [name, oldValue, newValue, nameSpace];\n        _customElements2.default.enqueueCallbackReaction(element, 'attributeChangedCallback', _args);\n    }\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, newValue, nameSpace);\n\n    // 4. Set attribute's value...\n    descriptors.Attr.value.set.call(attribute, newValue);\n}\n\nfunction appendAttribute(attribute, element) {\n    // https://dom.spec.whatwg.org/#concept-element-attributes-append\n\n    var name = attribute.localName;\n    var nameSpace = attribute.namespaceURI;\n    var oldValue = null;\n    var newValue = descriptors.Attr.value.get.call(attribute);\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, name, nameSpace, oldValue);\n\n    // 2. If element is custom...\n    if (_customElements2.default.isInstalled() && _customElements2.default.isCustom(element)) {\n        var _args2 = [name, oldValue, newValue, nameSpace];\n        _customElements2.default.enqueueCallbackReaction(element, 'attributeChangedCallback', _args2);\n    }\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, newValue, nameSpace);\n\n    // 4. Append the attribute to the element’s attribute list.\n    // This should be handled previously by the caller.\n    //descriptors.Element.setAttributeNodeNS.value.call(element, attribute);\n\n    // Skip (native)\n    // 5. Set attribute’s element to element.\n}\n\nfunction removeAttribute(attribute, element) {\n    // https://dom.spec.whatwg.org/#concept-element-attributes-remove\n\n    var name = attribute.localName;\n    var nameSpace = attribute.namespaceURI;\n    var oldValue = descriptors.Attr.value.get.call(attribute);\n    var newValue = null;\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, name, nameSpace, oldValue);\n\n    // 2. If element is custom...\n    if (_customElements2.default.isInstalled() && _customElements2.default.isCustom(element)) {\n        var _args3 = [name, oldValue, newValue, nameSpace];\n        _customElements2.default.enqueueCallbackReaction(element, 'attributeChangedCallback', _args3);\n    }\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, null, nameSpace);\n\n    // 4. Remove attribute from the element’s attribute list.\n    descriptors.Element.removeAttributeNode.value.call(element, attribute);\n\n    // Skip (native)\n    // 5. Set attribute’s element to null.\n}\n\nfunction replaceAttribute(oldAttr, newAttr, element) {\n    // Used by 'set an attribute'\n    // https://dom.spec.whatwg.org/#concept-element-attributes-replace\n\n    var name = oldAttr.localName;\n    var nameSpace = oldAttr.namespaceURI;\n    var oldValue = descriptors.Attr.value.get.call(oldAttr);\n    var newValue = descriptors.Attr.value.get.call(newAttr);\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, name, nameSpace, oldValue);\n\n    // 2. If element is custom...\n    if (_customElements2.default.isInstalled() && _customElements2.default.isCustom(element)) {\n        var _args4 = [name, oldValue, newValue, nameSpace];\n        _customElements2.default.enqueueCallbackReaction(element, 'attributeChangedCallback', _args4);\n    }\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, newValue, nameSpace);\n\n    // 4. Replace oldAttr by newAttr in the element’s attribute list.\n    descriptors.Element.setAttributeNodeNS.value.call(element, newAttr);\n\n    // Skip (native)\n    // 5. Set oldAttr’s element to null.\n    // 6. Set newAttr’s element to element.\n}\n\nfunction setAttribute(attr, element, nativeSetAttributeNodeDescriptor) {\n    if (attr.ownerElement != null && attr.ownerElement !== element) {\n        throw makeError('InUseAttributeError');\n    }\n    var oldAttr = descriptors.Element.getAttributeNodeNS.value.call(element, attr.namespaceURI, attr.localName);\n    if (oldAttr === attr) {\n        return attr;\n    }\n    nativeSetAttributeNodeDescriptor.value.call(element, attr);\n    if (oldAttr) {\n        replaceAttribute(oldAttr, attr, element);\n    } else {\n        appendAttribute(attr, element);\n    }\n    return oldAttr;\n}\n\nfunction setAttributeValue(element, localName, value, prefix, ns) {\n    prefix = prefix || null;\n    ns = ns || null;\n    var attribute = descriptors.Element.getAttributeNode.value.call(element, localName);\n    if (!attribute) {\n        descriptors.Element.setAttribute.value.call(element, localName, value);\n        attribute = descriptors.Element.getAttributeNode.value.call(element, localName);\n        appendAttribute(attribute, element);\n        return;\n    }\n    changeAttribute(attribute, element, value);\n}\n\nfunction removeAttributeByName(qualifiedName, element) {\n    var attributes = descriptors.Element.attributes.get.call(element);\n    var attr = attributes.getNamedItem(qualifiedName);\n    if (attr) {\n        removeAttribute(attr, element);\n    }\n    return attr;\n}\n\nfunction removeAttributeByNamespace(nameSpace, localName, element) {\n    var attributes = descriptors.Element.attributes.get.call(element);\n    var attr = attributes.getNamedItemNS(nameSpace, localName);\n    if (attr) {\n        removeAttribute(attr, element);\n    }\n    return attr;\n}\n\nfunction insertAdjacent(element, where, node) {\n    if (!(node instanceof Node)) {\n        throw makeError('TypeError');\n    }\n    var parent = void 0;\n    // https://dom.spec.whatwg.org/#insert-adjacent\n    switch ((where || '').toLowerCase()) {\n        case \"beforebegin\":\n            if (parent = element.parentNode) {\n                return preInsert(node, parent, element);\n            }\n            return null;\n        case \"afterbegin\":\n            return preInsert(node, element, element.firstChild);\n        case \"beforeend\":\n            return preInsert(node, element, null);\n        case \"afterend\":\n            if (parent = element.parentNode) {\n                return preInsert(node, parent, element.nextSibling);\n            }\n            return null;\n        default:\n            throw makeError('SyntaxError');\n    }\n}\n\n// https://dom.spec.whatwg.org/#attr\n\nfunction setExistingAttributeValue(attribute, value) {\n    if (attribute.ownerElement == null) {\n        descriptors.Attr.value.set.call(attribute, value);\n    } else {\n        changeAttribute(attribute, attribute.ownerElement, value);\n    }\n}\n\n// https://dom.spec.whatwg.org/#interface-characterdata\n\nfunction replaceData(node, offset, count, data) {\n    // https://dom.spec.whatwg.org/#concept-cd-replace\n    if (data == null) {\n        data = '';\n    }\n    var dataDescriptor = descriptors.CharacterData.data;\n    var oldValue = dataDescriptor.get.call(node);\n    var length = oldValue.length;\n    if (offset > length) {\n        throw makeError('IndexSizeError');\n    }\n    if (offset + count > length) {\n        count = length - offset;\n    }\n    queueMutationRecord('characterData', node, null, null, oldValue);\n    dataDescriptor.set.call(node, oldValue.slice(0, offset) + data + oldValue.slice(offset + count));\n    // TODO: (Range)\n}\n\n// https://dom.spec.whatwg.org/#finding-slots-and-slotables\n\nfunction findASlot(slotable, open) {\n    // https://dom.spec.whatwg.org/#find-a-slot\n    // To find a slot for a given slotable slotable and an optional \n    // open flag (unset unless stated otherwise), run these steps:\n\n    // 1. If slotable’s parent is null, then return null.\n    var parent = slotable.parentNode;\n    if (!parent) {\n        return null;\n    }\n\n    // 2. Let shadow be slotable’s parent’s shadow root.\n    var parentState = getShadowState(parent);\n\n    // 3. If shadow is null, then return null.\n    if (!parentState || !parentState.shadowRoot) {\n        return null;\n    }\n\n    // 4. If the open flag is set and shadow’s mode is not \"open\", then return null.\n    if (open === true && parentState.shadowRoot.mode !== 'open') {\n        return null;\n    }\n\n    // 5. Return the first slot in shadow’s tree whose name is slotable’s name, if any, and null otherwise.\n    if (!parentState.shadowRoot.firstChild) {\n        return null;\n    }\n\n    var name = slotable instanceof Element ? slotable.slot : '';\n\n    return treeOrderRecursiveSelectFirst(parentState.shadowRoot.firstChild, function (node) {\n        return node.localName === 'slot' && node.name === name;\n    });\n}\n\nfunction findSlotables(slot) {\n    // https://dom.spec.whatwg.org/#find-slotables\n    // To find slotables for a given slot slot, run these steps:\n\n    // 1. Let result be an empty list.\n    // PERF: allocations later on in algorithm\n    var result = void 0;\n\n    // 2. If slot’s root is not a shadow root, then return result.\n    var slotRoot = root(slot);\n    if (!isShadowRoot(slotRoot)) {\n        // PERF: 'an empty list' from step 1\n        return [];\n    }\n\n    // 3. Let host be slot’s root’s host.\n    var host = slotRoot.host;\n\n    // 4. For each slotable child of host, slotable, in tree order, run these substeps:\n    var slotableChildren = host.childNodes;\n    // PERF: allocation of result\n    result = new Array(slotableChildren.length);\n    var pushed = 0;\n    for (var i = 0; i < slotableChildren.length; i++) {\n        var slotable = slotableChildren[i];\n        if (slotable.nodeType === Node.ELEMENT_NODE || slotable.nodeType === Node.TEXT_NODE) {\n            // 1. Let foundSlot be the result of finding a slot given slotable.\n            var foundSlot = findASlot(slotable);\n            // 2. If foundSlot is slot, then append slotable to result.\n            if (foundSlot === slot) {\n                result[pushed++] = slotable;\n            }\n        }\n    }\n    // PERF: set the actual length\n    result.length = pushed;\n\n    // 5. Return result.\n    return result;\n}\n\nfunction findFlattenedSlotables(slot) {\n    // https://dom.spec.whatwg.org/#find-flattened-slotables\n    // To find flattened slotables for a given slot slot, run these steps:\n\n    // 1. Let result be an empty list.\n    var result = [];\n\n    // 2. Let slotables be the result of finding slotables given slot.\n    var slotables = findSlotables(slot);\n\n    // 3. If slotables is the empty list, then append each slotable child of slot, in tree order, to slotables.\n    if (slotables.length === 0) {\n        var slotableChildren = slot.childNodes;\n        var slotableChildrenLength = slotableChildren.length;\n        slotables.length = slotableChildrenLength;\n        var slotablesPushed = 0;\n        for (var i = 0; i < slotableChildrenLength; i++) {\n            var slotableChild = slotableChildren[i];\n            if (slotableChild.nodeType === Node.ELEMENT_NODE || slotableChild.nodeType === Node.TEXT_NODE) {\n                slotables[slotablesPushed++] = slotableChild;\n            }\n        }\n        slotables.length = slotablesPushed;\n    }\n\n    // 4. For each node in slotables, run these substeps:\n    for (var _i2 = 0; _i2 < slotables.length; _i2++) {\n        var node = slotables[_i2];\n        // 1. If node is a slot, run these subsubsteps:\n        if (node.localName === 'slot') {\n            var temporaryResult = findFlattenedSlotables(node);\n            var resultLength = resultLength;\n            result.length += temporaryResult.length;\n            for (var j = 0; j < temporaryResult.length; j++) {\n                result[resultLength + j] = temporaryResult[k];\n            }\n        } else {\n            result[result.length] = node;\n        }\n    }\n\n    // 5. Return result.\n    return result;\n}\n\n// https://dom.spec.whatwg.org/#assigning-slotables-and-slots\n\nfunction assignSlotables(slot, suppressSignaling) {\n    // https://dom.spec.whatwg.org/#assign-slotables\n    // To assign slotables, for a slot slot with an optional suppress \n    // signaling flag (unset unless stated otherwise), run these steps:\n\n    // 1. Let slotables be the result of finding slotables for slot.\n    var slotables = findSlotables(slot);\n\n    // 2. If suppress signaling flag is unset, and slotables and slot’s assigned \n    // nodes are not identical, then run signal a slot change for slot.\n    var identical = true;\n    var slotState = getShadowState(slot) || setShadowState(slot, {});\n    var assignedNodes = slotState.assignedNodes || [];\n    for (var i = 0; i < slotables.length; i++) {\n        if (slotables[i] !== assignedNodes[i]) {\n            identical = false;\n            break;\n        }\n    }\n    if (!suppressSignaling && !identical) {\n        signalASlotChange(slot);\n    }\n\n    // 3. Set slot’s assigned nodes to slotables.\n    slotState.assignedNodes = slotables;\n\n    // 4. For each slotable in slotables, set slotable’s assigned slot to slot.\n    for (var _i3 = 0; _i3 < slotables.length; _i3++) {\n        var slotable = slotables[_i3];\n        // If it's a slotable it should already have an associated state object.\n        getShadowState(slotable).assignedSlot = slot;\n    }\n\n    // 4a. If we haven't tracked them yet, track the slot's logical children\n    if (!slotState.childNodes) {\n        var slotChildNodes = descriptors.Node.childNodes.get.call(slot);\n        var slotChildNodesLength = slotChildNodes.length;\n        slotState.childNodes = new Array(slotChildNodesLength);\n        for (var _i4 = 0; _i4 < slotChildNodesLength; _i4++) {\n            slotState.childNodes[_i4] = slotChildNodes[_i4];\n        }\n    }\n\n    // function call avoiding closure for performance.\n    if (!identical) {\n        setImmediate(renderSlotablesAsync, slot);\n    }\n}\n\nfunction renderSlotablesAsync(slot) {\n    var slotState = getShadowState(slot);\n    var slotables = slotState.assignedNodes;\n\n    // 4b. Clean out the slot\n    var firstChild = void 0;\n    while (firstChild = descriptors.Node.firstChild.get.call(slot)) {\n        descriptors.Node.removeChild.value.call(slot, firstChild);\n    }\n\n    // 4c. Append the slotables, if any\n    for (var i = 0; i < slotables.length; i++) {\n        var slotable = slotables[i];\n        descriptors.Node.appendChild.value.call(slot, slotable);\n    }\n\n    // 4d. Append the fallback content, if no slots\n    if (!slotables.length) {\n        var childNodes = slotState.childNodes;\n        for (var _i5 = 0; _i5 < childNodes.length; _i5++) {\n            descriptors.Node.appendChild.value.call(slot, childNodes[_i5]);\n        }\n    }\n}\n\nfunction assignSlotablesForATree(tree, noSignalSlots) {\n    // https://dom.spec.whatwg.org/#assign-slotables-for-a-tree\n    // To assign slotables for a tree, given a tree tree and an optional set of slots noSignalSlots\n    // (empty unless stated otherwise), run these steps for each slot slot in tree, in tree order:\n    var slots = [];\n\n    if (tree.localName === 'slot') {\n        slots[0] = tree;\n    }\n\n    treeOrderRecursiveSelectAll(tree, slots, function (descendant) {\n        return descendant.localName === 'slot';\n    });\n\n    for (var i = 0; i < slots.length; i++) {\n        var slot = slots[i];\n\n        // 1. Let suppress signaling flag be set, if slot is in noSignalSlots, and unset otherwise.\n        var suppressSignaling = noSignalSlots && noSignalSlots.indexOf(slot) !== -1;\n\n        // 2. Run assign slotables for slot with suppress signaling flag.\n        assignSlotables(slot, suppressSignaling);\n    }\n}\n\nfunction assignASlot(slotable) {\n    var slot = findASlot(slotable);\n\n    if (slot != null) {\n        assignSlotables(slot);\n    }\n}\n\n// https://dom.spec.whatwg.org/#signaling-slot-change\n\nfunction signalASlotChange(slot) {\n    // https://dom.spec.whatwg.org/#signal-a-slot-change\n    // To signal a slot change, for a slot slot, run these steps:\n\n    // 1. If slot is not in unit of related similar-origin browsing contexts' \n    // signal slot list, append slot to unit of related similar-origin browsing \n    // contexts' signal slot list.\n    if (signalSlotList.indexOf(slot) === -1) {\n        signalSlotList.push(slot);\n    }\n\n    // 2. Queue a mutation observer compound microtask.\n    queueMutationObserverCompoundMicrotask();\n}\n\n// https://dom.spec.whatwg.org/#mutation-algorithms\n\nfunction ensurePreInsertionValidity(node, parent, child) {\n    // https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n    // To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\n    // Skip (native)\n    // 1. If parent is not a Document, DocumentFragment, or Element node, throw a HierarchyRequestError.\n\n    // 2. If node is a host-including inclusive ancestor of parent, throw a HierarchyRequestError.\n    if (hostIncludingInclusiveAncestor(node, parent)) {\n        throw makeError('HierarchyRequestError');\n    }\n\n    // 3. If child is not null and its parent is not parent, then throw a NotFoundError.\n    if (child != null && child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // Skip (native)\n    // 4. If node is not a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction, \n    // or Comment node, throw a HierarchyRequestError.\n    // 5. If either node is a Text node and parent is a document, or node is a doctype \n    // and parent is not a document, throw a HierarchyRequestError.\n    // 6. If parent is a document, and any of the statements below, switched on node, \n    // are true, throw a HierarchyRequestError.\n}\n\nfunction preInsert(node, parent, child) {\n    // https://dom.spec.whatwg.org/#concept-node-pre-insert\n    // To pre-insert a node into a parent before a child, run these steps:\n\n    // 1. Ensure pre-insertion validity of node into parent before child.\n    ensurePreInsertionValidity(node, parent, child);\n\n    // 2. Let reference child be child.\n    var referenceChild = child;\n\n    // 3. If reference child is node, set it to node’s next sibling.\n    referenceChild === node && (referenceChild = node.nextSibling);\n\n    // 4. Adopt node into parent’s node document.\n    // https://dom.spec.whatwg.org/#concept-node-adopt\n    adopt(node, parent.ownerDocument);\n\n    // 5. Insert node into parent before reference child.\n    // https://dom.spec.whatwg.org/#concept-node-insert\n    insert(node, parent, referenceChild);\n\n    // 6. Return node.\n    return node;\n}\n\nfunction insert(node, parent, child, suppressObservers) {\n    // https://dom.spec.whatwg.org/#concept-node-insert\n    // To insert a node into a parent before a child, with an optional suppress observers flag, run these steps:\n\n    // 1. Let count be the number of children of node if it is a DocumentFragment node, and one otherwise.\n    var count = 1;\n    var nodeChildNodes = void 0;\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        nodeChildNodes = node.childNodes;\n        count = nodeChildNodes.length;\n    }\n\n    // Skip (Range)\n    // 2. If child is non-null, run these substeps:\n\n    // 3. Let nodes be node’s children if node is a DocumentFragment node, \n    // and a list containing solely node otherwise.\n    var nodes = new Array(count);\n\n    // 4. If node is a DocumentFragment node, remove its children with the suppress observers flag set.\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        for (var i = 0; i < count; i++) {\n            nodes[i] = nodeChildNodes[i];\n        }\n        for (var _i6 = 0; _i6 < count; _i6++) {\n            remove(nodes[_i6], node, true);\n        }\n        // 5. If node is a DocumentFragment node, queue a mutation record of \"childList\" for node with removedNodes nodes.\n        queueMutationRecord('childList', node, null, null, null, null, nodes);\n    } else {\n        nodes[0] = node;\n    }\n\n    // 6. For each node in nodes, in tree order, run these substeps:\n    var parentState = getShadowState(parent);\n    var parentIsShadow = isShadowRoot(parent);\n    var parentStateChildNodes = parentState ? parentState.childNodes : null;\n    var parentIsConnected = parent.isConnected;\n    for (var _i7 = 0; _i7 < count; _i7++) {\n        var _node = nodes[_i7];\n        // 1. Insert node into parent before child or at the end of parent if child is null.\n        if (parentStateChildNodes) {\n            if (child) {\n                var childIndex = parentStateChildNodes.indexOf(child);\n                // TODO: PERF: Probably not worth the readability sacrifice to manually \n                // roll a splice algorithm here, but will come back to this later\n                parentStateChildNodes.splice(childIndex, 0, _node);\n            } else {\n                parentStateChildNodes.push(_node);\n            }\n            var nodeState = getShadowState(_node) || setShadowState(_node, {});\n            nodeState.parentNode = parent;\n            // If it's a shadow root, perform physical insert on the host.\n            if (parentIsShadow) {\n                descriptors.Node.insertBefore.value.call(parentState.host, _node, child);\n            }\n        } else {\n            descriptors.Node.insertBefore.value.call(parent, _node, child);\n        }\n\n        // 2. If parent is a shadow host and node is a slotable, then assign a slot for node.\n        if (parentState && parentState.shadowRoot && 'assignedSlot' in _node) {\n            assignASlot(_node);\n        }\n\n        // 3. If parent is a slot whose assigned nodes is the empty list, \n        // then run signal a slot change for parent.\n        if (parent.localName === 'slot' && (!parentState || !parentState.assignedNodes || parentState.assignedNodes.length === 0)) {\n            // 3a. Physically append the child into the slot.\n            descriptors.Node.appendChild.value.call(parent, _node);\n            // 3b. Do what the spec said\n            signalASlotChange(parent);\n        }\n\n        // 4. Run assign slotables for a tree with node’s tree and a set containing \n        // each inclusive descendant of node that is a slot.\n        var inclusiveSlotDescendants = [];\n        if (_node.localName === 'slot') {\n            inclusiveSlotDescendants[0] = _node;\n        }\n        treeOrderRecursiveSelectAll(_node, inclusiveSlotDescendants, function (descendant) {\n            return descendant.localName === 'slot';\n        });\n        assignSlotablesForATree(_node, inclusiveSlotDescendants);\n\n        if (!_customElements2.default.isInstalled() || !parentIsConnected) {\n            continue;\n        }\n\n        // 5. For each shadow-including inclusive descendant inclusiveDescendant of node, \n        // in shadow-including tree order, run these subsubsteps:\n        forEachShadowIncludingInclusiveDescendant(_node, function (inclusiveDescendant) {\n            // Skip (other)\n            // 1. Run the insertion steps with inclusiveDescendant\n            // PERF: moved this check out of the loop.\n            // 2. If inclusiveDescendant is connected, then...\n            // 1. If inclusiveDescendant is custom, then enqueue a custom element \n            // callback reaction with inclusiveDescendant, callback name \n            // \"connectedCallback\", and an empty argument list.\n            if (_customElements2.default.isCustom(inclusiveDescendant)) {\n                _customElements2.default.enqueueCallbackReaction(inclusiveDescendant, 'connectedCallback', []);\n            }\n            // 2. Otherwise, try to upgrade inclusiveDescendant.\n            else {\n                    _customElements2.default.tryToUpgradeElement(inclusiveDescendant);\n                }\n        });\n    }\n\n    // 7. If suppress observers flag is unset, queue a mutation record of \"childList\" for parent \n    // with addedNodes nodes, nextSibling child, and previousSibling child’s previous sibling or \n    // parent’s last child if child is null.\n    if (!suppressObservers) {\n        var previousSibling = child ? child.previousSibling : parent.lastChild;\n        queueMutationRecord('childList', parent, null, null, null, nodes, null, previousSibling, child);\n    }\n}\n\nfunction append(node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-append\n    // To append a node to a parent, pre-insert node into parent before null.\n    return preInsert(node, parent, null);\n}\n\nfunction replace(child, node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-replace\n    // To replace a child with node within a parent, run these steps:\n\n    // Skip (native)\n    // 1. If parent is not a Document, DocumentFragment, or Element node, throw a HierarchyRequestError.\n\n    // 2. If node is a host-including inclusive ancestor of parent, throw a HierarchyRequestError.\n    if (hostIncludingInclusiveAncestor(node, parent)) {\n        throw makeError('HierarchyRequestError');\n    }\n\n    // 3. If child’s parent is not parent, then throw a NotFoundError.\n    if (child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // Skip (native)\n    // 4. If node is not a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction, or Comment node, throw a HierarchyRequestError.\n    // 5. If either node is a Text node and parent is a document, or node is a doctype and parent is not a document, throw a HierarchyRequestError.\n    // 6. If parent is a document, and any of the statements below, switched on node, are true, throw a HierarchyRequestError.\n\n    // 7. Let reference child be child’s next sibling.\n    var referenceChild = child.nextSibling;\n\n    // 8. If reference child is node, set it to node’s next sibling.\n    if (referenceChild === node) {\n        referenceChild = node.nextSibling;\n    }\n\n    // 9. Let previousSibling be child’s previous sibling.\n    var previousSibling = child.previousSibling;\n\n    // 10. Adopt node into parent’s node document.\n    adopt(node, parent.ownerDocument);\n\n    // 11. Let removedNodes be the empty list.\n    var removedNodes = [];\n\n    // 12. If child’s parent is not null, run these substeps:\n    var childParent = child.parentNode;\n    if (childParent != null) {\n        // 1. Set removedNodes to a list solely containing child.\n        removedNodes[0] = child;\n        // 2. Remove child from its parent with the suppress observers flag set.\n        remove(child, parent, true);\n    }\n\n    // 13. Let nodes be node’s children if node is a DocumentFragment node, and a list containing solely node otherwise.\n    var nodes = void 0;\n    if (node instanceof DocumentFragment) {\n        var childNodes = node.childNodes;\n        var childNodesLength = childNodes.length;\n        nodes = new Array(childNodesLength);\n        for (var i = 0; i < childNodesLength; i++) {\n            nodes[i] = childNodes[i];\n        }\n    } else {\n        nodes = [node];\n    }\n\n    // 14. Insert node into parent before reference child with the suppress observers flag set.\n    insert(node, parent, referenceChild, true);\n\n    // 15. Queue a mutation record of \"childList\" for target parent with addedNodes nodes, \n    // removedNodes removedNodes, nextSibling reference child, and previousSibling previousSibling.\n    queueMutationRecord('childList', parent, null, null, null, nodes, removedNodes, previousSibling, referenceChild);\n}\n\nfunction replaceAll(node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-replace-all\n    // To replace all with a node within a parent, run these steps:\n\n    // 1. If node is not null, adopt node into parent’s node document.\n    if (node != null) {\n        adopt(node, parent.ownerDocument);\n    }\n\n    // 2. Let removedNodes be parent’s children.\n    var parentChildNodes = parent.childNodes;\n    var removedNodesCount = parentChildNodes.length;\n    var removedNodes = new Array(removedNodesCount);\n    for (var i = 0; i < removedNodesCount; i++) {\n        removedNodes[i] = parentChildNodes[i];\n    }\n\n    // 3. Let addedNodes be the empty list if node is null, node’s children if \n    // node is a DocumentFragment node, and a list containing node otherwise.\n    var addedNodes = void 0;\n    if (node == null) {\n        addedNodes = [];\n    } else if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        var nodeChildNodes = node.childNodes;\n        var nodeChildNodesLength = nodeChildNodes.length;\n        addedNodes = new Array(nodeChildNodesLength);\n        for (var _i8 = 0; _i8 < nodeChildNodesLength; _i8++) {\n            addedNodes[_i8] = nodeChildNodes[_i8];\n        }\n    } else {\n        addedNodes = [node];\n    }\n\n    // 4. Remove all parent’s children, in tree order, with the suppress observers flag set.\n    for (var _i9 = 0; _i9 < removedNodesCount; _i9++) {\n        remove(removedNodes[_i9], parent, true);\n    }\n\n    // 5. If node is not null, insert node into parent before null with the suppress observers flag set.\n    if (node != null) {\n        insert(node, parent, null, true);\n    }\n\n    // 6. Queue a mutation record of \"childList\" for parent with addedNodes addedNodes and removedNodes removedNodes.\n    queueMutationRecord('childList', parent, null, null, null, addedNodes, removedNodes);\n}\n\nfunction preRemove(child, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-pre-remove\n    // To pre-remove a child from a parent, run these steps:\n\n    // 1. If child’s parent is not parent, then throw a NotFoundError.\n    if (child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // 2. Remove child from parent.\n    remove(child, parent);\n\n    // 3. Return child.\n    return child;\n}\n\nfunction remove(node, parent, suppressObservers) {\n    // https://dom.spec.whatwg.org/#concept-node-remove\n    // To remove a node from a parent, with an optional suppress observers flag, run these steps:\n\n    // Skip (Range)\n    // 1. Let index be node’s index.\n    // 2. For each range whose start node is an inclusive descendant of node, set its start to (parent, index).\n    // 3. For each range whose end node is an inclusive descendant of node, set its end to (parent, index).\n    // 4. For each range whose start node is parent and start offset is greater than index, decrease its start offset by one.\n    // 5. For each range whose end node is parent and end offset is greater than index, decrease its end offset by one.\n\n    // Skip (NodeIterator)\n    // 6. For each NodeIterator object iterator whose root’s node document is node’s node document, \n    // run the NodeIterator pre-removing steps given node and iterator.\n\n    // 7. Let oldPreviousSibling be node’s previous sibling.\n    var oldPreviousSibling = node.previousSibling;\n\n    // 8. Let oldNextSibling be node’s next sibling.\n    var oldNextSibling = node.nextSibling;\n\n    // 9. Remove node from its parent.\n    var nodeState = getShadowState(node);\n    var parentState = getShadowState(parent);\n    if (parentState && parentState.childNodes) {\n        var nodeIndex = parentState.childNodes.indexOf(node);\n        parentState.childNodes.splice(nodeIndex, 1);\n        // Should always have nodeState if we got here.\n        nodeState.parentNode = null;\n        var parentNode = descriptors.Node.parentNode.get.call(node);\n        descriptors.Node.removeChild.value.call(parentNode, node);\n    } else {\n        descriptors.Node.removeChild.value.call(parent, node);\n    }\n\n    // 10. If node is assigned, then run assign slotables for node’s assigned slot.\n    if (nodeState && nodeState.assignedSlot) {\n        assignSlotables(nodeState.assignedSlot);\n        nodeState.assignedSlot = null;\n    }\n\n    // 11. If parent is a slot whose assigned nodes is the empty list,\n    // then run signal a slot change for parent.\n    if (parent.localName === 'slot' && (!parentState || !parentState.assignedNodes || parentState.assignedNodes.length === 0)) {\n        signalASlotChange(parent);\n    }\n\n    // 12. If node has an inclusive descendant that is a slot, then:\n    var inclusiveSlotDescendants = [];\n    if (node.localName === 'slot') {\n        inclusiveSlotDescendants[0] = node;\n    }\n    treeOrderRecursiveSelectAll(node, inclusiveSlotDescendants, function (descendant) {\n        return descendant.localName === 'slot';\n    });\n    if (inclusiveSlotDescendants.length) {\n        // 1. Run assign slotables for a tree with parent’s tree.\n        assignSlotablesForATree(parent);\n        // 2. Run assign slotables for a tree with node’s tree and a \n        // set containing each inclusive descendant of node that is a slot.\n        assignSlotablesForATree(node, inclusiveSlotDescendants);\n    }\n\n    // Skip (other)\n    // 13. Run the removing steps with node and parent.\n\n    if (_customElements2.default.isInstalled()) {\n        // 14. If node is custom, then enqueue a custom element callback reaction \n        // with node, callback name \"disconnectedCallback\", and an empty argument list.\n        if (_customElements2.default.isCustom(node)) {\n            _customElements2.default.enqueueCallbackReaction(node, 'disconnectedCallback', []);\n        }\n\n        // 15. For each shadow-including descendant descendant of node, in \n        // shadow-including tree order, run these substeps:\n        forEachShadowIncludingDescendant(node, function (descendant) {\n            // Skip (other)\n            // 1. Run the removing steps with descendant.\n\n            // 2. If descendant is custom, then enqueue a custom element \n            // callback reaction with descendant, callback name \"disconnectedCallback\", \n            // and an empty argument list.\n            if (_customElements2.default.isCustom(descendant)) {\n                _customElements2.default.enqueueCallbackReaction(descendant, 'disconnectedCallback', []);\n            }\n        });\n    }\n\n    // 16. For each inclusive ancestor inclusiveAncestor of parent...\n    var inclusiveAncestor = parent;\n    while (inclusiveAncestor) {\n        // ...if inclusiveAncestor has any registered observers whose options' \n        // subtree is true, then for each such registered observer registered... \n        var ancestorState = getShadowState(inclusiveAncestor);\n        if (ancestorState && ancestorState.observers) {\n            var ancestorObservers = ancestorState.observers;\n            for (var i = 0; i < ancestorObservers.length; i++) {\n                var registeredObserver = ancestorObservers[i];\n                if (registeredObserver.options.subtree) {\n                    // ...append a transient registered observer whose observer and options are \n                    // identical to those of registered and source which is registered to node’s \n                    // list of registered observers.\n                    var observer = registeredObserver.instance;\n                    var options = registeredObserver.options;\n                    var transientObserver = createTransientObserver(observer, node, options);\n                    mutationObservers.push(transientObserver);\n                }\n            }\n        }\n        inclusiveAncestor = inclusiveAncestor.parentNode;\n    }\n\n    // 17. If suppress observers flag is unset, queue a mutation record of \"childList\" \n    // for parent with removedNodes a list solely containing node, nextSibling \n    // oldNextSibling, and previousSibling oldPreviousSibling.\n    if (!suppressObservers) {\n        queueMutationRecord('childList', parent, null, null, null, null, [node], oldPreviousSibling, oldNextSibling);\n    }\n}\n\n// https://dom.spec.whatwg.org/#mutation-observers\n\n// TODO: test everything that queues mutation records\n\n// TODO: move mutation observers into a separately installed feature.\n// It should be installed automatically when ShadowDOM is installed,\n// with an option to opt out if desired for performance\n\nfunction getOrCreateNodeObservers(node) {\n    var nodeState = getShadowState(node) || setShadowState(node, {});\n    var observers = nodeState.observers;\n    return observers ? observers : nodeState.observers = [];\n}\n\nfunction createMutationObserver(callback) {\n    return {\n        callback: callback,\n        queue: [],\n        nodes: [],\n        observe: function observe(node, options) {\n            if (this.nodes.length === 0) {\n                mutationObservers.push(this);\n            }\n            var nodeObservers = getOrCreateNodeObservers(node);\n            nodeObservers.push({ instance: this, options: options });\n            this.nodes.push(node);\n        },\n        disconnect: function disconnect() {\n            var index = mutationObservers.indexOf(this);\n            mutationObservers.splice(index, 1);\n            for (var i = 0; i < this.nodes.length; i++) {\n                var nodeObservers = getOrCreateNodeObservers(this.nodes[i]);\n                for (var j = 0; j < nodeObservers.length; j++) {\n                    if (nodeObservers[j].instance === this) {\n                        nodeObservers.splice(j, 1);\n                        break;\n                    }\n                }\n            }\n            this.nodes = [];\n        }\n    };\n}\n\nfunction createTransientObserver(observer, node, options) {\n    var transientObserver = {\n        observer: observer,\n        callback: observer.callback,\n        options: options,\n        queue: [],\n        node: node,\n        disconnect: function disconnect() {\n            var nodeObservers = getOrCreateNodeObservers(this.node);\n            for (var j = 0; j < nodeObservers.length; j++) {\n                if (nodeObservers[j].instance === this) {\n                    nodeObservers.splice(j, 1);\n                    break;\n                }\n            }\n        }\n    };\n\n    var nodeObservers = getOrCreateNodeObservers(node);\n    nodeObservers.push({ instance: transientObserver, options: options });\n\n    return transientObserver;\n}\n\nvar mutationObserverCompoundMicrotaskQueuedFlag = false;\n\nvar mutationObservers = [];\nvar signalSlotList = [];\nvar theEmptyList = Object.freeze([]);\n\nfunction queueMutationRecord(type, target, name, nameSpace, oldValue, addedNodes, removedNodes, previousSibling, nextSibling) {\n    // PERF: This is an out-of-spec optimization\n    if (mutationObservers.length === 0) {\n        return;\n    }\n\n    // https://dom.spec.whatwg.org/#queueing-a-mutation-record\n    // 1. Let interested observers be an initially empty set of \n    // MutationObserver objects optionally paired with a string.\n    var interestedObservers = [];\n    var pairedStrings = [];\n    // 2. Let nodes be the inclusive ancestors of target.\n    var nodes = [target];\n    var ancestor = target;\n    while (ancestor = ancestor.parentNode) {\n        nodes.push(ancestor);\n    }\n    // 3. Then, for each node in nodes... \n    for (var i = 0; i < nodes.length; i++) {\n        var node = nodes[i];\n        var nodeState = getShadowState(node);\n        if (!nodeState || !nodeState.observers) {\n            continue;\n        }\n        // ...and then for each registered observer (with registered \n        // observer’s options as options) in node’s list of registered \n        // observers...\n        for (var j = 0; j < nodeState.observers.length; j++) {\n            var registeredObserver = nodeState.observers[j];\n            var options = registeredObserver.options;\n            // ...run these substeps:\n            // 1. If none of the following are true:\n            if (node != target && !options.subtree) {\n                continue;\n            }\n            if (type === 'attributes') {\n                if (!options.attributes) {\n                    continue;\n                }\n                // if options' attributeFilter is present, and options' attributeFilter\n                // does not contain name or namespace is non-null\n                if (options.attributeFilter && (options.attributeFilter.indexOf(name) === -1 || nameSpace != null)) {\n                    continue;\n                }\n            }\n            if (type === 'characterData' && !options.characterData) {\n                continue;\n            }\n            if (type === 'childList' && !options.childList) {\n                continue;\n            }\n            // ...then run the subsubsteps:\n            // 1. If registered observer’s observer is not in interested observers, \n            // append registered observer’s observer to interested observers.\n            var observer = registeredObserver.instance;\n            var index = interestedObservers.indexOf(observer);\n            if (index === -1) {\n                index = interestedObservers.length;\n                interestedObservers[index] = observer;\n            }\n            // 2. If either type is \"attributes\" and options’ attributeOldValue is true, \n            // or type is \"characterData\" and options’ characterDataOldValue is true, \n            // set the paired string of registered observer’s observer in interested observers to oldValue.\n            if (type === 'attributes' && options.attributeOldValue || type === 'characterData' && options.characterDataOldValue) {\n                pairedStrings[index] = oldValue;\n            }\n        }\n    }\n\n    // PERF: This is an out-of-spec optimization\n    if (interestedObservers.length === 0) {\n        return;\n    }\n\n    // 4. Then, for each observer in interested observers, run these substeps:\n    for (var _i10 = 0; _i10 < interestedObservers.length; _i10++) {\n        var _observer = interestedObservers[_i10];\n        // 1. Let record be a new MutationRecord object with its type set to type and target set to target.\n        var record = {\n            type: type,\n            target: target,\n            attributeName: null,\n            attributeNamespace: null,\n            addedNodes: theEmptyList,\n            removedNodes: theEmptyList,\n            previousSibling: null,\n            nextSibling: null,\n            oldValue: null\n        };\n        // 2. If name and namespace are given, set record’s attributeName to name, and record’s attributeNamespace to namespace.\n        if (name) {\n            record.attributeName = name;\n            record.attributeNamespace = nameSpace;\n        }\n        // 3. If addedNodes is given, set record’s addedNodes to addedNodes.\n        if (addedNodes) {\n            record.addedNodes = Object.freeze(addedNodes);\n        }\n        // 4. If removedNodes is given, set record’s removedNodes to removedNodes.\n        if (removedNodes) {\n            record.removedNodes = Object.freeze(removedNodes);\n        }\n        // 5. If previousSibling is given, set record’s previousSibling to previousSibling.\n        if (previousSibling) {\n            record.previousSibling = previousSibling;\n        }\n        // 6. If nextSibling is given, set record’s nextSibling to nextSibling.\n        if (nextSibling) {\n            record.nextSibling = nextSibling;\n        }\n        // 7. If observer has a paired string, set record’s oldValue to observer’s paired string.\n        record.oldValue = pairedStrings[_i10];\n        // 8. Append record to observer’s record queue.\n        _observer.queue.push(record);\n    }\n\n    // 5. Queue a mutation observer compound microtask.\n    queueMutationObserverCompoundMicrotask();\n}\n\nfunction queueMutationObserverCompoundMicrotask() {\n    if (mutationObserverCompoundMicrotaskQueuedFlag) {\n        return;\n    }\n    mutationObserverCompoundMicrotaskQueuedFlag = true;\n    setImmediate(notifyMutationObservers);\n}\n\nfunction notifyMutationObservers() {\n    mutationObserverCompoundMicrotaskQueuedFlag = false;\n    var mutationObserversLength = mutationObservers.length;\n    var notifyList = new Array(mutationObserversLength);\n    for (var i = 0; i < mutationObserversLength; i++) {\n        notifyList[i] = mutationObservers[i];\n    }\n    var signalList = signalSlotList.splice(0, signalSlotList.length);\n    for (var _i11 = 0; _i11 < notifyList.length; _i11++) {\n        var observer = notifyList[_i11];\n        var queue = observer.queue.splice(0, observer.queue.length);\n        for (var j = mutationObservers.length - 1; j >= 0; j--) {\n            var transientObserver = mutationObservers[j];\n            if (transientObserver.observer === observer) {\n                mutationObservers.splice(j, 1);\n                transientObserver.disconnect();\n            }\n        }\n        if (queue.length) {\n            try {\n                observer.callback.call(observer.interface, queue, observer.interface);\n            } catch (error) {\n                reportError(error);\n            }\n        }\n    }\n    for (var _i12 = 0; _i12 < signalList.length; _i12++) {\n        var slot = signalList[_i12];\n        var event = slot.ownerDocument.createEvent('event');\n        event.initEvent('slotchange', true, false);\n        try {\n            slot.dispatchEvent(event);\n        } catch (error) {\n            reportError(error);\n        }\n    }\n}"]}