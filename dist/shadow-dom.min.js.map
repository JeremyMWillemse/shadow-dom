{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src\\custom-elements.js","src\\interfaces\\Attr.js","src\\interfaces\\CharacterData.js","src\\interfaces\\CustomEvent.js","src\\interfaces\\DOMTokenList.js","src\\interfaces\\Document.js","src\\interfaces\\Element.js","src\\interfaces\\Event.js","src\\interfaces\\EventTarget.js","src\\interfaces\\HTMLSlotElement.js","src\\interfaces\\HTMLTableElement.js","src\\interfaces\\HTMLTableRowElement.js","src\\interfaces\\HTMLTableSectionElement.js","src\\interfaces\\MutationObserver.js","src\\interfaces\\NamedNodeMap.js","src\\interfaces\\Node.js","src\\interfaces\\ShadowRoot.js","src\\interfaces\\Text.js","src\\main.js","src\\mixins\\ChildNode.js","src\\mixins\\DocumentOrShadowRoot.js","src\\mixins\\NonDocumentTypeChildNode.js","src\\mixins\\NonElementParentNode.js","src\\mixins\\ParentNode.js","src\\mixins\\Slotable.js","src\\reflect.js","src\\shadow-dom.js","src\\utils.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_classCallCheck","TypeError","install","builtInElementInterfaces","installHtmlConstructors","Object","defineProperty","window","value","CustomElementRegistry","writable","configurable","enumerable","Document","prototype","createElement","createElementNS","document","addEventListener","treeOrderShadowInclusiveForEach","tryToUpgradeElement","customElementsReactionStack","backupElementQueue","processingBackupElementQueue","setInstallation","uninstall","getPrivateState","uninstallHtmlConstructors","originalCreateElement","originalCreateElementNS","setPrivateState","isInstalled","getInstallation","gatherBuiltInElementInterfaces","getOwnPropertyNames","test","originalHTMLElement","push","name","object","constructor","shimHtmlConstructors","Function","makeHtmlConstructor","getPrototypeOf","this","definitions","htmlConstructor","c","constructionStack","localName","setPrototypeOf","customElementState","customElementDefinition","m","alreadyConstructedMarker","makeDOMException","createAnElement","lookupCustomElementDefinition","isValue","upgradeElement","enqueueUpgradeReaction","HTMLElement","attributes","hasChildNodes","parentNode","ownerDocument","namespaceURI","htmlNamespace","reportError","toLowerCase","is","setAttribute","isCustom","nodeType","Node","ELEMENT_NODE","isValidCustomElementName","charCodeAt","defaultView","customElements","reactionQueue","enqueueCallbackReaction","isConnected","splice","pop","enqueueElementOnAppropriateElementQueue","setImmediate","invokeReactions","lifecycleCallbacks","observedAttributes","indexOf","type","callbackReactionType","callback","args","upgradeReactionType","definition","_slicedToArray","apply","executeCEReactions","descriptors","appendChild","message","getCallback","_custom","shadowRoot","childNodes","console","error","Symbol","iterator","next","done","Array","isArray","_typeof","_createClass","key","nativeSupport","default","arguments","setTimeout","concat","__proto__","elementDefinitionIsRunning","whenDefinedPromiseMap","extends","HTMLUnknownElement","connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","slice","p","d","element","_interopRequireDefault","__esModule","_interopRequireWildcard","hasOwnProperty","_utils","$","_customElements","_customElements2","_class","get","Attr","set","setExistingAttributeValue","getData","CharacterData","data","replaceData","bubbles","cancelable","composed","detail","createEvent","initCustomEvent","setShadowState","validateTokens","validateToken","makeError","createDOMTokenList","getAttribute","split","sort","create","DOMTokenList","tokens","getOrCreateDOMTokenList","getShadowState","tokenLists","setAttributeValue","join","getElementsByTagName","filterByRoot","getElementsByTagNameNS","getElementsByClassName","DOCUMENT_NODE","isShadowRoot","clone","adopt","_ShadowRoot","_ShadowRoot2","Element","getNamedItem","changeAttribute","createAttribute","appendAttribute","createAttributeNS","prefix","removeAttributeByName","removeAttributeByNamespace","ownerElement","removeAttribute","mode","createDocumentFragment","extend","host","removeChild","matches","parentElement","insertAdjacent","createTextNode","parseHTMLFragment","serializeHTMLFragment","DocumentFragment","replaceAll","DOCUMENT_FRAGMENT_NODE","replace","hasRelatedTarget","initEvent","stopPropagation","stopImmediatePropagationFlag","currentTarget","path","Window","closedShadowHidden","shadowIncludingRoot","target","builtInComposedEvents","relatedTarget","calculatePath","Event","FocusEvent","MouseEvent","retarget","getTheParent","shadowIncludingInclusiveAncestor","root","assignedSlot","calculateRelatedTarget","calculateTarget","removeEventListener","dispatchEvent","capture","once","passive","EventListenerCollection","addListener","attach","removeListener","empty","detach","hostListeners","shadowListeners","eventPhase","CAPTURING_PHASE","invokeListeners","AT_TARGET","getListeners","BUBBLING_PHASE","listeners","calculatedPath","stopImmediatePropagation","flatten","assignedNodes","findFlattenedSlotables","caption","remove","tHead","tFoot","rows","cells","createMutationObserver","observer","interface","observe","disconnect","queue","ancestorOf","preceding","reverse","Math","abs","min","elementTextContent","TEXT_NODE","nextSibling","normalize","DOCUMENT_TYPE_NODE","publicId","systemId","ATTRIBUTE_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","isEqualNode","atttributes","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_DISCONNECTED","preInsert","append","preRemove","firstChild","lastChild","previousSibling","nodeValue","insert","_shadowDom","_shadowDom2","installShadowDom","installCustomElements","convertNodesIntoANode","native","activeElement","previousElementSibling","descriptor","nextElementSibling","querySelectorAll","treeOrderRecursiveSelectFirst","id","children","firstElementChild","lastElementChild","childElementCount","treeOrderRecursiveSelectAll","reflectString","reflectBoolean","hasAttribute","reflectInteger","parseInt","toString","reflectFloat","parseFloat","reflectDOMTokenList","_DOMTokenList","reflectHTMLElement","getElementById","reflectTextContent","textContent","patchAll","interfaces","className","classList","slot","title","lang","translate","dir","hidden","tabIndex","accessKey","draggable","contextMenu","HTMLMenuElement","spellcheck","contentEditable","HTMLAnchorElement","download","rel","rev","relList","hreflang","text","HTMLAreaElement","alt","coords","shape","HTMLBaseElement","href","HTMLButtonElement","autofocus","disabled","form","HTMLFormElement","formAction","formEnctype","formMethod","formNoValidate","formTarget","menu","HTMLCanvasElement","width","height","HTMLDataElement","HTMLDetailsElement","open","HTMLEmbedElement","src","HTMLFieldSetElement","acceptCharset","action","autocomplete","enctype","encoding","method","noValidate","HTMLIFrameElement","srcdoc","sandbox","allowFullscreen","HTMLImageElement","srcset","crossOrigin","useMap","isMap","HTMLInputElement","accept","defaultChecked","dirName","inputMode","max","maxLength","minLength","multiple","pattern","placeholder","readOnly","required","size","step","defaultValue","HTMLKeygenElement","challenge","keytype","HTMLLabelElement","htmlFor","HTMLLegendElement","HTMLLIElement","HTMLLinkElement","media","sizes","HTMLMapElement","HTMLMediaElement","preload","loop","autoplay","mediaGroup","controls","defaultMuted","label","HTMLMenuItemElement","icon","checked","radiogroup","HTMLMetaElement","httpEquiv","content","HTMLMeterElement","low","high","optimum","HTMLModElement","cite","dateTime","HTMLObjectElement","typeMustMatch","HTMLOListElement","reversed","start","HTMLOptGroupElement","HTMLOptionElement","defaultSelected","HTMLOutputElement","HTMLParamElement","HTMLProgressElement","HTMLQuoteElement","HTMLScriptElement","charset","async","defer","nonce","HTMLSelectElement","HTMLSourceElement","HTMLStyleElement","HTMLTableCellElement","colSpan","rowSpan","headers","HTMLTableColElement","span","HTMLTableHeaderCellElement","scope","abbr","HTMLTextAreaElement","cols","wrap","HTMLTimeElement","HTMLTrackElement","kind","srclang","HTMLVideoElement","poster","inUse","reflect","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","_Attr2","_CharacterData2","CustomEvent","_CustomEvent2","_Document2","_DOMTokenList2","_Element2","_Event2","_Event","EventTarget","_EventTarget2","HTMLSlotElement","_HTMLSlotElement2","HTMLTableElement","_HTMLTableElement2","HTMLTableRowElement","_HTMLTableRowElement2","HTMLTableSectionElement","_HTMLTableSectionElement2","MutationObserver","_MutationObserver2","NamedNodeMap","_NamedNodeMap2","_Node2","Text","_Text2","DocumentType","_ChildNode2","_DocumentOrShadowRoot2","_NonDocumentTypeChildNode2","_NonElementParentNode2","_ParentNode2","_Slotable2","innerHTML","outerHTML","insertAdjacentText","insertAdjacentElement","insertAdjacentHTML","_reflect","_Attr","_CharacterData","_CustomEvent","_Document","_Element","_EventTarget","_HTMLSlotElement","_HTMLTableElement","_HTMLTableRowElement","_HTMLTableSectionElement","_MutationObserver","_NamedNodeMap","_Node","_Text","_ChildNode","_DocumentOrShadowRoot","_NonDocumentTypeChildNode","_NonElementParentNode","_ParentNode","_Slotable","_toConsumableArray","from","getOwnPropertyDescriptor","_shadow","recursiveGetShadowIncludingTreeOrderDescendantsInner","results","index","recursiveGetShadowIncludingTreeOrderDescendants","nodeName","parsingElement","parsingFragment","qualifiedName","descendant","inclusiveDescendant","ancestor","inclusiveAncestor","cloneNode","hostIncludingInclusiveAncestor","shadowIncludingDescendant","shadowIncludingInclusiveDescendant","shadowIncludingAncestor","updateSlotName","assignSlotablesForATree","updateSlotableName","assignSlotables","assignASlot","attributeChangeSteps","queueMutationRecord","namespace","oldValue","setAttributeNodeNS","removeAttributeNode","replaceAttribute","attribute","getNamedItemNS","findASlot","findSlotables","signalASlotChange","renderSlotablesAsync","signalSlotList","queueMutationObserverCompoundMicrotask","ensurePreInsertionValidity","removedNodes","v","h","g","insertBefore","b","N","S","addedNodes","observers","options","subtree","instance","createTransientObserver","mutationObservers","getOrCreateNodeObservers","nodes","node","attributeFilter","characterData","childList","attributeOldValue","characterDataOldValue","attributeName","attributeNamespace","theEmptyList","freeze","mutationObserverCompoundMicrotaskQueuedFlag","notifyMutationObservers"],"mappings":"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","file":"./dist/shadow-dom.min.js.map","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// https://html.spec.whatwg.org/multipage/scripting.html#custom-elements\n\n// TODO: CEReactions annotations for Range in the DOM spec\n// TODO: CEReactions for interfaces in the HTML spec\n\nvar nativeSupport = 'customElements' in window;\nvar originalHTMLElement = window.HTMLElement;\nvar originalCreateElement = Document.prototype.createElement;\nvar originalCreateElementNS = Document.prototype.createElementNS;\nvar htmlNamespace = 'http://www.w3.org/1999/xhtml';\nvar alreadyConstructedMarker = 1;\nvar upgradeReactionType = 1;\nvar callbackReactionType = 2;\n\nexports.default = {\n    nativeSupport: nativeSupport,\n    install: install,\n    uninstall: uninstall,\n    isInstalled: isInstalled,\n    shimHtmlConstructors: shimHtmlConstructors,\n    isCustom: isCustom,\n    tryToUpgradeElement: tryToUpgradeElement,\n    enqueueCallbackReaction: enqueueCallbackReaction,\n    executeCEReactions: executeCEReactions,\n    isValidCustomElementName: isValidCustomElementName\n};\n\n// TODO: add a note about importing YuzuJS/setImmediate before this polyfill if better performance is desired.\n// TODO: what about IE9?\n\nvar setImmediate = 'setImmediate' in window ? window.setImmediate : function (callback) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n    }\n\n    return setTimeout.apply(undefined, [callback, 0].concat(args));\n};\n\n// TODO: what about IE9, IE10 + others?\nvar setPrototypeOf = Object.setPrototypeOf || function () {\n    var test = {};\n    var proto = {};\n    test.__proto__ = proto;\n    if (Object.getPrototypeOf(test) === proto) {\n        return function (object, proto) {\n            object.__proto__ = proto;\n            return object;\n        };\n    }\n    return function (object, proto) {};\n}();\n\n// Installation/uninstallation\n\nfunction install() {\n    var installation = {};\n\n    installation.builtInElementInterfaces = installHtmlConstructors();\n\n    Object.defineProperty(window, 'customElements', {\n        value: new CustomElementRegistry(),\n        writable: false,\n        configurable: true,\n        enumerable: true\n    });\n\n    Document.prototype.createElement = createElement;\n    Document.prototype.createElementNS = createElementNS;\n\n    window.document.addEventListener('DOMContentLoaded', function () {\n        // Upgrading elements initially present in the document\n        // TODO: Improve this, possibly with a MutationEvent or something\n        treeOrderShadowInclusiveForEach(document, tryToUpgradeElement);\n    });\n\n    installation.customElementsReactionStack = [];\n    installation.backupElementQueue = [];\n    installation.processingBackupElementQueue = false;\n\n    setInstallation(window, installation);\n}\n\nfunction uninstall() {\n    var windowState = getPrivateState(window);\n\n    if (!windowState) {\n        return;\n    }\n\n    uninstallHtmlConstructors(windowState.builtInElementInterfaces);\n\n    delete window['customElements'];\n\n    Document.prototype.createElement = originalCreateElement;\n    Document.prototype.createElementNS = originalCreateElementNS;\n\n    setPrivateState(window, undefined);\n}\n\nfunction isInstalled() {\n    return getInstallation(window) != null;\n}\n\nfunction gatherBuiltInElementInterfaces() {\n    var builtInElementInterfaces = [];\n    var windowPropertyNames = Object.getOwnPropertyNames(window);\n    for (var i = 0; i < windowPropertyNames.length; i++) {\n        var name = windowPropertyNames[i];\n        if (/^webkit/.test(name)) {\n            // This just avoids a slew of warnings.\n            continue;\n        }\n        var object = window[name];\n        if (object && object instanceof originalHTMLElement || object === originalHTMLElement) {\n            builtInElementInterfaces.push({ name: name, object: object, constructor: object.prototype.constructor });\n        }\n    }\n    return builtInElementInterfaces;\n}\n\nfunction shimHtmlConstructors() {\n    try {\n        // Ensure that we are only shimming browsers that support ES2015 class syntax.\n        new Function('return class {}');\n\n        var _makeHtmlConstructor = new Function('originalHTMLElement', 'return function(){const newTarget=new.target||this.constructor;' + 'return Reflect.construct(originalHTMLElement, [], newTarget);}');\n\n        var builtInElementInterfaces = gatherBuiltInElementInterfaces();\n        for (var i = 0; i < builtInElementInterfaces.length; i++) {\n            var _builtInElementInterf = builtInElementInterfaces[i],\n                name = _builtInElementInterf.name,\n                object = _builtInElementInterf.object;\n\n            var htmlConstructor = _makeHtmlConstructor(object);\n            htmlConstructor.prototype = object.prototype;\n            Object.defineProperty(object.prototype, 'constructor', {\n                value: htmlConstructor,\n                writable: true,\n                configurable: true\n            });\n            window[name] = htmlConstructor;\n        }\n    } catch (error) {\n        return;\n    }\n}\n\nfunction installHtmlConstructors() {\n    var builtInElementInterfaces = gatherBuiltInElementInterfaces();\n    for (var i = 0; i < builtInElementInterfaces.length; i++) {\n        var _builtInElementInterf2 = builtInElementInterfaces[i],\n            name = _builtInElementInterf2.name,\n            object = _builtInElementInterf2.object;\n\n        var htmlConstructor = makeHtmlConstructor();\n        htmlConstructor.prototype = object.prototype;\n        Object.defineProperty(object.prototype, 'constructor', {\n            value: htmlConstructor,\n            writable: true,\n            configurable: true\n        });\n        window[name] = htmlConstructor;\n    }\n    return builtInElementInterfaces;\n}\n\nfunction uninstallHtmlConstructors(builtInElementInterfaces) {\n    for (var i = 0; i < builtInElementInterfaces.length; i++) {\n        var _builtInElementInterf3 = builtInElementInterfaces[i],\n            name = _builtInElementInterf3.name,\n            object = _builtInElementInterf3.object,\n            _constructor = _builtInElementInterf3.constructor;\n\n        Object.defineProperty(object.prototype, 'constructor', {\n            value: _constructor,\n            writable: true,\n            configurable: true\n        });\n        window[name] = object;\n    }\n}\n\nfunction makeHtmlConstructor() {\n    return function htmlConstructor() {\n        var thisPrototype = Object.getPrototypeOf(this);\n\n        // 1. Let registry...\n        var registry = window['customElements'];\n        var registryState = getPrivateState(registry);\n\n        // 2. If NewTarget...\n        if (thisPrototype.constructor === htmlConstructor) {\n            throw new TypeError('Illegal constructor');\n        }\n\n        // 3. Let definition...\n        var definition = void 0;\n        for (var i = 0; i < registryState.definitions.length; i++) {\n            var current = registryState.definitions[i];\n            if (current.constructor === thisPrototype.constructor) {\n                definition = current;\n            }\n        }\n        if (!definition) {\n            throw new TypeError();\n        }\n\n        // 4. If definition's local name is equal...\n        // 5. Otherwise... (customized built-in)\n        if (htmlConstructor !== definition.htmlConstructor) {\n            // TODO: assert this is the correct HTML___Element\n            throw new TypeError('Illegal constructor');\n        }\n\n        // 6. let prototype...\n        var prototype = thisPrototype;\n\n        // 7. if prototype is not Object...\n        // in this polyfill, this should always be true\n\n        // 8. If construction stack is empty...\n        var constructionStack = definition.constructionStack;\n        if (constructionStack.length === 0) {\n            var _element = originalCreateElement.call(window.document, definition.localName);\n            setPrototypeOf(_element, prototype);\n            setPrivateState(_element, {\n                customElementState: 'custom',\n                customElementDefinition: definition\n            });\n            return _element;\n        }\n\n        var lastIndex = constructionStack.length - 1;\n        // 9. Let element be the last entry\n        var element = constructionStack[lastIndex];\n        // 10. if alreadyConstructedMarker\n        if (element === alreadyConstructedMarker) {\n            throw makeDOMException('InvalidStateError', 'This element instance is already constructed');\n        }\n        // 11. set prototype\n        setPrototypeOf(element, prototype);\n        // 12. replace last entry\n        constructionStack[lastIndex] = alreadyConstructedMarker;\n        // 13. return element\n        return element;\n    };\n}\n\n// DOM element creation\n\nfunction createAnElement(document, qualifiedOrLocalName, nameSpace, prefix, is, synchronousCustomElements) {\n    is = is || null;\n    var result = null;\n    var definition = lookupCustomElementDefinition(document, nameSpace, qualifiedOrLocalName, is);\n    if (definition && definition.name != definition.localName) {\n        result = originalCreateElement.call(document, qualifiedOrLocalName);\n        setPrivateState(result, {\n            customElementState: 'undefined',\n            customElementDefinition: null,\n            isValue: is\n        });\n        if (synchronousCustomElements) {\n            upgradeElement(result, definition);\n        } else {\n            enqueueUpgradeReaction(result, definition);\n        }\n    } else if (definition) {\n        if (synchronousCustomElements) {\n            try {\n                result = new definition.constructor();\n                if (!(result instanceof HTMLElement)) {\n                    throw new TypeError('Illegal constructor');\n                }\n                if (result.attributes.length !== 0 || result.hasChildNodes() || result.parentNode || result.ownerDocument !== document || result.namespaceURI !== htmlNamespace || result.localName !== qualifiedOrLocalName) {\n                    var error = new Error('Invalid state manipulation during custom element construction');\n                    error.name = 'NotSupportedError';\n                    throw error;\n                }\n            } catch (error) {\n                reportError(error);\n                result = originalCreateElement.call(document, qualifiedOrLocalName);\n                // should be HTMLUnknownElement already\n                setPrivateState(result, {\n                    customElementState: 'failed'\n                });\n            }\n        } else {\n            result = originalCreateElement.call(document, qualifiedOrLocalName);\n            Object.setPrototypeOf(result, HTMLElement.prototype);\n            enqueueUpgradeReaction(result, definition);\n        }\n    } else {\n        result = nameSpace ? originalCreateElementNS.call(document, nameSpace, qualifiedOrLocalName) : originalCreateElement.call(document, qualifiedOrLocalName);\n        // skip setting the custom element state to 'undefined' in order\n        // to avoid unnecessary allocation.\n    }\n    return result;\n}\n\nfunction createElement(localName, options) {\n    var nameSpace = null;\n    //if (this instanceof HTMLDocument) {\n    localName = localName.toLowerCase();\n    nameSpace = htmlNamespace;\n    //}\n    var is = options ? options.is || null : null;\n    var element = createAnElement(this, localName, nameSpace, null, is, true);\n    if (is != null) {\n        element.setAttribute('is', is);\n    }\n    return element;\n}\n\nfunction createElementNS(nameSpace, qualifiedName, options) {\n    var is = options ? options.is || null : null;\n    var element = createAnElement(this, qualifiedName, nameSpace, null, is, true);\n    if (is != null) {\n        element.setAttribute('is', is);\n    }\n    return element;\n}\n\n// Custom Element spec\n\nfunction isCustom(node) {\n    if (node.nodeType != Node.ELEMENT_NODE) {\n        return false;\n    }\n    var nodeState = getPrivateState(node);\n    if (!nodeState) {\n        return false;\n    }\n    return nodeState.customElementState === 'custom';\n}\n\nfunction isValidCustomElementName(localName) {\n    // https://html.spec.whatwg.org/multipage/scripting.html#valid-custom-element-name\n    switch (localName) {\n        case \"annotation-xml\":\n        case \"color-profile\":\n        case \"font-face\":\n        case \"font-face-src\":\n        case \"font-face-uri\":\n        case \"font-face-format\":\n        case \"font-face-name\":\n        case \"missing-glyph\":\n            return false;\n    }\n\n    var nameLength = localName.length;\n\n    if (nameLength < 2) {\n        return false;\n    }\n\n    var firstCode = localName.charCodeAt(0);\n    if (firstCode < 0x61 /* a */ || firstCode > 0x7A /* z */) {\n            return false;\n        }\n\n    var foundHyphen = false;\n\n    for (var i = 1; i < nameLength; i++) {\n        var code = localName.charCodeAt(i);\n        if (code >= 0x61 /* a */ && code <= 0x7A /* z */) {\n                continue;\n            }\n        if (code === 0x2D /* - */) {\n                foundHyphen = true;\n                continue;\n            }\n        if (code === 0x2E /* . */ || code === 0x5F /* _ */ || code === 0xB7 /* · */) {\n                continue;\n            }\n        if (code >= 0x30 /* 0 */ && code <= 0x39 /* 9 */) {\n                continue;\n            }\n        if (code < 0x00C0) {\n            return false;\n        }\n        if (code >= 0xC0 && code <= 0xD6) {\n            continue;\n        }\n        if (code >= 0xD8 && code <= 0xF6) {\n            continue;\n        }\n        if (code >= 0xF8 && code <= 0x37D) {\n            continue;\n        }\n        if (code >= 0x37F && code <= 0x1FFF) {\n            continue;\n        }\n        if (code >= 0x200C && code <= 0x200D) {\n            continue;\n        }\n        if (code >= 0x203F && code <= 0x2040) {\n            continue;\n        }\n        if (code >= 0x2070 && code <= 0x218F) {\n            continue;\n        }\n        if (code >= 0x2C00 && code <= 0x2FEF) {\n            continue;\n        }\n        if (code >= 0x3001 && code <= 0xD7FF) {\n            continue;\n        }\n        if (code >= 0xF900 && code <= 0xFDCF) {\n            continue;\n        }\n        if (code >= 0xFDF0 && code <= 0xFFFD) {\n            continue;\n        }\n        if (code >= 0x10000 && code <= 0xEFFFF) {\n            continue;\n        }\n        return false;\n    }\n\n    return foundHyphen;\n}\n\nfunction lookupCustomElementDefinition(document, nameSpace, localName, is) {\n    if (nameSpace !== htmlNamespace) {\n        return null;\n    }\n    if (!document.defaultView) {\n        return null;\n    }\n    var registry = document.defaultView.customElements;\n    var privateState = getPrivateState(registry);\n    for (var i = 0; i < privateState.definitions.length; i++) {\n        var definition = privateState.definitions[i];\n        if (definition.localName === localName) {\n            if (definition.name === localName || definition.name === is) {\n                return definition;\n            }\n        }\n    }\n    return null;\n}\n\nvar CustomElementRegistry = function () {\n    function CustomElementRegistry() {\n        _classCallCheck(this, CustomElementRegistry);\n\n        setPrivateState(this, {\n            definitions: [],\n            elementDefinitionIsRunning: false,\n            whenDefinedPromiseMap: {}\n        });\n    }\n\n    _createClass(CustomElementRegistry, [{\n        key: 'define',\n        value: function define(name, constructor, options) {\n            var privateState = getPrivateState(this);\n            if (constructor !== constructor.prototype.constructor) {\n                throw new TypeError('The passed argument must be a constructor');\n            }\n            if (!isValidCustomElementName(name)) {\n                throw makeDOMException('SyntaxError');\n            }\n            // TODO: check for already defined name\n            // TODO: check for already defined constructor\n            var localName = name;\n            var extensionOf = options ? options.extends : null;\n            var htmlConstructor = window.HTMLElement;\n            if (extensionOf != null) {\n                if (isValidCustomElementName(extensionOf)) {\n                    throw makeDOMException('NotSupportedError');\n                }\n                var testElement = originalCreateElement.call(window.document, extensionOf);\n                if (testElement instanceof HTMLUnknownElement) {\n                    // TODO: check for HTMLUnknownElement\n                }\n                localName = extensionOf;\n                htmlConstructor = Object.getPrototypeOf(testElement).constructor;\n            }\n            if (privateState.elementDefinitionIsRunning) {\n                throw makeDOMException('NotSupportedError');\n            }\n            privateState.elementDefinitionIsRunning = true;\n            var caught = null;\n            var observedAttributes = [];\n            var lifecycleCallbacks = void 0;\n            var nativeInterface = void 0;\n            try {\n                var prototype = constructor.prototype;\n                if ((typeof prototype === 'undefined' ? 'undefined' : _typeof(prototype)) !== 'object') {\n                    throw new TypeError('Invalid prototype');\n                }\n                lifecycleCallbacks = {\n                    'connectedCallback': getCallback(prototype, 'connectedCallback'),\n                    'disconnectedCallback': getCallback(prototype, 'disconnectedCallback'),\n                    'adoptedCallback': getCallback(prototype, 'adoptedCallback'),\n                    'attributeChangedCallback': getCallback(prototype, 'attributeChangedCallback')\n                };\n                if (lifecycleCallbacks['attributeChangedCallback']) {\n                    var observedAttributesIterable = constructor.observedAttributes;\n                    if (observedAttributesIterable) {\n                        observedAttributes = observedAttributesIterable.slice();\n                    }\n                }\n            } catch (error) {\n                caught = error;\n            }\n            privateState.elementDefinitionIsRunning = false;\n            if (caught) {\n                throw caught;\n            }\n            var definition = {\n                name: name,\n                localName: localName,\n                constructor: constructor,\n                observedAttributes: observedAttributes,\n                lifecycleCallbacks: lifecycleCallbacks,\n                constructionStack: [],\n                htmlConstructor: htmlConstructor\n            };\n            privateState.definitions.push(definition);\n            var document = window.document;\n            treeOrderShadowInclusiveForEach(document, function (node) {\n                if (node.nodeType === Node.ELEMENT_NODE && node.namespaceURI === htmlNamespace && node.localName === localName) {\n                    if (extensionOf) {\n                        var nodeState = getPrivateState(node);\n                        if (nodeState.isValue !== extensionOf) {\n                            return;\n                        }\n                    }\n                    enqueueUpgradeReaction(element, definition);\n                }\n            });\n            // 16. when-defined promise map\n            // TODO: impl\n        }\n    }, {\n        key: 'get',\n        value: function get(name) {\n            var privateState = getPrivateState(this);\n            for (var i = 0; i < privateState.definitions.length; i++) {\n                var definition = privateState.definitions[i];\n                if (definition.name === name) {\n                    return definition.constructor;\n                }\n            }\n            return undefined;\n        }\n    }, {\n        key: 'whenDefined',\n        value: function whenDefined(name) {\n            // TODO: impl\n            throw new Error('Not implemented yet');\n        }\n    }]);\n\n    return CustomElementRegistry;\n}();\n\nfunction upgradeElement(element, definition) {\n    // https://html.spec.whatwg.org/multipage/scripting.html#concept-upgrade-an-element\n    var elementState = getPrivateState(element) || setPrivateState(element, { reactionQueue: [] });\n    if (elementState.customElementState === 'custom' || elementState.customElementState === 'failed') {\n        return;\n    }\n    var attributes = element.attributes;\n    for (var i = 0; i < attributes.length; i++) {\n        var attribute = attributes[i];\n        var _args = [attribute.localName, null, attribute.value, attribute.namespaceURI];\n        enqueueCallbackReaction(element, 'attributeChangedCallback', _args);\n    }\n    if (element.isConnected) {\n        enqueueCallbackReaction(element, 'connectedCallback', []);\n    }\n    definition.constructionStack.push(element);\n    var caught = null;\n    try {\n        var constructResult = new definition.constructor();\n        if (constructResult !== element) {\n            throw makeDOMException('InvalidStateError');\n        }\n    } catch (error) {\n        caught = error;\n        delete element.prototype;\n        elementState.customElementState = 'failed';\n        elementState.reactionQueue.splice(0, elementState.reactionQueue.length);\n    }\n    definition.constructionStack.pop();\n    if (caught) {\n        throw caught;\n    }\n    elementState.customElementState = 'custom';\n    elementState.customElementDefinition = definition;\n}\n\nfunction tryToUpgradeElement(element) {\n    var elementState = getPrivateState(element);\n    var isValue = null;\n    if (elementState) {\n        isValue = elementState.isValue;\n    }\n    var definition = lookupCustomElementDefinition(element.ownerDocument, element.namespaceURI, element.localName, isValue);\n    if (definition) {\n        enqueueUpgradeReaction(element, definition);\n    }\n}\n\nfunction enqueueElementOnAppropriateElementQueue(element) {\n    var installation = getInstallation(window);\n    if (!installation) {\n        return;\n    }\n    // https://html.spec.whatwg.org/multipage/scripting.html#enqueue-an-element-on-the-appropriate-element-queue\n    // 1. If the custom element reactions stack is empty, then:\n    var stack = installation.customElementsReactionStack;\n    if (stack.length === 0) {\n        // 1. Add element to the backup element queue.\n        installation.backupElementQueue.push(element);\n        // 2. If the processing the backup element queue flag is set, abort this algorithm.\n        if (installation.processingBackupElementQueue) {\n            return;\n        }\n        // 3. Set the processing the backup element queue flag.\n        installation.processingBackupElementQueue = true;\n        // 4. Queue a microtask to perform the following steps:\n        setImmediate(function () {\n            // 1. Invoke custom element reactions in the backup element queue.\n            invokeReactions(installation.backupElementQueue);\n            // 2. Unset the processing the backup element queue flag.\n            installation.processingBackupElementQueue = false;\n        });\n    }\n    // 2. Otherwise, add element to the current element queue.\n    else {\n            stack[stack.length - 1].push(element);\n        }\n}\n\nfunction enqueueCallbackReaction(element, callbackName, args) {\n    // https://html.spec.whatwg.org/multipage/scripting.html#enqueue-a-custom-element-callback-reaction\n    var elementState = getPrivateState(element);\n    var definition = elementState.customElementDefinition;\n    var callback = definition.lifecycleCallbacks[callbackName];\n    if (callback == null) {\n        return;\n    }\n    if (callbackName === 'attributeChangedCallback') {\n        var attributeName = args[0];\n        if (definition.observedAttributes.indexOf(attributeName) === -1) {\n            return;\n        }\n    }\n    if (!elementState.reactionQueue) {\n        elementState.reactionQueue = [];\n    }\n    elementState.reactionQueue.push({ type: callbackReactionType, callback: callback, args: args });\n    enqueueElementOnAppropriateElementQueue(element);\n}\n\nfunction enqueueUpgradeReaction(element, definition) {\n    // https://html.spec.whatwg.org/multipage/scripting.html#enqueue-a-custom-element-upgrade-reaction\n    var elementState = getPrivateState(element) || setPrivateState(element, { reactionQueue: [] });\n    elementState.customElementDefinition = definition;\n    elementState.reactionQueue.push({ type: upgradeReactionType, definition: definition });\n    enqueueElementOnAppropriateElementQueue(element);\n}\n\nfunction invokeReactions(queue) {\n    // https://html.spec.whatwg.org/multipage/scripting.html#invoke-custom-element-reactions\n    for (var i = 0; i < queue.length; i++) {\n        var _element2 = queue[i];\n        var reactions = getPrivateState(_element2).reactionQueue;\n        while (reactions.length) {\n            try {\n                var _reactions$splice = reactions.splice(0, 1),\n                    _reactions$splice2 = _slicedToArray(_reactions$splice, 1),\n                    reaction = _reactions$splice2[0];\n\n                switch (reaction.type) {\n                    case upgradeReactionType:\n                        upgradeElement(_element2, reaction.definition);\n                        break;\n                    case callbackReactionType:\n                        reaction.callback.apply(_element2, reaction.args);\n                        break;\n                }\n            } catch (error) {\n                reportError(error);\n            }\n        }\n    }\n}\n\nfunction executeCEReactions(callback) {\n    var installation = getInstallation(window);\n    if (installation) {\n        var stack = installation.customElementsReactionStack;\n        stack.push([]);\n        var result = callback();\n        invokeReactions(stack.pop());\n        return result;\n    }\n    return callback();\n}\n\n// Utility functions\n\nfunction makeDOMException(name, message) {\n    try {\n        var sacrifice = originalCreateElement.call(window.document, 'div');\n        descriptors.Node.appendChild.call(sacrifice, sacrifice);\n    } catch (error) {\n        error.message = message;\n        error.name = name;\n        return error;\n    }\n}\n\nfunction getCallback(prototype, callbackName) {\n    var callback = prototype[callbackName];\n    if (callback && typeof callback === 'function') {\n        return callback;\n    }\n    return null;\n}\n\nfunction getPrivateState(object) {\n    return object._custom;\n}\n\nfunction setPrivateState(object, state) {\n    return object._custom = state;\n}\n\nfunction getInstallation(window) {\n    return window._custom;\n}\n\nfunction setInstallation(window, installation) {\n    window._custom = installation;\n}\n\nfunction treeOrderShadowInclusiveForEach(node, callback) {\n    callback(node);\n    var shadowRoot = node.shadowRoot;\n    if (shadowRoot) {\n        treeOrderShadowInclusiveForEach(shadowRoot, callback);\n    }\n    var childNodes = node.childNodes;\n    for (var i = 0; i < childNodes.length; i++) {\n        treeOrderShadowInclusiveForEach(childNodes[i], callback);\n    }\n}\n\nfunction reportError(error) {\n    if ('console' in window && 'error' in window.console) {\n        window.console.error(error);\n    }\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-attr\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'value',\n        get: function get() {\n            return $.descriptors.Attr.value.get.call(this);\n        },\n        set: function set(value) {\n            var _this = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                $.setExistingAttributeValue(_this, value);\n            });\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-characterdata\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar getData = $.descriptors.CharacterData.data.get;\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'appendData',\n        value: function appendData(data) {\n            var length = getData.call(this).length;\n            $.replaceData(this, length, 0, data);\n        }\n    }, {\n        key: 'insertData',\n        value: function insertData(offset, data) {\n            $.replaceData(this, offset, 0, data);\n        }\n    }, {\n        key: 'deleteData',\n        value: function deleteData(offset, count) {\n            $.replaceData(this, offset, count, '');\n        }\n    }, {\n        key: 'replaceData',\n        value: function replaceData(offset, count, data) {\n            $.replaceData(this, offset, count, data);\n        }\n    }, {\n        key: 'data',\n        get: function get() {\n            return getData.call(this);\n        },\n        set: function set(value) {\n            var length = getData.call(this).length;\n            $.replaceData(this, 0, length, value);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } // https://dom.spec.whatwg.org/#interface-customevent\n\nvar _class = function _class(type, init) {\n    _classCallCheck(this, _class);\n\n    var bubbles = false;\n    var cancelable = false;\n    var composed = false;\n    var detail = null;\n    if (init) {\n        bubbles = init.bubbles === true;\n        cancelable = init.cancelable === true;\n        composed = init.composed === true;\n        detail = init.detail || null;\n    }\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, bubbles, cancelable, detail);\n    $.setShadowState(event, { composed: composed });\n    return event;\n};\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-domtokenlist\n\nexports.getOrCreateDOMTokenList = getOrCreateDOMTokenList;\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'item',\n\n\n        // TODO: Caveat about indexer expressions?\n        value: function item(index) {\n            var state = $.getShadowState(this);\n            return index >= state.tokens.length ? null : state.tokens[index];\n        }\n    }, {\n        key: 'contains',\n        value: function contains(token) {\n            var state = $.getShadowState(this);\n            return state.tokens.indexOf(token) !== -1;\n        }\n    }, {\n        key: 'add',\n        value: function add() {\n            var _this = this;\n\n            for (var _len = arguments.length, tokens = Array(_len), _key = 0; _key < _len; _key++) {\n                tokens[_key] = arguments[_key];\n            }\n\n            return _customElements2.default.executeCEReactions(function () {\n                validateTokens(tokens);\n                var state = $.getShadowState(_this);\n                for (var i = 0; i < tokens.length; i++) {\n                    var token = tokens[i];\n                    var index = state.tokens.indexOf(token);\n                    if (index === -1) {\n                        state.tokens.push(token);\n                    }\n                }\n                state.tokens.sort();\n                $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n            });\n        }\n    }, {\n        key: 'remove',\n        value: function remove() {\n            var _this2 = this;\n\n            for (var _len2 = arguments.length, tokens = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                tokens[_key2] = arguments[_key2];\n            }\n\n            return _customElements2.default.executeCEReactions(function () {\n                validateTokens(tokens);\n                var state = $.getShadowState(_this2);\n                for (var i = 0; i < tokens.length; i++) {\n                    var token = tokens[i];\n                    var index = state.tokens.indexOf(token);\n                    if (index !== -1) {\n                        state.tokens.splice(index, 1);\n                    }\n                }\n                $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n            });\n        }\n    }, {\n        key: 'toggle',\n        value: function toggle(token, force) {\n            var _this3 = this,\n                _arguments = arguments;\n\n            return _customElements2.default.executeCEReactions(function () {\n                validateToken(token);\n                var state = $.getShadowState(_this3);\n                var index = state.tokens.indexOf(token);\n                if (index !== -1) {\n                    if (_arguments.length === 1 || force === false) {\n                        state.tokens.splice(index, 1);\n                        $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n                        return false;\n                    } else {\n                        return true;\n                    }\n                } else {\n                    if (force === false) {\n                        return false;\n                    } else {\n                        state.tokens.push(token);\n                        state.tokens.sort();\n                        $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n                        return true;\n                    }\n                }\n            });\n        }\n    }, {\n        key: 'replace',\n        value: function replace(token, newToken) {\n            var _this4 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                validateToken(token);\n                validateToken(newToken);\n                var state = $.getShadowState(_this4);\n                var index = state.tokens.indexOf(token);\n                if (index === -1) {\n                    return;\n                }\n                state.tokens[index] = newToken;\n                state.tokens.sort();\n                $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n            });\n        }\n    }, {\n        key: 'length',\n        get: function get() {\n            var state = $.getShadowState(this);\n            return state.tokens.length;\n        }\n    }, {\n        key: 'value',\n        get: function get() {\n            var state = $.getShadowState(this);\n            return state.element.getAttribute(state.localName) || '';\n        },\n        set: function set(value) {\n            var _this5 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                var state = $.getShadowState(_this5);\n                $.setAttributeValue(state.element, state.localName, value);\n                state.tokens = $.slice(_this5);\n            });\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;\n\n\nfunction validateTokens(tokens) {\n    for (var i = 0; i < tokens.length; i++) {\n        validateToken(tokens[i]);\n    }\n}\n\nfunction validateToken(token) {\n    if (token == '') {\n        throw $.makeError('SyntaxError');\n    }\n    if (/\\s/.test(token)) {\n        throw $.makeError('InvalidCharacterError');\n    }\n}\n\nfunction createDOMTokenList(element, localName) {\n    // TODO: run the steps per the DOM spec for 'when a DOMTokenList is created'\n    var originalValue = element.getAttribute(localName);\n    var tokens = originalValue ? originalValue.split(/\\s/).sort() : [];\n    var tokenList = Object.create(DOMTokenList.prototype);\n    $.setShadowState(tokenList, { element: element, localName: localName, tokens: tokens });\n    return tokenList;\n}\n\nfunction getOrCreateDOMTokenList(element, localName) {\n    var elementState = $.getShadowState(element) || $.setShadowState(element, { tokenLists: {} });\n    if (!elementState.tokenLists) {\n        elementState.tokenLists = {};\n    }\n    var tokenList = void 0;\n    if (tokenList = elementState.tokenLists[localName]) {\n        return tokenList;\n    }\n    return elementState.tokenLists[localName] = createDOMTokenList(element, localName);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-document\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'getElementsByTagName',\n\n\n        // TODO: tests\n        value: function getElementsByTagName(qualifiedName) {\n            var results = $.descriptors.Document.getElementsByTagName.value.call(this, qualifiedName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByTagNameNS',\n        value: function getElementsByTagNameNS(ns, localName) {\n            var results = $.descriptors.Document.getElementsByTagNameNS.value.call(this, ns, localName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByClassName',\n        value: function getElementsByClassName(names) {\n            var results = $.descriptors.Document.getElementsByClassName.value.call(this, name);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'importNode',\n        value: function importNode(node, deep) {\n            var _this = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                if (node.nodeType === Node.DOCUMENT_NODE || $.isShadowRoot(node)) {\n                    throw $.makeError('NotSupportedError');\n                }\n\n                return $.clone(node, _this, deep);\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'adoptNode',\n        value: function adoptNode(node) {\n            var _this2 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                return $.adopt(node, _this2);\n            });\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nvar _ShadowRoot = require('../interfaces/ShadowRoot.js');\n\nvar _ShadowRoot2 = _interopRequireDefault(_ShadowRoot);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'setAttribute',\n\n\n        // TODO: tests\n        value: function setAttribute(qualifiedName, value) {\n            var _this = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                var attribute = $.descriptors.Element.attributes.get.call(_this).getNamedItem(qualifiedName);\n                if (!attribute) {\n                    attribute = _this.ownerDocument.createAttribute(qualifiedName);\n                    $.descriptors.Attr.value.set.call(attribute, value);\n                    $.appendAttribute(attribute, _this);\n                    return;\n                }\n                $.changeAttribute(attribute, _this, value);\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'setAttributeNS',\n        value: function setAttributeNS(namespace, qualifiedName, value) {\n            var _this2 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                var dummy = document.createAttributeNS(namespace, qualifiedName);\n                $.setAttributeValue(_this2, dummy.localName, value, dummy.prefix, dummy.namespaceURI);\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeAttribute',\n        value: function removeAttribute(qualifiedName) {\n            var _this3 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                $.removeAttributeByName(qualifiedName, _this3);\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeAttributeNS',\n        value: function removeAttributeNS(namespace, localName) {\n            var _this4 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                $.removeAttributeByNamespace(namespace, localName, _this4);\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'setAttributeNode',\n        value: function setAttributeNode(attr) {\n            var _this5 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                return $.setAttribute(attr, _this5);\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'setAttributeNodeNS',\n        value: function setAttributeNodeNS(attr) {\n            var _this6 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                return $.setAttribute(attr, _this6);\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeAttributeNode',\n        value: function removeAttributeNode(attr) {\n            var _this7 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                if (attr.ownerElement !== _this7) {\n                    throw $.makeError('NotFoundError');\n                }\n                $.removeAttribute(attr, _this7);\n                return attr;\n            });\n        }\n    }, {\n        key: 'attachShadow',\n        value: function attachShadow(init) {\n            // https://dom.spec.whatwg.org/#dom-element-attachshadow\n            if (!init || init.mode !== 'open' && init.mode !== 'closed') {\n                throw $.makeError('TypeError');\n            }\n\n            if (this.namespaceURI !== 'http://www.w3.org/1999/xhtml') {\n                throw $.makeError('NotSupportedError');\n            }\n\n            switch (this.localName) {\n                case \"article\":case \"aside\":case \"blockquote\":case \"body\":\n                case \"div\":case \"footer\":case \"h1\":case \"h2\":case \"h3\":\n                case \"h4\":case \"h5\":case \"h6\":case \"header\":case \"main\":\n                case \"nav\":case \"p\":case \"section\":case \"span\":\n                    break;\n                default:\n                    if (_customElements2.default.isValidCustomElementName(this.localName)) {\n                        break;\n                    }\n                    throw $.makeError('NotSupportedError');\n            }\n\n            if (this.shadowRoot) {\n                throw $.makeError('InvalidStateError');\n            }\n\n            var shadow = this.ownerDocument.createDocumentFragment();\n\n            $.extend(shadow, _ShadowRoot2.default);\n\n            $.setShadowState(shadow, {\n                host: this,\n                mode: init.mode,\n                childNodes: []\n            });\n\n            var originalChildNodes = $.descriptors.Node.childNodes.get.call(this);\n            var removeChild = $.descriptors.Node.removeChild.value;\n            var savedChildNodes = new Array(originalChildNodes.length);\n            var firstChild = void 0;\n            var i = 0;\n            while (firstChild = originalChildNodes[0]) {\n                var childState = $.getShadowState(firstChild) || $.setShadowState(firstChild, {});\n                childState.parentNode = this;\n                savedChildNodes[i++] = firstChild;\n                removeChild.call(this, firstChild);\n            }\n\n            var hostState = $.getShadowState(this);\n            if (!hostState) {\n                hostState = {};\n                $.setShadowState(this, hostState);\n            }\n            hostState.shadowRoot = shadow;\n            hostState.childNodes = savedChildNodes;\n\n            return shadow;\n        }\n    }, {\n        key: 'closest',\n\n\n        // TODO: tests\n        value: function closest(selectors) {\n            var element = this;\n\n            do {\n                if (element.matches(selectors)) {\n                    return element;\n                }\n            } while (element = element.parentElement);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByTagName',\n        value: function getElementsByTagName(qualifiedName) {\n            var results = $.descriptors.Element.getElementsByTagName.value.call(this, qualifiedName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByTagNameNS',\n        value: function getElementsByTagNameNS(ns, localName) {\n            var results = $.descriptors.Element.getElementsByTagNameNS.value.call(this, ns, localName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByClassName',\n        value: function getElementsByClassName(names) {\n            var results = $.descriptors.Element.getElementsByClassName.value.call(this, name);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'insertAdjacentElement',\n        value: function insertAdjacentElement(where, element) {\n            var _this8 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://dom.spec.whatwg.org/#dom-element-insertadjacentelement\n                return $.insertAdjacent(_this8, where, element);\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'insertAdjacentText',\n        value: function insertAdjacentText(where, data) {\n            // https://dom.spec.whatwg.org/#dom-element-insertadjacenttext\n            var text = this.ownerDocument.createTextNode(data);\n            $.insertAdjacent(this, where, text);\n            return;\n        }\n\n        // https://w3c.github.io/DOM-Parsing/#extensions-to-the-element-interface\n\n        // TODO: more thorough tests of the serialization\n\n    }, {\n        key: 'insertAdjacentHTML',\n\n\n        // TODO: tests\n        value: function insertAdjacentHTML(position, text) {\n            var _this9 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://w3c.github.io/DOM-Parsing/#dom-element-insertadjacenthtml\n                // We aren't going to go exactly by the books for this one.\n                var fragment = $.parseHTMLFragment(text, _this9);\n                $.insertAdjacent(_this9, position, fragment);\n            });\n        }\n    }, {\n        key: 'attributes',\n\n\n        // TODO: tests\n        get: function get() {\n            var attributes = $.descriptors.Element.attributes.get.call(this);\n            var shadowState = $.getShadowState(attributes);\n            if (!shadowState) {\n                $.setShadowState(attributes, { element: this });\n            }\n            return attributes;\n        }\n    }, {\n        key: 'shadowRoot',\n        get: function get() {\n            // https://dom.spec.whatwg.org/#dom-element-shadowroot\n            var shadowRoot = null;\n            var shadowState = $.getShadowState(this);\n            if (shadowState) {\n                shadowRoot = shadowState.shadowRoot;\n                if (!shadowRoot || shadowRoot.mode === 'closed') {\n                    return null;\n                }\n            }\n            return shadowRoot;\n        }\n    }, {\n        key: 'innerHTML',\n        get: function get() {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-innerhtml\n            return $.serializeHTMLFragment(this);\n        }\n\n        // TODO: MutationObserver tests\n        ,\n        set: function set(value) {\n            var _this10 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://w3c.github.io/DOM-Parsing/#dom-element-innerhtml\n                var fragment = $.parseHTMLFragment(value, _this10);\n                var content = _this10['content'];\n                if (content instanceof DocumentFragment) {\n                    $.replaceAll(fragment, content);\n                } else {\n                    $.replaceAll(fragment, _this10);\n                }\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'outerHTML',\n        get: function get() {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-outerhtml\n            return $.serializeHTMLFragment({ childNodes: [this] });\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            var _this11 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://w3c.github.io/DOM-Parsing/#dom-element-outerhtml\n                var parent = _this11.parentNode;\n                if (parent === null) {\n                    return;\n                }\n                if (parent.nodeType === Node.DOCUMENT_NODE) {\n                    throw $.makeError('NoModificationAllowedError');\n                }\n                if (parent.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n                    parent = _this11.ownerDocument.createElement('body');\n                }\n                var fragment = $.parseHTMLFragment(value, parent);\n                $.replace(_this11, fragment, _this11.parentNode);\n            });\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.hasRelatedTarget = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-event\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class(type, init) {\n        _classCallCheck(this, _class);\n\n        var bubbles = false;\n        var cancelable = false;\n        var composed = false;\n        if (init) {\n            bubbles = init.bubbles === true;\n            cancelable = init.cancelable === true;\n            composed = init.composed === true;\n        }\n        var event = document.createEvent('event');\n        event.initEvent(type, bubbles, cancelable);\n        $.setShadowState(event, { composed: composed });\n        return event;\n    }\n\n    _createClass(_class, [{\n        key: 'stopImmediatePropagation',\n        value: function stopImmediatePropagation() {\n            this.stopPropagation();\n            $.getShadowState(this).stopImmediatePropagationFlag = true;\n        }\n    }, {\n        key: 'composedPath',\n        value: function composedPath() {\n            // https://dom.spec.whatwg.org/#dom-event-composedpath\n\n            // 1. Let composedPath be a new empty list.\n            var composedPath = [];\n\n            // 2. Let currentTarget be context object’s currentTarget attribute value.\n            var currentTarget = this.currentTarget;\n\n            // 3. For each tuple in context object’s path:\n            var path = $.getShadowState(this).path;\n\n            if (path) {\n                var c = 0;\n                for (var i = 0; i < path.length; i++) {\n                    var item = path[i][0];\n                    if (currentTarget instanceof Window) {\n                        if (!(item instanceof Node) || !$.closedShadowHidden(item, $.shadowIncludingRoot(item))) {\n                            composedPath[c++] = item;\n                        }\n                    } else if (currentTarget instanceof Node) {\n                        if (!$.closedShadowHidden(item, currentTarget)) {\n                            composedPath[c++] = item;\n                        }\n                    } else {\n                        composedPath[c++] = item;\n                    }\n                }\n            }\n\n            // 4. return composedPath.\n            return composedPath;\n        }\n    }, {\n        key: 'currentTarget',\n        get: function get() {\n            return $.getShadowState(this).currentTarget;\n        }\n    }, {\n        key: 'target',\n        get: function get() {\n            return $.getShadowState(this).target;\n        }\n    }, {\n        key: 'composed',\n        get: function get() {\n            // TODO: Compare against the actual prototype instead of just the type strings\n            return $.getShadowState(this).composed || builtInComposedEvents.indexOf(this.type) !== -1;\n        }\n    }]);\n\n    return _class;\n}();\n\n// FocusEvent:\n// relatedTarget will be the element losing or gaining focus\n// MouseEvent:\n// relatedTarget will be the element being moved into or out of\n\n\nexports.default = _class;\n\nvar hasRelatedTarget = exports.hasRelatedTarget = function () {\n    function hasRelatedTarget() {\n        _classCallCheck(this, hasRelatedTarget);\n    }\n\n    _createClass(hasRelatedTarget, [{\n        key: 'relatedTarget',\n        get: function get() {\n            return $.getShadowState(this).relatedTarget;\n        }\n    }]);\n\n    return hasRelatedTarget;\n}();\n\n;\n\nvar builtInComposedEvents = [\n// FocusEvent\n'blur', 'focus', 'focusin', 'focusout',\n// MouseEvent\n'click', 'dblclick', 'mousedown', 'mouseenter', 'mouseleave', 'mousemove', 'mouseout', 'mouseover', 'mouseup',\n// WheelEvent\n'wheel',\n// InputEvent\n'beforeinput', 'input',\n// KeyboardEvent\n'keydown', 'keyup',\n// CompositionEvent\n'compositionstart', 'compositionupdate', 'compositionend',\n// Legacy UIEvent\n'DOMActivate',\n// Legacy FocusEvent\n'DOMFocusIn', 'DOMFocusOut',\n// Legacy KeyboardEvent\n'keypress'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-eventtarget\n\nexports.default = function (base) {\n\n    var native = {\n        addEventListener: base.prototype.addEventListener,\n        removeEventListener: base.prototype.removeEventListener,\n        dispatchEvent: base.prototype.dispatchEvent\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'addEventListener',\n            value: function addEventListener(type, callback, options) {\n                if (typeof callback !== 'function') {\n                    return;\n                }\n\n                var listener = { callback: callback };\n                var capture = false;\n\n                if (typeof options === 'boolean') {\n                    capture = options;\n                } else if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n                    capture = options.capture === true;\n                    listener.once = options.once === true;\n                    // we don't do anything with passive.\n                    listener.passive = options.passive === true;\n                }\n\n                var collection = EventListenerCollection.get(this, type, capture) || EventListenerCollection.create(this, type, capture);\n\n                collection.addListener(this, listener);\n                collection.attach(native.addEventListener);\n            }\n        }, {\n            key: 'removeEventListener',\n            value: function removeEventListener(type, callback, options) {\n                if (typeof callback !== 'function') {\n                    return;\n                }\n\n                var listener = { callback: callback };\n                var capture = false;\n\n                if (typeof options === 'boolean') {\n                    capture = options;\n                } else if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n                    capture = options.capture === true;\n                }\n\n                var collection = EventListenerCollection.get(this, type, capture);\n\n                if (!collection) {\n                    return;\n                }\n\n                collection.removeListener(this, listener);\n\n                if (collection.empty) {\n                    collection.detach(native.removeEventListener);\n                }\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar EventListenerCollection = function () {\n    _createClass(EventListenerCollection, null, [{\n        key: 'get',\n        value: function get(target, type, capture) {\n            var targetState = $.getShadowState(target);\n            var nativeTarget = target;\n            var nativeTargetState = targetState;\n            if (targetState && targetState.host) {\n                nativeTarget = targetState.host;\n                nativeTargetState = $.getShadowState(nativeTarget);\n            }\n            if (!nativeTargetState || !nativeTargetState.listeners) {\n                return null;\n            }\n            var collections = nativeTargetState.listeners;\n            for (var i = 0; i < collections.length; i++) {\n                var collection = collections[i];\n                if (collection.target === nativeTarget && collection.type === type && collection.capture === capture) {\n                    return collection;\n                }\n            }\n            return null;\n        }\n    }, {\n        key: 'create',\n        value: function create(target, type, capture) {\n            var targetState = $.getShadowState(target);\n            var nativeTarget = target;\n            var nativeTargetState = targetState;\n            if (targetState && targetState.host) {\n                nativeTarget = targetState.host;\n                nativeTargetState = $.getShadowState(nativeTarget);\n            }\n            if (!nativeTargetState) {\n                nativeTargetState = $.setShadowState(nativeTarget, { listeners: [] });\n            } else if (!nativeTargetState.listeners) {\n                nativeTargetState.listeners = [];\n            }\n            var collection = new EventListenerCollection(nativeTarget, type, capture);\n            nativeTargetState.listeners.push(collection);\n            return collection;\n        }\n    }]);\n\n    function EventListenerCollection(target, type, capture) {\n        var _this = this;\n\n        _classCallCheck(this, EventListenerCollection);\n\n        this.target = target;\n        this.type = type;\n        this.capture = capture;\n\n        this.hostListeners = [];\n        this.shadowListeners = [];\n\n        this.callback = function (event) {\n            var shadowRoot = null;\n            var targetState = $.getShadowState(target);\n            if (targetState) {\n                shadowRoot = targetState.shadowRoot;\n            }\n            switch (event.eventPhase) {\n                case Event.prototype.CAPTURING_PHASE:\n                    _this.invokeListeners(event, _this.target, _this.hostListeners);\n                    if (shadowRoot) {\n                        _this.invokeListeners(event, shadowRoot, _this.shadowListeners);\n                    }\n                    break;\n                case Event.prototype.AT_TARGET:\n                    var nativeTarget = $.descriptors.Event.target.get.call(event);\n                    _this.invokeListeners(event, nativeTarget, _this.getListeners(nativeTarget));\n                    break;\n                case Event.prototype.BUBBLING_PHASE:\n                    if (shadowRoot) {\n                        _this.invokeListeners(event, shadowRoot, _this.shadowListeners);\n                    }\n                    _this.invokeListeners(event, _this.target, _this.hostListeners);\n                    break;\n            }\n        };\n    }\n\n    _createClass(EventListenerCollection, [{\n        key: 'getListeners',\n        value: function getListeners(target) {\n            var targetState = $.getShadowState(target);\n            if (targetState && targetState.host) {\n                return this.shadowListeners;\n            }\n            return this.hostListeners;\n        }\n    }, {\n        key: 'addListener',\n        value: function addListener(target, listener) {\n            var listeners = this.getListeners(target);\n\n            for (var i = 0; i < listeners.length; i++) {\n                if (listener.callback === listeners[i].callback) {\n                    return;\n                }\n            }\n\n            listeners.push(listener);\n        }\n    }, {\n        key: 'removeListener',\n        value: function removeListener(target, listener) {\n            var listeners = this.getListeners(target);\n\n            for (var i = 0; i < listeners.length; i++) {\n                var other = listeners[i];\n                if (listener.callback === other.callback) {\n                    listeners.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    }, {\n        key: 'invokeListeners',\n        value: function invokeListeners(event, currentTarget, listeners) {\n            var eventState = $.getShadowState(event) || $.setShadowState(event, {});\n            var path = eventState.calculatedPath;\n            if (!path) {\n                path = eventState.calculatedPath = calculatePath(event);\n            }\n            // if there is no target, the event is not composed and should be stopped\n            var target = calculateTarget(currentTarget, path);\n            if (!target) {\n                event.stopImmediatePropagation();\n            } else {\n                var relatedTarget = calculateRelatedTarget(currentTarget, path);\n                var remove = void 0;\n\n                eventState.path = path;\n                eventState.currentTarget = currentTarget;\n                eventState.target = target;\n                eventState.relatedTarget = relatedTarget;\n\n                for (var i = 0; i < listeners.length; i++) {\n                    var listener = listeners[i];\n                    var result = listener.callback.call(currentTarget, event);\n                    if (listener.once) {\n                        if (!remove) {\n                            remove = [listener];\n                        } else {\n                            remove.push[listener];\n                        }\n                    }\n                    if (eventState.stopImmediatePropagationFlag) {\n                        break;\n                    }\n                }\n\n                eventState.path = null;\n                eventState.currentTarget = null;\n\n                if (remove) {\n                    for (var _i = 0; _i < remove.length; _i++) {\n                        var index = listeners.indexOf(remove[_i]);\n                        listeners.splice(index, 1);\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'attach',\n        value: function attach(descriptor) {\n            descriptor.call(this.target, this.type, this.callback, this.capture);\n        }\n    }, {\n        key: 'detach',\n        value: function detach(descriptor) {\n            descriptor.call(this.target, this.type, this.callback, this.capture);\n        }\n    }, {\n        key: 'empty',\n        get: function get() {\n            return this.hostListeners.length === 0 && this.shadowListeners.length === 0;\n        }\n    }]);\n\n    return EventListenerCollection;\n}();\n\nfunction calculatePath(event) {\n    // https://dom.spec.whatwg.org/#concept-event-dispatch\n\n    var path = [];\n    var p = 0;\n\n    var target = $.descriptors.Event.target.get.call(event);\n\n    var relatedTargetDescriptor = null;\n\n    if (event instanceof FocusEvent) {\n        relatedTargetDescriptor = $.descriptors.FocusEvent.relatedTarget;\n    } else if (event instanceof MouseEvent) {\n        relatedTargetDescriptor = $.descriptors.MouseEvent.relatedTarget;\n    }\n\n    // Skip (native)\n    // 1. Set event’s dispatch flag.\n\n    // 2. Let targetOverride be target, if legacy target override flag is \n    // not given, and target’s associated Document otherwise. \n    var targetOverride = target;\n\n    // 3. Let relatedTarget be the result of retargeting event’s relatedTarget \n    // against target if event’s relatedTarget is non-null, and null otherwise.\n    var originalRelatedTarget = null;\n    var relatedTarget = null;\n    if (relatedTargetDescriptor) {\n        originalRelatedTarget = relatedTargetDescriptor.get.call(event);\n        if (originalRelatedTarget) {\n            relatedTarget = $.retarget(originalRelatedTarget, target);\n        }\n    }\n\n    // Skip (native)\n    // 4. If target is relatedTarget and target is not event’s relatedTarget, then return true.\n\n    // 5. Append (target, targetOverride, relatedTarget) to event’s path.\n    path[p++] = [target, targetOverride, relatedTarget];\n\n    // Skip (native)\n    // 6. Let isActivationEvent be true, if event is a MouseEvent object and \n    // event’s type attribute is \"click\", and false otherwise.\n    // 7. Let activationTarget be target, if isActivationEvent is true and \n    //target has activation behavior, and null otherwise.\n\n    // 8. Let parent be the result of invoking target’s get the parent with event.\n    var parent = getTheParent(target, event, path);\n\n    // 9. While parent is non-null:\n    while (parent != null) {\n        // 1. Let relatedTarget be the result of retargeting event’s relatedTarget\n        // against parent if event’s relatedTarget is non-null, and null otherwise.\n        if (originalRelatedTarget) {\n            relatedTarget = $.retarget(originalRelatedTarget, parent);\n        }\n        // 2. If target’s root is a shadow-including inclusive ancestor of parent, then... \n        // append (parent, null, relatedTarget) to event’s path.\n        if ($.shadowIncludingInclusiveAncestor($.root(target), parent)) {\n            path[p++] = [parent, null, relatedTarget];\n            parent = getTheParent(parent, event, path);\n            continue;\n        }\n        // 3. Otherwise, if parent and relatedTarget are identical, then set parent to null.\n        else if (parent === relatedTarget) {\n                break;\n            }\n            // 4. Otherwise, set target to parent and then... \n            // append (parent, target, relatedTarget) to event’s path.\n            else {\n                    target = parent;\n                    path[p++] = [parent, target, relatedTarget];\n                    parent = getTheParent(parent, event, path);\n                    continue;\n                }\n        // 5. If parent is non-null, then set parent to the result of \n        // invoking parent’s get the parent with event.\n        // NOTE: This step was duplicated above to save some cycles.\n    }\n\n    return path;\n}\n\nfunction getTheParent(node, event, path) {\n    // https://dom.spec.whatwg.org/#get-the-parent\n    // Each EventTarget object also has an associated get the parent \n    // algorithm, which takes an event event, and returns an EventTarget \n    // object. Unless specified otherwise it returns null.\n\n    // A node’s get the parent algorithm, given an event, \n    // returns the node’s assigned slot, if node is assigned, \n    // and node’s parent otherwise.\n\n    // A document’s get the parent algorithm, given an event, returns null if event’s \n    // type attribute value is \"load\" or document does not have a browsing context, \n    // and the document’s associated Window object otherwise.\n\n    // A shadow root’s get the parent algorithm, given an event, returns null if \n    // event’s composed flag is unset and shadow root is the root of event’s \n    // path’s first tuple’s item, and shadow root’s host otherwise.\n\n    if (node instanceof Node) {\n        if (node.nodeType === Node.DOCUMENT_NODE) {\n            if (event.type === 'load') {\n                // or browsing context?\n                return null;\n            }\n            return node.defaultView;\n        } else if ($.isShadowRoot(node)) {\n            if (!event.composed) {\n                var _path$ = _slicedToArray(path[0], 1),\n                    item = _path$[0];\n\n                if ($.root(item) === node) {\n                    return null;\n                }\n            }\n            return node.host;\n        }\n        return node.assignedSlot || node.parentNode;\n    }\n\n    return null;\n}\n\nfunction calculateRelatedTarget(currentTarget, path) {\n    for (var i = 0; i < path.length; i++) {\n        var _path$i = _slicedToArray(path[i], 3),\n            item = _path$i[0],\n            relatedTarget = _path$i[2];\n\n        if (item === currentTarget) {\n            return relatedTarget;\n        }\n    }\n    return null;\n}\n\nfunction calculateTarget(currentTarget, path) {\n    for (var i = 0; i < path.length; i++) {\n        var _path$i2 = _slicedToArray(path[i], 1),\n            item = _path$i2[0];\n\n        if (item === currentTarget) {\n            for (var j = i; j >= 0; j--) {\n                var _path$j = _slicedToArray(path[j], 2),\n                    target = _path$j[1];\n\n                if (target != null) {\n                    return target;\n                }\n            }\n            return null;\n        }\n    }\n    return null;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://html.spec.whatwg.org/multipage/scripting.html#the-slot-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'assignedNodes',\n\n\n        // TODO: tests\n        value: function assignedNodes(options) {\n            if (this.localName !== 'slot') {\n                return;\n            }\n\n            // https://html.spec.whatwg.org/multipage/scripting.html#dom-slot-assignednodes\n            // The assignedNodes(options) method, when invoked, must run these steps:\n\n            // 1. If the value of options's flatten member is false, then return this element's assigned nodes.\n            if (!options || options.flatten !== true) {\n                var assignedNodes = null;\n                var shadowState = $.getShadowState(this);\n                if (shadowState) {\n                    assignedNodes = shadowState.assignedNodes;\n                }\n                return assignedNodes || [];\n            }\n\n            // 2. Return the result of finding flattened slotables with this element.\n            return $.findFlattenedSlotables(this);\n        }\n    }, {\n        key: 'name',\n\n\n        // TODO: tests\n        get: function get() {\n            if (this.localName !== 'slot') {\n                return;\n            }\n\n            return this.getAttribute('name');\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            if (this.localName !== 'slot') {\n                return;\n            }\n\n            $.setAttributeValue(this, 'name', value);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://www.w3.org/TR/html5/single-page.html#the-table-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'deleteCaption',\n\n\n        // TODO: tests\n        value: function deleteCaption() {\n            var caption = this.caption;\n            if (caption) {\n                $.remove(caption, this);\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'deleteTHead',\n        value: function deleteTHead() {\n            var tHead = this.tHead;\n            if (tHead) {\n                $.remove(tHead, this);\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'deleteTFoot',\n        value: function deleteTFoot() {\n            var tFoot = this.tFoot;\n            if (tFoot) {\n                $.remove(tFoot, this);\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'deleteRow',\n        value: function deleteRow(index) {\n            // https://www.w3.org/TR/html5/single-page.html#dom-table-deleterow\n            if (index === -1) {\n                index = this.rows.length - 1;\n            }\n            if (index < 0 || index >= this.rows.length) {\n                throw $.makeError('IndexSizeError');\n            }\n            this.rows[index].remove();\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://www.w3.org/TR/html5/single-page.html#the-tr-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'deleteCell',\n\n\n        // TODO: tests\n        value: function deleteCell(index) {\n            // https://www.w3.org/TR/html5/single-page.html#dom-tr-deletecell\n            if (index === -1) {\n                index = this.cells.length - 1;\n            }\n            if (index < 0 || index >= this.cells.length) {\n                throw $.makeError('IndexSizeError');\n            }\n            this.cells[index].remove();\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://www.w3.org/TR/html5/single-page.html#the-tbody-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'deleteRow',\n\n\n        // TODO: tests\n        value: function deleteRow(index) {\n            // https://www.w3.org/TR/html5/single-page.html#dom-tbody-deleterow\n            if (index < 0 || index >= this.rows.length) {\n                throw $.makeError('IndexSizeError');\n            }\n            this.rows[index].remove();\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-mutationobserver\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class(callback) {\n        _classCallCheck(this, _class);\n\n        var observer = $.createMutationObserver(callback);\n        $.setShadowState(this, { observer: observer });\n        observer.interface = this;\n    }\n\n    _createClass(_class, [{\n        key: 'observe',\n        value: function observe(target, options) {\n            $.getShadowState(this).observer.observe(target, options);\n        }\n    }, {\n        key: 'disconnect',\n        value: function disconnect() {\n            $.getShadowState(this).observer.disconnect();\n        }\n    }, {\n        key: 'takeRecords',\n        value: function takeRecords() {\n            var records = $.getShadowState(this).observer.queue;\n            return records.splice(0, records.length);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-namednodemap\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'setNamedItem',\n\n\n        // TODO: tests\n        value: function setNamedItem(attr) {\n            var _this = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                var shadowState = $.getShadowState(_this);\n                return $.setAttribute(attr, shadowState.element);\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'setNamedItemNS',\n        value: function setNamedItemNS(attr) {\n            var _this2 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                var shadowState = $.getShadowState(_this2);\n                return $.setAttribute(attr, shadowState.element);\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeNamedItem',\n        value: function removeNamedItem(qualifiedName) {\n            var _this3 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                var shadowState = $.getShadowState(_this3);\n                var attr = $.removeAttributeByName(qualifiedName, shadowState.element);\n                if (!attr) {\n                    throw $.makeError('NotFoundError');\n                }\n                return attr;\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeNamedItemNS',\n        value: function removeNamedItemNS(namespace, localName) {\n            var _this4 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                var shadowState = $.getShadowState(_this4);\n                var attr = $.removeAttributeByNamespace(namespace, localName, shadowState.element);\n                if (!attr) {\n                    throw $.makeError('NotFoundError');\n                }\n                return attr;\n            });\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-node\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'getRootNode',\n        value: function getRootNode(options) {\n            var composed = options && options.composed === true;\n            return composed ? $.shadowIncludingRoot(this) : $.root(this);\n        }\n    }, {\n        key: 'hasChildNodes',\n\n\n        // TODO: tests\n        value: function hasChildNodes() {\n            var nodeState = $.getShadowState(this);\n            if (nodeState) {\n                var childNodes = nodeState.childNodes;\n                if (childNodes) {\n                    return childNodes.length > 0;\n                }\n            }\n\n            return $.descriptors.Node.hasChildNodes.value.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'normalize',\n\n\n        // TODO: tests\n        value: function normalize() {\n            var _this = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://dom.spec.whatwg.org/#dom-node-normalize\n                // The normalize() method, when invoked, must run these steps \n                // for each descendant exclusive Text node node of context object:\n                var childNodes = _this.childNodes;\n                var dataDescriptor = $.descriptors.CharacterData.data;\n                for (var i = 0; i < childNodes.length; i++) {\n                    var childNode = childNodes[i];\n                    if (childNode.nodeType === Node.TEXT_NODE) {\n                        var length = dataDescriptor.get.call(childNode).length;\n                        if (length === 0) {\n                            $.remove(childNode, _this);\n                            continue;\n                        }\n                        var data = '';\n                        var contiguousTextNodes = new Array(childNodes.length);\n                        var contiguousCount = 0;\n                        var next = childNode;\n                        while (next = next.nextSibling && next.nodeType === Node.TEXT_NODE) {\n                            data += dataDescriptor.get.call(next);\n                            contiguousTextNodes[contiguousCount++] = next;\n                        }\n                        $.replaceData(childNode, length, 0, data);\n                        // TODO: (Range)\n                        for (var j = 0; j < contiguousCount; j++) {\n                            $.remove(contiguousTextNodes[j], _this);\n                        }\n                    } else {\n                        childNode.normalize();\n                    }\n                }\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'cloneNode',\n        value: function cloneNode(deep) {\n            var _this2 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://dom.spec.whatwg.org/#dom-node-clonenode\n                // The cloneNode(deep) method, when invoked, must run these steps:\n\n                // 1. If context object is a shadow root, then throw a NotSupportedError.\n                if ($.isShadowRoot(_this2)) {\n                    throw $.makeError('NotSupportedError');\n                }\n\n                // 2. Return a clone of the context object, with the clone children flag set if deep is true.\n                return $.clone(_this2, undefined, deep);\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'isEqualNode',\n        value: function isEqualNode(other) {\n            // https://dom.spec.whatwg.org/#dom-node-isequalnode\n            // https://dom.spec.whatwg.org/#concept-node-equals\n            if (!other) {\n                return false;\n            }\n\n            if (this.nodeType !== other.nodeType) {\n                return false;\n            }\n\n            var thisAttributes = void 0;\n            var otherAttributes = void 0;\n\n            switch (this.nodeType) {\n                case Node.DOCUMENT_TYPE_NODE:\n                    if (this.name !== other.name || this.publicId !== other.publicId || this.systemId !== other.systemId) {\n                        return false;\n                    }\n                    break;\n                case Node.ELEMENT_NODE:\n                    if (this.namespaceURI !== other.namespaceURI || this.prefix !== other.prefix || this.localName !== other.localName) {\n                        return false;\n                    }\n                    thisAttributes = $.descriptors.Element.attributes.get.call(this);\n                    otherAttributes = $.descriptors.Element.attributes.get.call(other);\n                    if (thisAttributes.length != otherAttributes.length) {\n                        return false;\n                    }\n                    break;\n                case Node.ATTRIBUTE_NODE:\n                    if (this.namespaceURI !== other.namespaceURI || this.localName !== other.localName || this.value !== other.value) {\n                        return false;\n                    }\n                    break;\n                case Node.PROCESSING_INSTRUCTION_NODE:\n                    if (this.target !== other.target || this.data !== other.data) {\n                        return false;\n                    }\n                    break;\n                case Node.TEXT_NODE:\n                case Node.COMMENT_NODE:\n                    if (this.data !== other.data) {\n                        return false;\n                    }\n                    break;\n            }\n\n            if (this.nodeType == Node.ELEMENT_NODE) {\n                for (var i = 0; i < thisAttributes.length; i++) {\n                    var attr1 = thisAttributes[i];\n                    var attr2 = otherAttributes[attr1.name];\n                    if (attr1.value !== attr2.value) {\n                        return false;\n                    }\n                }\n            }\n\n            var childNodes1 = this.childNodes;\n            var childNodes2 = other.childNodes;\n            if (childNodes1.length !== other.childNodes.length) {\n                return false;\n            }\n\n            for (var _i = 0; _i < childNodes1.length; _i++) {\n                if (!childNodes1[_i].isEqualNode(childNodes2[_i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'compareDocumentPosition',\n        value: function compareDocumentPosition(other) {\n            // https://dom.spec.whatwg.org/#dom-node-comparedocumentposition\n\n            if (this === other) {\n                return 0;\n            }\n\n            var node1 = other;\n            var node2 = this;\n            var attr1 = null;\n            var attr2 = null;\n\n            if (node1.nodeType == Document.prototype.ATTRIBUTE_NODE) {\n                attr1 = node1;\n                node1 = attr1.ownerElement;\n            }\n\n            if (node2.nodeType == Document.prototype.ATTRIBUTE_NODE) {\n                attr2 = node2;\n                node2 = attr2.ownerElement;\n\n                if (attr1 && node1 && node2 === node1) {\n                    var attrs = node2.atttributes;\n                    for (var i = 0; i < attrs.length; i++) {\n                        var attr = attrs[i];\n                        if (attr.isEqualNode(attr1)) {\n                            return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_PRECEDING;\n                        } else if (attr.isEqualNode(attr2)) {\n                            return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n                        }\n                    }\n                }\n            }\n\n            if (!node1 || !node2 || $.root(node1) !== $.root(node2)) {\n                return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_FOLLOWING + Document.prototype.DOCUMENT_POSITION_DISCONNECTED;\n            }\n\n            if (ancestorOf(node2, node1) || node1 === node2 && attr2) {\n                return Document.prototype.DOCUMENT_POSITION_CONTAINS + Document.prototype.DOCUMENT_POSITION_PRECEDING;\n            }\n\n            if (ancestorOf(node1, node2) || node1 === node2 && attr1) {\n                return Document.prototype.DOCUMENT_POSITION_CONTAINS + Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n            }\n\n            if (preceding(node1, node2)) {\n                return Document.prototype.DOCUMENT_POSITION_PRECEDING;\n            }\n\n            return Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'contains',\n        value: function contains(node) {\n            // https://dom.spec.whatwg.org/#dom-node-contains\n\n            var parent = node.parentNode;\n\n            if (!parent) {\n                return false;\n            }\n\n            do {\n                if (parent === this) {\n                    return true;\n                }\n            } while (parent = parent.parentNode);\n\n            return false;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'insertBefore',\n        value: function insertBefore(node, child) {\n            var _this3 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://dom.spec.whatwg.org/#dom-node-insertbefore\n                // The insertBefore(node, child) method, when invoked, must return the result \n                // of pre-inserting node into context object before child.\n                return $.preInsert(node, _this3, child);\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'appendChild',\n        value: function appendChild(node) {\n            var _this4 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://dom.spec.whatwg.org/#dom-node-appendchild\n                // The appendChild(node) method, when invoked, must return the result of \n                // appending node to context object.\n                return $.append(node, _this4);\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'replaceChild',\n        value: function replaceChild(node, child) {\n            var _this5 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://dom.spec.whatwg.org/#dom-node-replacechild\n                // The replaceChild(node, child) method, when invoked, must return the \n                // result of replacing child with node within context object.\n                return $.replace(child, node, _this5);\n            });\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeChild',\n        value: function removeChild(child) {\n            var _this6 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                // https://dom.spec.whatwg.org/#dom-node-removechild\n                // The removeChild(child) method, when invoked, must return the result of \n                // pre-removing child from context object.\n                return $.preRemove(child, _this6);\n            });\n        }\n    }, {\n        key: 'isConnected',\n        get: function get() {\n            return $.shadowIncludingRoot(this).nodeType === Node.DOCUMENT_NODE;\n        }\n    }, {\n        key: 'parentNode',\n        get: function get() {\n            var parentNode = void 0;\n            var nodeState = $.getShadowState(this);\n            if (nodeState) {\n                parentNode = nodeState.parentNode;\n            }\n\n            return parentNode || $.descriptors.Node.parentNode.get.call(this);\n        }\n    }, {\n        key: 'parentElement',\n        get: function get() {\n            var parentNode = this.parentNode;\n            if (parentNode && parentNode.nodeType === Node.ELEMENT_NODE) {\n                return parentNode;\n            }\n\n            return null;\n        }\n    }, {\n        key: 'childNodes',\n        get: function get() {\n            var nodeState = $.getShadowState(this);\n            if (nodeState) {\n                var childNodes = nodeState.childNodes;\n                if (childNodes) {\n                    return childNodes.slice();\n                }\n            }\n\n            return $.descriptors.Node.childNodes.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'firstChild',\n        get: function get() {\n            var nodeState = $.getShadowState(this);\n            if (nodeState) {\n                var childNodes = nodeState.childNodes;\n                if (childNodes) {\n                    if (childNodes.length) {\n                        return childNodes[0];\n                    }\n                    return null;\n                }\n            }\n\n            return $.descriptors.Node.firstChild.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'lastChild',\n        get: function get() {\n            var nodeState = $.getShadowState(this);\n            if (nodeState) {\n                var childNodes = nodeState.childNodes;\n                if (childNodes) {\n                    if (childNodes.length) {\n                        return childNodes[childNodes.length - 1];\n                    }\n                    return null;\n                }\n            }\n\n            return $.descriptors.Node.lastChild.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'previousSibling',\n        get: function get() {\n            var nodeState = $.getShadowState(this);\n            if (nodeState) {\n                var parentNode = nodeState.parentNode;\n                if (parentNode) {\n                    var childNodes = $.getShadowState(parentNode).childNodes;\n                    var siblingIndex = childNodes.indexOf(this) - 1;\n                    return siblingIndex < 0 ? null : childNodes[siblingIndex];\n                }\n            }\n\n            return $.descriptors.Node.previousSibling.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'nextSibling',\n        get: function get() {\n            var nodeState = $.getShadowState(this);\n            if (nodeState) {\n                var parentNode = nodeState.parentNode;\n                if (parentNode) {\n                    var childNodes = $.getShadowState(parentNode).childNodes;\n                    var siblingIndex = childNodes.indexOf(this) + 1;\n                    return siblingIndex === childNodes.length ? null : childNodes[siblingIndex];\n                }\n            }\n\n            return $.descriptors.Node.nextSibling.get.call(this);\n        }\n\n        // TODO: consider creating a raw property descriptor\n        // that uses the native get instead of a pass-through function\n\n    }, {\n        key: 'nodeValue',\n        get: function get() {\n            return $.descriptors.Node.nodeValue.get.call(this);\n        }\n\n        // TODO: MutationObserver tests\n        ,\n        set: function set(value) {\n            var _this7 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                switch (_this7.nodeType) {\n                    case Node.ATTRIBUTE_NODE:\n                        $.setExistingAttributeValue(_this7, value);\n                        break;\n                    case Node.TEXT_NODE:\n                    case Node.PROCESSING_INSTRUCTION_NODE:\n                    case Node.COMMENT_NODE:\n                        var length = $.descriptors.CharacterData.data.get.call(_this7).length;\n                        $.replaceData(_this7, 0, length, value);\n                        break;\n                }\n            });\n        }\n    }, {\n        key: 'textContent',\n        get: function get() {\n            switch (this.nodeType) {\n                case Node.DOCUMENT_FRAGMENT_NODE:\n                case Node.ELEMENT_NODE:\n                    return elementTextContent(this);\n                case Node.ATTRIBUTE_NODE:\n                    return $.descriptors.Attr.value.get.call(this);\n                case Node.TEXT_NODE:\n                case Node.PROCESSING_INSTRUCTION_NODE:\n                case Node.COMMENT_NODE:\n                    return $.descriptors.CharacterData.data.get.call(this);\n                default:\n                    return null;\n            }\n        }\n\n        // TODO: MutationObserver tests\n        ,\n        set: function set(value) {\n            var _this8 = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                switch (_this8.nodeType) {\n                    case Node.DOCUMENT_FRAGMENT_NODE:\n                    case Node.ELEMENT_NODE:\n                        var node = null;\n                        if (value !== '') {\n                            node = _this8.ownerDocument.createTextNode(value);\n                        }\n                        $.replaceAll(node, _this8);\n                        break;\n                    case Node.ATTRIBUTE_NODE:\n                        $.setExistingAttributeValue(_this8, value);\n                        break;\n                    case Node.TEXT_NODE:\n                    case Node.PROCESSING_INSTRUCTION_NODE:\n                    case Node.COMMENT_NODE:\n                        $.replaceData(_this8, 0, _this8.data.length, value);\n                        break;\n                }\n            });\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;\n\n\nfunction ancestorOf(node, ancestor) {\n    var parent = node.parentNode;\n\n    do {\n        if (parent === ancestor) {\n            return true;\n        }\n    } while (parent = parent.parentNode);\n\n    return false;\n}\n\nfunction preceding(element1, element2) {\n    function precedingSiblings(parent, sibling1, sibling2) {\n        var siblings = parent.childNodes;\n        for (var _i2 = 0; _i2 < siblings.length; _i2++) {\n            var sibling = siblings[_i2];\n            if (sibling === sibling1) {\n                return true;\n            } else if (sibling === sibling2) {\n                return false;\n            }\n        }\n    }\n\n    // Check if they're already siblings.\n    var ancestor1 = element1.parentNode;\n    var ancestor2 = element2.parentNode;\n\n    if (ancestor1 === ancestor2) {\n        return precedingSiblings(element1, element2);\n    }\n\n    // Find the closest common ancestor.\n    var ancestors1 = [ancestor1];\n    var ancestors2 = [ancestor2];\n\n    while (ancestor1 = ancestor1.parentNode) {\n        ancestors1.push(ancestor1);\n    }\n\n    while (ancestor2 = ancestor2.parentNode) {\n        ancestors2.push(ancestor2);\n    }\n\n    ancestors1.reverse();\n    ancestors2.reverse();\n\n    var diff = Math.abs(ancestors1.length - ancestors2.length);\n    var min = Math.min(ancestors1.length, ancestors2.length);\n\n    var i = 0;\n    while (ancestors1[i] === ancestors2[i]) {\n        i++;\n    }\n\n    return precedingSiblings(ancestors1[i - 1], ancestors1[i], ancestors2[i]);\n}\n\nfunction elementTextContent(element) {\n    var result = '';\n    var childNodes = element.childNodes;\n    for (var i = 0; i < childNodes.length; i++) {\n        var childNode = childNodes[i];\n        switch (childNode.nodeType) {\n            case Node.ELEMENT_NODE:\n                result += elementTextContent(childNode);\n                break;\n            case Node.TEXT_NODE:\n                result += $.descriptors.CharacterData.data.get.call(childNode);\n                break;\n        }\n    }\n    return result;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-shadowroot\n// https://www.w3.org/TR/shadow-dom/#the-shadowroot-interface\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'nodeName',\n        get: function get() {\n            return '#shadow-root';\n        }\n    }, {\n        key: 'mode',\n        get: function get() {\n            return $.getShadowState(this).mode;\n        }\n    }, {\n        key: 'host',\n        get: function get() {\n            return $.getShadowState(this).host;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'innerHTML',\n        get: function get() {\n            return $.serializeHTMLFragment(this);\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            var _this = this;\n\n            return _customElements2.default.executeCEReactions(function () {\n                var fragment = $.parseHTMLFragment(value, _this);\n                $.replaceAll(fragment, _this);\n            });\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-text\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'splitText',\n\n\n        // TODO: tests\n        value: function splitText(offset) {\n            var length = this.length;\n            if (offset > length) {\n                throw $.makeError('IndexSizeError');\n            }\n            var count = length - offset;\n            var newData = this.data.slice(offset, count);\n            var newNode = this.ownerDocument.createTextNode(newData);\n            var parent = this.parentNode;\n            if (parent) {\n                $.insert(newNode, parent, this.nextSibling);\n                // TODO: (Range)\n            }\n            $.replaceData(this, offset, count, '');\n            // TODO: (Range)\n            // if (!parent) { }\n            return newNode;\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nvar _shadowDom = require('./shadow-dom.js');\n\nvar _shadowDom2 = _interopRequireDefault(_shadowDom);\n\nvar _customElements = require('./custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar installShadowDom = false;\nvar installCustomElements = false;\n\nif (window['forceShadowDomPolyfill'] || !_shadowDom2.default.nativeSupport) {\n    installShadowDom = true;\n}\n\nif (window['forceCustomElementsPolyfill'] || !_customElements2.default.nativeSupport) {\n    installShadowDom = true;\n    installCustomElements = true;\n}\n\nif (installShadowDom) {\n    _shadowDom2.default.install();\n}\n\nif (installCustomElements) {\n    _customElements2.default.install();\n} else {\n    // TODO: Offer a way to opt out if desired\n    _customElements2.default.shimHtmlConstructors();\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-childnode\n\nexports.default = function (base) {\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'before',\n\n\n            // TODO: tests\n            value: function before() {\n                var _this = this;\n\n                for (var _len = arguments.length, nodes = Array(_len), _key = 0; _key < _len; _key++) {\n                    nodes[_key] = arguments[_key];\n                }\n\n                return _customElements2.default.executeCEReactions(function () {\n                    // https://dom.spec.whatwg.org/#dom-childnode-before\n                    // The before(nodes) method, when invoked, must run these steps:\n\n                    // 1. Let parent be context object’s parent.\n                    var parent = _this.parentNode;\n\n                    // 2. If parent is null, terminate these steps.\n                    if (!parent) {\n                        return;\n                    }\n\n                    // 3. Let viablePreviousSibling be context object’s first preceding \n                    // sibling not in nodes, and null otherwise.\n                    var viablePreviousSibling = _this.previousSibling;\n                    while (viablePreviousSibling && nodes.indexOf(viablePreviousSibling) !== -1) {\n                        viablePreviousSibling = viablePreviousSibling.previousSibling;\n                    }\n\n                    // 4. Let node be the result of converting nodes into a node, given \n                    // nodes and context object’s node document. Rethrow any exceptions.\n                    var node = $.convertNodesIntoANode(nodes, _this.ownerDocument);\n\n                    // 5. If viablePreviousSibling is null, set it to parent’s first child, \n                    // and to viablePreviousSibling’s next sibling otherwise.\n                    if (viablePreviousSibling === null) {\n                        viablePreviousSibling = parent.firstChild;\n                    } else {\n                        viablePreviousSibling = viablePreviousSibling.nextSibling;\n                    }\n\n                    // 6. Pre-insert node into parent before viablePreviousSibling. \n                    // Rethrow any exceptions.\n                    $.preInsert(node, parent, viablePreviousSibling);\n                });\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'after',\n            value: function after() {\n                var _this2 = this;\n\n                for (var _len2 = arguments.length, nodes = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                    nodes[_key2] = arguments[_key2];\n                }\n\n                return _customElements2.default.executeCEReactions(function () {\n                    // https://dom.spec.whatwg.org/#dom-childnode-after\n                    // The after(nodes) method, when invoked, must run these steps:\n\n                    // 1. Let parent be context object’s parent.\n                    var parent = _this2.parentNode;\n\n                    // 2. If parent is null, terminate these steps.\n                    if (!parent) {\n                        return;\n                    }\n\n                    // 3. Let viableNextSibling be context object’s first following \n                    // sibling not in nodes, and null otherwise.\n                    var viableNextSibling = _this2.nextSibling;\n                    while (viableNextSibling && nodes.indexOf(viableNextSibling) !== -1) {\n                        viableNextSibling = viableNextSibling.nextSibling;\n                    }\n\n                    // 4. Let node be the result of converting nodes into a node, given \n                    // nodes and context object’s node document. Rethrow any exceptions.\n                    var node = $.convertNodesIntoANode(nodes, _this2.ownerDocument);\n\n                    // 5. Pre-insert node into parent before viableNextSibling. Rethrow \n                    // any exceptions.\n                    $.preInsert(node, parent, viableNextSibling);\n                });\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'replaceWith',\n            value: function replaceWith() {\n                var _this3 = this;\n\n                for (var _len3 = arguments.length, nodes = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                    nodes[_key3] = arguments[_key3];\n                }\n\n                return _customElements2.default.executeCEReactions(function () {\n                    // https://dom.spec.whatwg.org/#dom-childnode-replacewith\n                    // The replaceWith(nodes) method, when invoked, must run these steps:\n\n                    // 1. Let parent be context object’s parent.\n                    var parent = _this3.parentNode;\n\n                    // 2. If parent is null, terminate these steps.\n                    if (!parent) {\n                        return;\n                    }\n\n                    // 3. Let viableNextSibling be context object’s first following \n                    // sibling not in nodes, and null otherwise.\n                    var viableNextSibling = _this3.nextSibling;\n                    while (viableNextSibling && nodes.indexOf(viableNextSibling) !== -1) {\n                        viableNextSibling = viableNextSibling.nextSibling;\n                    }\n\n                    // 4. Let node be the result of converting nodes into a node, given \n                    // nodes and context object’s node document. Rethrow any exceptions.\n                    var node = $.convertNodesIntoANode(nodes, _this3.ownerDocument);\n\n                    // 5. If context object’s parent is parent, replace the context object \n                    // with node within parent. Rethrow any exceptions.\n                    if (_this3.parentNode == parent) {\n                        $.replace(_this3, node, parent);\n                    }\n                    // 6. Otherwise, pre-insert node into parent before viableNextSibling. \n                    // Rethrow any exceptions.\n                    else {\n                            $.preInsert(node, parent, viableNextSibling);\n                        }\n                });\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'remove',\n            value: function remove() {\n                var _this4 = this;\n\n                return _customElements2.default.executeCEReactions(function () {\n                    // https://dom.spec.whatwg.org/#dom-childnode-remove\n                    // The remove() method, when invoked, must run these steps:\n\n                    // 1. If context object’s parent is null, terminate these steps.\n                    var parent = _this4.parentNode;\n\n                    if (!parent) {\n                        return;\n                    }\n\n                    // 2. Remove the context object from context object’s parent.\n                    $.remove(_this4, parent);\n                });\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#mixin-documentorshadowroot\n// https://www.w3.org/TR/shadow-dom/#extensions-to-the-documentorshadowroot-mixin\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'activeElement',\n\n\n        // TODO: consider getSelection()\n        // TODO: consider elementFromPoint(double x, double y)\n        // TODO: consider elementsFromPoint(double x, double y)\n        // TODO: consider get styleSheets()\n\n        // TODO: tests\n        get: function get() {\n            var document = this.ownerDocument || this;\n            var nativeActiveElement = native.activeElement.get.call(document);\n\n            if (!nativeActiveElement || document != $.shadowIncludingRoot(this)) {\n                return null;\n            }\n\n            return $.retarget(nativeActiveElement, this);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-nondocumenttypechildnode\n\nexports.default = function (base) {\n\n    var native = {\n        previousElementSibling: $.descriptor(base, 'previousElementSibling'),\n        nextElementSibling: $.descriptor(base, 'nextElementSibling')\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'previousElementSibling',\n\n\n            // TODO: tests\n            get: function get() {\n                var nodeState = $.getShadowState(this);\n                if (nodeState && nodeState.parentNode) {\n                    var childNodes = $.getShadowState(nodeState.parentNode).childNodes;\n                    var index = childNodes.indexOf(this);\n                    while (index > 0) {\n                        var previous = childNodes[--index];\n                        if (previous.nodeType === Node.ELEMENT_NODE) {\n                            return previous;\n                        }\n                    };\n                    return null;\n                } else if (native.previousElementSibling) {\n                    return native.previousElementSibling.get.call(this);\n                } else {\n                    var getPreviousSibling = $.descriptors.Node.previousSibling.get;\n                    var previousSibling = this;\n                    while (previousSibling = getPreviousSibling.call(previousSibling)) {\n                        if (previousSibling.nodeType === Node.ELEMENT_NODE) {\n                            return previousSibling;\n                        }\n                    }\n                    return null;\n                }\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'nextElementSibling',\n            get: function get() {\n                var nodeState = $.getShadowState(this);\n                if (nodeState && nodeState.parentNode) {\n                    var childNodes = $.getShadowState(nodeState.parentNode).childNodes;\n                    var index = childNodes.indexOf(this);\n                    while (index < childNodes.length - 1) {\n                        var next = childNodes[++index];\n                        if (next.nodeType === Node.ELEMENT_NODE) {\n                            return next;\n                        }\n                    };\n                    return null;\n                } else if (native.nextElementSibling) {\n                    return native.nextElementSibling.get.call(this);\n                } else {\n                    var getNextSibling = $.descriptors.Node.nextSibling.get;\n                    var nextSibling = this;\n                    while (nextSibling = getNextSibling.call(nextSibling)) {\n                        if (nextSibling.nodeType === Node.ELEMENT_NODE) {\n                            return nextSibling;\n                        }\n                    }\n                    return null;\n                }\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-nonelementparentnode\n\nexports.default = function (base) {\n\n    var native = {\n        querySelectorAll: $.descriptor(base, 'querySelectorAll')\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'getElementById',\n            value: function getElementById(id) {\n                // https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid\n\n                if (id === '' || /\\s/.test(id)) {\n                    return null;\n                }\n\n                var firstChild = this.firstChild;\n\n                if (!firstChild) {\n                    return null;\n                }\n\n                return $.treeOrderRecursiveSelectFirst(firstChild, function (node) {\n                    return node.id === id;\n                });\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-parentnode\n\nexports.default = function (base) {\n\n    var native = {\n        children: $.descriptor(base, 'children'),\n        firstElementChild: $.descriptor(base, 'firstElementChild'),\n        lastElementChild: $.descriptor(base, 'lastElementChild'),\n        childElementCount: $.descriptor(base, 'childElementCount')\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'prepend',\n\n\n            // TODO: tests\n            value: function prepend() {\n                var _this = this;\n\n                for (var _len = arguments.length, nodes = Array(_len), _key = 0; _key < _len; _key++) {\n                    nodes[_key] = arguments[_key];\n                }\n\n                return _customElements2.default.executeCEReactions(function () {\n                    // https://dom.spec.whatwg.org/#dom-parentnode-prepend\n                    // The prepend(nodes) method, when invoked, must run these steps:\n\n                    // 1. Let node be the result of converting nodes into a node given \n                    // nodes and context object’s node document. Rethrow any exceptions.\n                    var node = $.convertNodesIntoANode(nodes, _this.ownerDocument || _this);\n\n                    // 2. Pre-insert node into context object before the context object’s \n                    // first child. Rethrow any exceptions.\n                    $.preInsert(node, _this, _this.firstChild);\n                });\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'append',\n            value: function append() {\n                var _this2 = this;\n\n                for (var _len2 = arguments.length, nodes = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                    nodes[_key2] = arguments[_key2];\n                }\n\n                return _customElements2.default.executeCEReactions(function () {\n                    // https://dom.spec.whatwg.org/#dom-parentnode-append\n                    // The append(nodes) method, when invoked, must run these steps:\n\n                    // 1. Let node be the result of converting nodes into a node given \n                    // nodes and context object’s node document. Rethrow any exceptions.\n                    var node = $.convertNodesIntoANode(nodes, _this2.ownerDocument || _this2);\n\n                    // 2. Append node to context object. Rethrow any exceptions.\n                    $.append(node, _this2);\n                });\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'querySelector',\n            value: function querySelector(selectors) {\n                var results = this.querySelectorAll(selectors);\n\n                if (results.length) {\n                    return results[0];\n                }\n\n                return null;\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'querySelectorAll',\n            value: function querySelectorAll(selectors) {\n                // https://dom.spec.whatwg.org/#scope-match-a-selectors-string\n                // this is horrible, performance-wise.\n                // it's about 100x slower than native querySelectorAll.\n                // that might not amount to much in practice, though.\n                // after all, this is a polyfill.\n\n                var results = [];\n\n                var firstChild = this.firstChild;\n\n                if (!firstChild) {\n                    return results;\n                }\n\n                $.treeOrderRecursiveSelectAll(firstChild, results, function (node) {\n                    return node.nodeType === Node.ELEMENT_NODE && node.matches(selectors);\n                });\n\n                return results;\n            }\n        }, {\n            key: 'children',\n            get: function get() {\n                var childNodes = void 0;\n\n                var shadowState = $.getShadowState(this);\n                if (shadowState) {\n                    childNodes = shadowState.childNodes;\n                }\n\n                if (!childNodes) {\n                    if (native.children) {\n                        return native.children.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                var elements = [];\n\n                for (var i = 0; i < childNodes.length; i++) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        elements.push(node);\n                    }\n                }\n\n                return elements;\n            }\n        }, {\n            key: 'firstElementChild',\n            get: function get() {\n                var childNodes = void 0;\n\n                var shadowState = $.getShadowState(this);\n                if (shadowState) {\n                    childNodes = shadowState.childNodes;\n                }\n\n                if (!childNodes) {\n                    if (native.firstElementChild) {\n                        return native.firstElementChild.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                for (var i = 0; i < childNodes.length; i++) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        return node;\n                    }\n                }\n\n                return null;\n            }\n        }, {\n            key: 'lastElementChild',\n            get: function get() {\n                var childNodes = void 0;\n\n                var shadowState = $.getShadowState(this);\n                if (shadowState) {\n                    childNodes = shadowState.childNodes;\n                }\n\n                if (!childNodes) {\n                    if (native.lastElementChild) {\n                        return native.lastElementChild.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                for (var i = childNodes.length - 1; i >= 0; i--) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        return node;\n                    }\n                }\n\n                return null;\n            }\n        }, {\n            key: 'childElementCount',\n            get: function get() {\n                var childNodes = void 0;\n\n                var shadowState = $.getShadowState(this);\n                if (shadowState) {\n                    childNodes = shadowState.childNodes;\n                }\n\n                if (!childNodes) {\n                    if (native.childElementCount) {\n                        return native.childElementCount.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                var count = 0;\n\n                for (var i = 0; i < childNodes.length; i++) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        count++;\n                    }\n                }\n\n                return count;\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _customElements = require('../custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#mixin-slotable\n\nexports.default = function (base) {\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'assignedSlot',\n            get: function get() {\n                // spec implementation is:\n                // return $.findASlot(this, true);\n                // this uses an alternative (see https://github.com/whatwg/dom/issues/369)\n                var shadowState = $.getShadowState(this);\n                if (shadowState) {\n                    var slot = shadowState.assignedSlot;\n                    if (slot && $.closedShadowHidden(slot, this)) {\n                        slot = null;\n                    }\n                    return slot;\n                }\n                return null;\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.patchAll = patchAll;\n\nvar _utils = require('./utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _DOMTokenList = require('./interfaces/DOMTokenList.js');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// Fear not the single page\n// https://www.w3.org/TR/html/single-page.html\n\n// TODO: implement on demand\n// These might be a bit much considering we can't do anything about inline script handlers\n// GlobalEventHandlers\n// DocumentAndElementEventHandlers\n\n// TODO: implement on demand\n// This would be useful to polyfill considering most current browsers don't implement it yet\n// HTMLHyperlinkElementUtils (Anchor, Area)\n\n// An index of IDL attributes that should reflect a corresponding content attribute.\n\nvar interfaces = {\n    'Element': {\n        'id': reflectString(),\n        'className': reflectString('class'),\n        'classList': reflectDOMTokenList('class'),\n        'slot': reflectString()\n    },\n    'HTMLElement': {\n        'title': reflectString(),\n        'lang': reflectString(),\n        'translate': reflectString(),\n        'dir': reflectString(),\n        // TODO: implement on demand\n        //'dataset': reflect.DOMStringMap('data'),\n        'hidden': reflectBoolean(),\n        'tabIndex': reflectInteger(null, 0),\n        'accessKey': reflectString(),\n        'draggable': reflectString(),\n        'contextMenu': reflectHTMLElement(window.HTMLMenuElement),\n        'spellcheck': reflectString(),\n        // ElementContentEditable\n        'contentEditable': reflectString()\n    },\n    'HTMLAnchorElement': {\n        'target': reflectString(),\n        'download': reflectString(),\n        'rel': reflectString(),\n        'rev': reflectString(),\n        'relList': reflectDOMTokenList('rel'),\n        'hreflang': reflectString(),\n        'type': reflectString(),\n        'text': reflectTextContent()\n    },\n    'HTMLAreaElement': {\n        'alt': reflectString(),\n        'coords': reflectString(),\n        'shape': reflectString(),\n        'target': reflectString(),\n        'download': reflectString(),\n        'rel': reflectString(),\n        'relList': reflectDOMTokenList('rel'),\n        'hreflang': reflectString(),\n        'type': reflectString()\n    },\n    'HTMLBaseElement': {\n        'href': reflectString(),\n        'target': reflectString()\n    },\n    'HTMLButtonElement': {\n        'autofocus': reflectBoolean(),\n        'disabled': reflectBoolean(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'formAction': reflectString(),\n        'formEnctype': reflectString(),\n        'formMethod': reflectString(),\n        'formNoValidate': reflectBoolean(),\n        'formTarget': reflectString(),\n        'name': reflectString(),\n        'type': reflectString(),\n        'value': reflectString(),\n        'menu': reflectHTMLElement(window.HTMLMenuElement)\n    },\n    'HTMLCanvasElement': {\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    'HTMLDataElement': {\n        'value': reflectString()\n    },\n    'HTMLDetailsElement': {\n        'open': reflectBoolean()\n    },\n    'HTMLEmbedElement': {\n        'src': reflectString(),\n        'type': reflectString(),\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    'HTMLFieldSetElement': {\n        'disabled': reflectBoolean(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'name': reflectString()\n    },\n    'HTMLFormElement': {\n        'acceptCharset': reflectString('accept-charset'),\n        'action': reflectString(),\n        'autocomplete': reflectString(),\n        'enctype': reflectString(),\n        'encoding': reflectString('enctype'),\n        'method': reflectString(),\n        'name': reflectString(),\n        'noValidate': reflectBoolean(),\n        'target': reflectString()\n    },\n    'HTMLIFrameElement': {\n        'src': reflectString(),\n        'srcdoc': reflectString(),\n        'name': reflectString(),\n        'sandbox': reflectDOMTokenList('sandbox'),\n        'allowFullscreen': reflectBoolean(),\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    'HTMLImageElement': {\n        'alt': reflectString(),\n        'src': reflectString(),\n        'srcset': reflectString(),\n        'crossOrigin': reflectString(),\n        'useMap': reflectString(),\n        'isMap': reflectBoolean(),\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    // TODO: caveat about feature testing input elements using anything besides 'type'\n    'HTMLInputElement': {\n        'accept': reflectString(),\n        'alt': reflectString(),\n        'autocomplete': reflectString(),\n        'autofocus': reflectBoolean(),\n        'defaultChecked': reflectBoolean('checked'),\n        'dirName': reflectString(),\n        'disabled': reflectBoolean(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'formAction': reflectString(),\n        'formEnctype': reflectString(),\n        'formMethod': reflectString(),\n        'formNoValidate': reflectBoolean(),\n        'formTarget': reflectString(),\n        'height': reflectInteger(null, 0),\n        'inputMode': reflectString(),\n        // TODO: investigate whether we should bother with 'list'.\n        // Browsers without native Shadow DOM could end up not\n        // pulling suggestions from the correct list anyways.\n        // Possibly needs to be a caveat about this.\n        //'list': reflectSuggestionSourceElement(),\n        'max': reflectString(),\n        'maxLength': reflectInteger(0, 0),\n        'min': reflectString(),\n        'minLength': reflectInteger(0, 0),\n        'multiple': reflectBoolean(),\n        'name': reflectString(),\n        'pattern': reflectString(),\n        'placeholder': reflectString(),\n        'readOnly': reflectBoolean(),\n        'required': reflectBoolean(),\n        'size': reflectInteger(1, 1),\n        'src': reflectString(),\n        'step': reflectString(),\n        'type': reflectString(),\n        'defaultValue': reflectString('value'),\n        'width': reflectInteger(null, 0)\n    },\n    'HTMLKeygenElement': {\n        'autofocus': reflectBoolean(),\n        'challenge': reflectString(),\n        'disabled': reflectBoolean(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'keytype': reflectString(),\n        'name': reflectString()\n    },\n    'HTMLLabelElement': {\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'htmlFor': reflectString('for')\n    },\n    'HTMLLegendElement': {\n        'form': reflectHTMLElement(HTMLFormElement, true)\n    },\n    'HTMLLIElement': {\n        'value': reflectString()\n    },\n    'HTMLLinkElement': {\n        'href': reflectString(),\n        'crossOrigin': reflectString(),\n        'rel': reflectString(),\n        'rev': reflectString(),\n        'relList': reflectDOMTokenList('rel'),\n        'media': reflectString(),\n        'hreflang': reflectString(),\n        'type': reflectString(),\n        'sizes': reflectDOMTokenList('sizes')\n    },\n    'HTMLMapElement': {\n        'name': reflectString()\n    },\n    'HTMLMediaElement': {\n        'src': reflectString(),\n        'crossOrigin': reflectString(),\n        'preload': reflectString(),\n        'loop': reflectBoolean(),\n        'autoplay': reflectBoolean(),\n        'mediaGroup': reflectString(),\n        'controls': reflectBoolean(),\n        'defaultMuted': reflectBoolean('muted')\n    },\n    'HTMLMenuElement': {\n        'type': reflectString(),\n        'label': reflectString()\n    },\n    'HTMLMenuItemElement': {\n        'type': reflectString(),\n        'label': reflectString(),\n        'icon': reflectString(),\n        'disabled': reflectBoolean(),\n        'checked': reflectBoolean('checked'),\n        'radiogroup': reflectString(),\n        'default': reflectBoolean()\n    },\n    'HTMLMetaElement': {\n        'name': reflectString(),\n        'httpEquiv': reflectString('http-equiv'),\n        'content': reflectString()\n    },\n    'HTMLMeterElement': {\n        'value': reflectFloat(null, 0),\n        'min': reflectFloat(null, 0),\n        'max': reflectFloat(null, 0),\n        'low': reflectFloat(null, 0),\n        'high': reflectFloat(null, 0),\n        'optimum': reflectFloat(null, 0)\n    },\n    'HTMLModElement': {\n        'cite': reflectString(),\n        'dateTime': reflectString()\n    },\n    'HTMLObjectElement': {\n        'data': reflectString(),\n        'type': reflectString(),\n        'typeMustMatch': reflectBoolean(),\n        'name': reflectString(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    'HTMLOListElement': {\n        'reversed': reflectBoolean(),\n        'start': reflectInteger(null, 0),\n        'type': reflectString()\n    },\n    'HTMLOptGroupElement': {\n        'disabled': reflectBoolean(),\n        'label': reflectString()\n    },\n    'HTMLOptionElement': {\n        'disabled': reflectBoolean(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'label': reflectString(),\n        'defaultSelected': reflectBoolean('selected'),\n        'value': reflectString()\n    },\n    'HTMLOutputElement': {\n        'htmlFor': reflectDOMTokenList('for'),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'name': reflectString(),\n        'defaultValue': reflectString('value')\n    },\n    'HTMLParamElement': {\n        'name': reflectString(),\n        'value': reflectString()\n    },\n    'HTMLProgressElement': {\n        'value': reflectFloat(null, 0),\n        'max': reflectFloat(null, 0)\n    },\n    'HTMLQuoteElement': {\n        'cite': reflectString()\n    },\n    'HTMLScriptElement': {\n        'src': reflectString(),\n        'type': reflectString(),\n        'charset': reflectString(),\n        'async': reflectBoolean(),\n        'defer': reflectBoolean(),\n        'crossOrigin': reflectString(),\n        // TODO: implement on demand\n        // 'text': reflectScriptText(),\n        'nonce': reflectString()\n    },\n    'HTMLSelectElement': {\n        'autocomplete': reflectString(),\n        'autofocus': reflectBoolean(),\n        'disabled': reflectBoolean(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'multiple': reflectBoolean(),\n        'name': reflectString(),\n        'required': reflectBoolean(),\n        'size': reflectInteger(1, 1)\n    },\n    'HTMLSourceElement': {\n        'src': reflectString(),\n        'type': reflectString(),\n        'media': reflectString()\n    },\n    'HTMLStyleElement': {\n        'media': reflectString(),\n        'nonce': reflectString(),\n        'type': reflectString()\n    },\n    'HTMLTableCellElement': {\n        'colSpan': reflectInteger(0, -1),\n        'rowSpan': reflectInteger(0, -1),\n        'headers': reflectDOMTokenList('headers')\n    },\n    'HTMLTableColElement': {\n        'span': reflectInteger(1, 1)\n    },\n    'HTMLTableHeaderCellElement': {\n        'scope': reflectString(),\n        'abbr': reflectString()\n    },\n    'HTMLTextAreaElement': {\n        'autocomplete': reflectString(),\n        'autofocus': reflectBoolean(),\n        'cols': reflectString(),\n        'dirName': reflectString(),\n        'disabled': reflectBoolean(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'inputMode': reflectString(),\n        'maxLength': reflectInteger(0, 0),\n        'minLength': reflectInteger(0, 0),\n        'name': reflectString(),\n        'placeholder': reflectString(),\n        'readOnly': reflectBoolean(),\n        'required': reflectBoolean(),\n        'rows': reflectInteger(1, 1),\n        'wrap': reflectString(),\n        'defaultValue': reflectTextContent()\n    },\n    'HTMLTimeElement': {\n        'dateTime': reflectString()\n    },\n    'HTMLTrackElement': {\n        'kind': reflectString(),\n        'src': reflectString(),\n        'srclang': reflectString(),\n        'label': reflectString(),\n        'default': reflectBoolean()\n    },\n    'HTMLVideoElement': {\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0),\n        'poster': reflectString()\n    }\n};\n\n// https://www.w3.org/TR/html/single-page.html#reflection\n\nfunction reflectString(attributeName) {\n    return function (type, name) {\n        attributeName = attributeName || name.toLowerCase();\n        var descriptor = $.descriptor(type, name);\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: descriptor ? descriptor.get : function () {\n                return this.getAttribute(attributeName) || '';\n            },\n            set: function set(value) {\n                $.setAttributeValue(this, attributeName, value);\n            }\n        });\n    };\n}\n\nfunction reflectBoolean(attributeName) {\n    return function (type, name) {\n        attributeName = attributeName || name.toLowerCase();\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                return this.hasAttribute(attributeName);\n            },\n            set: function set(value) {\n                if (value === false) {\n                    $.removeAttributeByName(attributeName, this);\n                } else {\n                    $.setAttributeValue(this, attributeName, value);\n                }\n            }\n        });\n    };\n}\n\n// TODO: minValue, errors\nfunction reflectInteger(minValue, defaultValue) {\n    return function (type, name) {\n        var attributeName = name.toLowerCase();\n        defaultValue = defaultValue || 0;\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                var value = this.getAttribute(attributeName);\n                return parseInt(value) || defaultValue;\n            },\n            set: function set(value) {\n                if (typeof value !== 'number') {\n                    throw $.makeError('TypeError');\n                }\n                $.setAttributeValue(this, attributeName, value.toString());\n            }\n        });\n    };\n}\n\n// TODO: minValue, errors\nfunction reflectFloat(minValue, defaultValue) {\n    return function (type, name) {\n        var attributeName = name.toLowerCase();\n        defaultValue = defaultValue || 0;\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                var value = this.getAttribute(attributeName);\n                return parseFloat(value) || defaultValue;\n            },\n            set: function set(value) {\n                if (typeof value !== 'number') {\n                    throw $.makeError('TypeError');\n                }\n                $.setAttributeValue(this, attributeName, value.toString());\n            }\n        });\n    };\n}\n\nfunction reflectDOMTokenList(localName) {\n    return function (type, name) {\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                return (0, _DOMTokenList.getOrCreateDOMTokenList)(this, localName);\n            },\n            set: function set(value) {\n                (0, _DOMTokenList.getOrCreateDOMTokenList)(this, localName).value = value;\n            }\n        });\n    };\n}\n\nfunction reflectHTMLElement(candidateType, readOnly) {\n    return function (type, name) {\n        var attributeName = name.toLowerCase();\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                if (!this.hasAttribute(attributeName)) {\n                    return null;\n                }\n                var id = this.getAttribute(attributeName);\n                var candidate = this.ownerDocument.getElementById(id);\n                if (candidate == null || !(candidate instanceof candidateType)) {\n                    return null;\n                }\n                return candidate;\n            },\n            set: readOnly ? undefined : function (value) {\n                if (!(value instanceof candidateType)) {\n                    throw $.makeError('TypeError');\n                }\n                if (value.hasAttribute('id')) {\n                    var found = this.ownerDocument.getElementById(value.id);\n                    if (value === found) {\n                        this.setAttribute(attributeName, value.id);\n                        return;\n                    }\n                }\n                this.setAttribute(attributeName, '');\n            }\n        });\n    };\n}\n\nfunction reflectTextContent() {\n    return function (type, name) {\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                return this.textContent;\n            },\n            set: function set(value) {\n                this.textContent = value;\n            }\n        });\n    };\n}\n\nfunction patchAll() {\n    var identifiers = Object.getOwnPropertyNames(interfaces);\n    for (var i = 0; i < identifiers.length; i++) {\n        var identifier = identifiers[i];\n        if (identifier in window) {\n            var type = window[identifier];\n            var attributes = Object.getOwnPropertyNames(interfaces[identifier]);\n            for (var j = 0; j < attributes.length; j++) {\n                var attribute = attributes[j];\n                interfaces[identifier][attribute](type, attribute);\n            }\n        }\n    }\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('./utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _reflect = require('./reflect.js');\n\nvar reflect = _interopRequireWildcard(_reflect);\n\nvar _Attr = require('./interfaces/Attr.js');\n\nvar _Attr2 = _interopRequireDefault(_Attr);\n\nvar _CharacterData = require('./interfaces/CharacterData.js');\n\nvar _CharacterData2 = _interopRequireDefault(_CharacterData);\n\nvar _CustomEvent = require('./interfaces/CustomEvent.js');\n\nvar _CustomEvent2 = _interopRequireDefault(_CustomEvent);\n\nvar _Document = require('./interfaces/Document.js');\n\nvar _Document2 = _interopRequireDefault(_Document);\n\nvar _DOMTokenList = require('./interfaces/DOMTokenList.js');\n\nvar _DOMTokenList2 = _interopRequireDefault(_DOMTokenList);\n\nvar _Element = require('./interfaces/Element.js');\n\nvar _Element2 = _interopRequireDefault(_Element);\n\nvar _Event = require('./interfaces/Event.js');\n\nvar _Event2 = _interopRequireDefault(_Event);\n\nvar _EventTarget = require('./interfaces/EventTarget.js');\n\nvar _EventTarget2 = _interopRequireDefault(_EventTarget);\n\nvar _HTMLSlotElement = require('./interfaces/HTMLSlotElement.js');\n\nvar _HTMLSlotElement2 = _interopRequireDefault(_HTMLSlotElement);\n\nvar _HTMLTableElement = require('./interfaces/HTMLTableElement.js');\n\nvar _HTMLTableElement2 = _interopRequireDefault(_HTMLTableElement);\n\nvar _HTMLTableRowElement = require('./interfaces/HTMLTableRowElement.js');\n\nvar _HTMLTableRowElement2 = _interopRequireDefault(_HTMLTableRowElement);\n\nvar _HTMLTableSectionElement = require('./interfaces/HTMLTableSectionElement.js');\n\nvar _HTMLTableSectionElement2 = _interopRequireDefault(_HTMLTableSectionElement);\n\nvar _MutationObserver = require('./interfaces/MutationObserver.js');\n\nvar _MutationObserver2 = _interopRequireDefault(_MutationObserver);\n\nvar _NamedNodeMap = require('./interfaces/NamedNodeMap.js');\n\nvar _NamedNodeMap2 = _interopRequireDefault(_NamedNodeMap);\n\nvar _Node = require('./interfaces/Node.js');\n\nvar _Node2 = _interopRequireDefault(_Node);\n\nvar _ShadowRoot = require('./interfaces/ShadowRoot.js');\n\nvar _ShadowRoot2 = _interopRequireDefault(_ShadowRoot);\n\nvar _Text = require('./interfaces/Text.js');\n\nvar _Text2 = _interopRequireDefault(_Text);\n\nvar _ChildNode = require('./mixins/ChildNode.js');\n\nvar _ChildNode2 = _interopRequireDefault(_ChildNode);\n\nvar _DocumentOrShadowRoot = require('./mixins/DocumentOrShadowRoot.js');\n\nvar _DocumentOrShadowRoot2 = _interopRequireDefault(_DocumentOrShadowRoot);\n\nvar _NonDocumentTypeChildNode = require('./mixins/NonDocumentTypeChildNode.js');\n\nvar _NonDocumentTypeChildNode2 = _interopRequireDefault(_NonDocumentTypeChildNode);\n\nvar _NonElementParentNode = require('./mixins/NonElementParentNode.js');\n\nvar _NonElementParentNode2 = _interopRequireDefault(_NonElementParentNode);\n\nvar _ParentNode = require('./mixins/ParentNode.js');\n\nvar _ParentNode2 = _interopRequireDefault(_ParentNode);\n\nvar _Slotable = require('./mixins/Slotable.js');\n\nvar _Slotable2 = _interopRequireDefault(_Slotable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar nativeSupport = 'attachShadow' in Element.prototype;\n\nexports.default = {\n    nativeSupport: nativeSupport,\n    install: install\n};\n\n\nfunction install() {\n\n    // Hacky setting in case you want to use ShadyCSS.\n    window['ShadyDOM'] = { 'inUse': true };\n\n    // Reflected attributes\n    reflect.patchAll();\n\n    // Element.matches(selectors) polyfill from MDN\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill\n    // Purposefully chop out the polyfill function that uses querySelectorAll.\n    if (!Element.prototype.matches) {\n        Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector;\n    }\n\n    // Attr interface\n    $.extend(Attr, _Attr2.default);\n\n    // CharacterData interface\n    $.extend(CharacterData, _CharacterData2.default);\n\n    // CustomEvent interface\n    $.extend(CustomEvent, _CustomEvent2.default);\n    _CustomEvent2.default.prototype = CustomEvent.prototype;\n    window.CustomEvent = _CustomEvent2.default;\n\n    // Document interface\n    $.extend(Document, _Document2.default);\n\n    // DOMTokenList interface\n    if ('DOMTokenList' in window) {\n        // TODO: what about IE9?\n        $.extend(DOMTokenList, _DOMTokenList2.default);\n    }\n\n    // Element interface\n    $.extend(Element, _Element2.default);\n\n    // Event interface\n    $.extend(Event, _Event2.default);\n    $.extend(FocusEvent, _Event.hasRelatedTarget);\n    $.extend(MouseEvent, _Event.hasRelatedTarget);\n    _Event2.default.prototype = Event.prototype;\n    window.Event = _Event2.default;\n\n    // EventTarget\n    if ('EventTarget' in Window) {\n        $.extend(EventTarget, (0, _EventTarget2.default)(EventTarget));\n    } else {\n        // In IE, EventTarget is not exposed and Window's\n        // EventTarget methods are not the same as Node's.\n        $.extend(Window, (0, _EventTarget2.default)(Window));\n        $.extend(Node, (0, _EventTarget2.default)(Node));\n    }\n\n    // HTMLSlotElement interface\n    $.extend('HTMLSlotElement' in window ? HTMLSlotElement : HTMLUnknownElement, _HTMLSlotElement2.default);\n\n    // HTMLTableElement interface\n    $.extend(HTMLTableElement, _HTMLTableElement2.default);\n\n    // HTMLTableRowElement interface\n    $.extend(HTMLTableRowElement, _HTMLTableRowElement2.default);\n\n    // HTMLTableSectionElement interface\n    $.extend(HTMLTableSectionElement, _HTMLTableSectionElement2.default);\n\n    // MutationObserver interface\n    window.MutationObserver = _MutationObserver2.default;\n\n    // NamedNodeMap interface\n    $.extend(NamedNodeMap, _NamedNodeMap2.default);\n\n    // Node interface\n    $.extend(Node, _Node2.default);\n\n    // TODO: implement Range interface\n\n    // Text interface\n    $.extend(Text, _Text2.default);\n\n    // ChildNode mixin\n    $.extend(DocumentType, (0, _ChildNode2.default)(DocumentType));\n    $.extend(Element, (0, _ChildNode2.default)(Element));\n    $.extend(CharacterData, (0, _ChildNode2.default)(CharacterData));\n\n    // DocumentOrShadowRoot mixin\n    $.extend(Document, _DocumentOrShadowRoot2.default);\n    $.extend(_ShadowRoot2.default, _DocumentOrShadowRoot2.default);\n\n    // NonDocumentTypeChildNode mixin\n    $.extend(Element, (0, _NonDocumentTypeChildNode2.default)(Element));\n    $.extend(CharacterData, (0, _NonDocumentTypeChildNode2.default)(CharacterData));\n\n    // NonElementParentNode mixin\n    $.extend(Document, (0, _NonElementParentNode2.default)(Document));\n    $.extend(DocumentFragment, (0, _NonElementParentNode2.default)(DocumentFragment));\n\n    // ParentNode mixin\n    $.extend(Document, (0, _ParentNode2.default)(Document));\n    $.extend(DocumentFragment, (0, _ParentNode2.default)(DocumentFragment));\n    $.extend(Element, (0, _ParentNode2.default)(Element));\n\n    // Slotable mixin\n    $.extend(Element, (0, _Slotable2.default)(Element));\n    $.extend(Text, (0, _Slotable2.default)(Text));\n\n    // Cleanup for IE, Edge\n    delete Node.prototype.attributes;\n    delete HTMLElement.prototype.classList;\n    delete HTMLElement.prototype.children;\n    delete HTMLElement.prototype.parentElement;\n    delete HTMLElement.prototype.innerHTML;\n    delete HTMLElement.prototype.outerHTML;\n    delete HTMLElement.prototype.insertAdjacentText;\n    delete HTMLElement.prototype.insertAdjacentElement;\n    delete HTMLElement.prototype.insertAdjacentHTML;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.setImmediate = exports.descriptors = exports.descriptor = exports.slice = undefined;\nexports.makeError = makeError;\nexports.reportError = reportError;\nexports.extend = extend;\nexports.getShadowState = getShadowState;\nexports.setShadowState = setShadowState;\nexports.recursiveGetShadowIncludingTreeOrderDescendants = recursiveGetShadowIncludingTreeOrderDescendants;\nexports.treeOrderRecursiveSelectAll = treeOrderRecursiveSelectAll;\nexports.treeOrderRecursiveSelectFirst = treeOrderRecursiveSelectFirst;\nexports.filterByRoot = filterByRoot;\nexports.isShadowRoot = isShadowRoot;\nexports.parseHTMLFragment = parseHTMLFragment;\nexports.serializeHTMLFragment = serializeHTMLFragment;\nexports.root = root;\nexports.descendant = descendant;\nexports.inclusiveDescendant = inclusiveDescendant;\nexports.ancestor = ancestor;\nexports.inclusiveAncestor = inclusiveAncestor;\nexports.convertNodesIntoANode = convertNodesIntoANode;\nexports.clone = clone;\nexports.adopt = adopt;\nexports.hostIncludingInclusiveAncestor = hostIncludingInclusiveAncestor;\nexports.shadowIncludingRoot = shadowIncludingRoot;\nexports.shadowIncludingDescendant = shadowIncludingDescendant;\nexports.shadowIncludingInclusiveDescendant = shadowIncludingInclusiveDescendant;\nexports.shadowIncludingAncestor = shadowIncludingAncestor;\nexports.shadowIncludingInclusiveAncestor = shadowIncludingInclusiveAncestor;\nexports.closedShadowHidden = closedShadowHidden;\nexports.retarget = retarget;\nexports.changeAttribute = changeAttribute;\nexports.appendAttribute = appendAttribute;\nexports.removeAttribute = removeAttribute;\nexports.replaceAttribute = replaceAttribute;\nexports.setAttribute = setAttribute;\nexports.setAttributeValue = setAttributeValue;\nexports.removeAttributeByName = removeAttributeByName;\nexports.removeAttributeByNamespace = removeAttributeByNamespace;\nexports.insertAdjacent = insertAdjacent;\nexports.setExistingAttributeValue = setExistingAttributeValue;\nexports.replaceData = replaceData;\nexports.findASlot = findASlot;\nexports.findSlotables = findSlotables;\nexports.findFlattenedSlotables = findFlattenedSlotables;\nexports.assignSlotables = assignSlotables;\nexports.assignSlotablesForATree = assignSlotablesForATree;\nexports.assignASlot = assignASlot;\nexports.signalASlotChange = signalASlotChange;\nexports.ensurePreInsertionValidity = ensurePreInsertionValidity;\nexports.preInsert = preInsert;\nexports.insert = insert;\nexports.append = append;\nexports.replace = replace;\nexports.replaceAll = replaceAll;\nexports.preRemove = preRemove;\nexports.remove = remove;\nexports.createMutationObserver = createMutationObserver;\n\nvar _customElements = require('./custom-elements.js');\n\nvar _customElements2 = _interopRequireDefault(_customElements);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar slice = exports.slice = function slice(array) {\n    return Array.prototype.slice.call(array);\n};\n\nvar descriptor = exports.descriptor = function descriptor(type, name) {\n    return Object.getOwnPropertyDescriptor(type.prototype, name);\n};\n\nvar descriptors = exports.descriptors = {\n    Attr: {\n        value: descriptor(Attr, 'value')\n    },\n    CharacterData: {\n        data: descriptor(CharacterData, 'data')\n    },\n    Document: {\n        activeElement: descriptor(Document, 'activeElement'),\n        getElementsByTagName: descriptor(Document, 'getElementsByTagName'),\n        getElementsByTagNameNS: descriptor(Document, 'getElementsByTagNameNS'),\n        getElementsByClassName: descriptor(Document, 'getElementsByClassName')\n    },\n    Element: {\n        attributes: descriptor(Element, 'attributes') || descriptor(Node, 'attributes'),\n        getElementsByTagName: descriptor(Element, 'getElementsByTagName'),\n        getElementsByTagNameNS: descriptor(Element, 'getElementsByTagNameNS'),\n        getElementsByClassName: descriptor(Element, 'getElementsByClassName'),\n        innerHTML: descriptor(Element, 'innerHTML') || descriptor(HTMLElement, 'innerHTML'),\n        querySelectorAll: descriptor(Element, 'querySelectorAll'),\n        setAttribute: descriptor(Element, 'setAttribute'),\n        setAttributeNodeNS: descriptor(Element, 'setAttributeNodeNS'),\n        removeAttributeNode: descriptor(Element, 'removeAttributeNode')\n    },\n    Event: {\n        currentTarget: descriptor(Event, 'currentTarget'),\n        target: descriptor(Event, 'target')\n    },\n    FocusEvent: {\n        relatedTarget: descriptor(FocusEvent, 'relatedTarget')\n    },\n    MouseEvent: {\n        relatedTarget: descriptor(MouseEvent, 'relatedTarget')\n    },\n    Node: {\n        parentNode: descriptor(Node, 'parentNode'),\n        hasChildNodes: descriptor(Node, 'hasChildNodes'),\n        childNodes: descriptor(Node, 'childNodes'),\n        firstChild: descriptor(Node, 'firstChild'),\n        lastChild: descriptor(Node, 'lastChild'),\n        previousSibling: descriptor(Node, 'previousSibling'),\n        nextSibling: descriptor(Node, 'nextSibling'),\n        nodeValue: descriptor(Node, 'nodeValue'),\n        textContent: descriptor(Node, 'textContent'),\n        cloneNode: descriptor(Node, 'cloneNode'),\n        insertBefore: descriptor(Node, 'insertBefore'),\n        removeChild: descriptor(Node, 'removeChild'),\n        appendChild: descriptor(Node, 'appendChild')\n    }\n};\n\n// TODO: add a note about importing YuzuJS/setImmediate before this polyfill if better performance is desired.\n// TODO: what about IE9?\nvar setImmediate = exports.setImmediate = 'setImmediate' in window ? window.setImmediate : function (callback) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n    }\n\n    return setTimeout.apply(undefined, [callback, 0].concat(args));\n};\n\n// TODO: analyze usages and provide brief but descriptive messages\nfunction makeError(name, message) {\n    try {\n        var sacrifice = document.createElement('div');\n        descriptors.Node.appendChild.call(sacrifice, sacrifice);\n    } catch (error) {\n        error.message = message;\n        error.name = name;\n        return error;\n    }\n}\n\nfunction reportError(error) {\n    if ('console' in window && 'error' in window.console) {\n        window.console.error(error);\n    }\n}\n\nfunction extend(object) {\n    for (var _len2 = arguments.length, mixins = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        mixins[_key2 - 1] = arguments[_key2];\n    }\n\n    for (var i = 0; i < mixins.length; i++) {\n        var mixin = mixins[i].prototype;\n        var names = Object.getOwnPropertyNames(mixin);\n        for (var j = 0; j < names.length; j++) {\n            var name = names[j];\n            if (name === 'constructor') {\n                continue;\n            }\n            var _descriptor = Object.getOwnPropertyDescriptor(mixin, name);\n            Object.defineProperty(object.prototype || object, name, _descriptor);\n        }\n    }\n}\n\nfunction getShadowState(object) {\n    return object._shadow;\n}\n\nfunction setShadowState(object, state) {\n    return object._shadow = state;\n}\n\nfunction recursiveGetShadowIncludingTreeOrderDescendantsInner(node, context) {\n    // TODO: make sure we are interpreting 'shadow-including preorder' correctly\n    var shadowState = null;\n    var shadowRoot = null;\n    if ((shadowState = getShadowState(node)) && (shadowRoot = shadowState.shadowRoot)) {\n        context.results[context.index++] = shadowRoot;\n        recursiveGetShadowIncludingTreeOrderDescendantsInner(shadowRoot, context);\n    }\n    var childNodes = node.childNodes;\n    context.results.length += childNodes.length;\n    for (var i = 0; i < childNodes.length; i++) {\n        var childNode = childNodes[i];\n        context.results[context.index++] = childNode;\n        recursiveGetShadowIncludingTreeOrderDescendantsInner(childNode, context);\n    }\n}\n\nfunction recursiveGetShadowIncludingTreeOrderDescendants(node, results) {\n    var context = { results: results, index: results.length };\n    recursiveGetShadowIncludingTreeOrderDescendantsInner(node, context);\n}\n\nfunction treeOrderRecursiveSelectAll(node, results, match) {\n    if (match(node)) {\n        results.push(node);\n    }\n    var firstChild = node.firstChild;\n    if (firstChild) {\n        treeOrderRecursiveSelectAll(firstChild, results, match);\n    }\n    var nextSibling = node.nextSibling;\n    if (nextSibling) {\n        treeOrderRecursiveSelectAll(nextSibling, results, match);\n    }\n}\n\nfunction treeOrderRecursiveSelectFirst(node, match) {\n    if (match(node)) {\n        return node;\n    }\n    var firstChild = node.firstChild;\n    if (firstChild) {\n        var result = treeOrderRecursiveSelectFirst(firstChild, match);\n        if (result) {\n            return result;\n        }\n    }\n    var nextSibling = node.nextSibling;\n    if (nextSibling) {\n        return treeOrderRecursiveSelectFirst(nextSibling, match);\n    }\n    return null;\n}\n\nfunction filterByRoot(node, descendants) {\n    var contextRoot = root(node);\n    var filtered = new Array(descendants.length);\n    var filteredCount = 0;\n    for (var i = 0; i < descendants.length; i++) {\n        var item = descendants[i];\n        if (root(item) === contextRoot) {\n            filtered[filteredCount++] = item;\n        }\n    }\n    filtered.length = filteredCount;\n    return filtered;\n}\n\nfunction isShadowRoot(node) {\n    return node.nodeName === '#shadow-root';\n}\n\n// https://www.w3.org/TR/DOM-Parsing/\n\n// PERF: This function uses a recycled div element\n// and a recycled document fragment stored in the passed \n// element's owner document so it can avoid allocation.\n// Callers must empty the returned fragment.\nfunction parseHTMLFragment(markup, context) {\n    var document = context.ownerDocument;\n    var documentState = getShadowState(document) || setShadowState(document, {});\n    var parsingElement = documentState.parsingElement;\n    if (!parsingElement) {\n        parsingElement = documentState.parsingElement = document.createElement('div');\n    }\n    var parsingFragment = documentState.parsingFragment;\n    if (!documentState.parsingFragment) {\n        parsingFragment = documentState.parsingFragment = document.createDocumentFragment();\n    }\n    descriptors.Element.innerHTML.set.call(parsingElement, markup);\n    var nodeFirstChildGet = descriptors.Node.firstChild.get;\n    var nodeAppendChildValue = descriptors.Node.appendChild.value;\n    var firstChild = void 0;\n    while (firstChild = nodeFirstChildGet.call(parsingElement)) {\n        nodeAppendChildValue.call(parsingFragment, firstChild);\n    }\n    return parsingFragment;\n}\n\nfunction serializeHTMLFragment(node) {\n    // https://www.w3.org/TR/html5/single-page.html#html-fragment-serialization-algorithm\n\n    // 1. Let s be a string, and initialize it to the empty string.\n    var s = '';\n\n    // 2. If the node is a template element, then let the node instead be the \n    // template element's template contents (a DocumentFragment node).\n    if (node.localName === 'template') {\n        var content = node.content;\n        if (content) {\n            node = content;\n        }\n    }\n\n    // 3. For each child node of the node, in tree order, run the following steps:\n    var childNodes = node.childNodes;\n    for (var i = 0; i < childNodes.length; i++) {\n        // 1. Let current node be the child node being processed.\n        var currentNode = childNodes[i];\n        // 2. Append the appropriate string from the following list to s:\n        switch (currentNode.nodeType) {\n            case Node.ELEMENT_NODE:\n                var tagName = void 0;\n                switch (currentNode.namespaceURI) {\n                    case 'http://www.w3.org/1999/xhtml':\n                    case 'http://www.w3.org/1998/Math/MathML':\n                    case 'http://www.w3.org/2000/svg':\n                        tagName = currentNode.localName;\n                        break;\n                    default:\n                        tagName = currentNode.qualifiedName;\n                        break;\n                }\n                s += '<' + tagName;\n                var attributes = descriptors.Element.attributes.get.call(currentNode);\n                for (var j = 0; j < attributes.length; j++) {\n                    var _attribute = attributes[j];\n                    s += ' ' + serializeAttributeName(_attribute);\n                    s += '=\"' + escapeString(_attribute.value) + '\"';\n                }\n                s += '>';\n                switch (currentNode.localName) {\n                    case 'area':case 'base':case 'basefont':case 'bgsound':\n                    case 'br':case 'col':case 'embed':case 'frame':case 'hr':\n                    case 'img':case 'input':case 'keygen':case 'link':case 'meta':\n                    case 'param':case 'source':case 'track':case 'wbr':\n                        continue;\n                    case 'pre':case 'textarea':case 'listing':\n                        var firstChild = currentNode.firstChild;\n                        if (firstChild && firstChild.nodeType === Node.TEXT_NODE && firstChild.data[0] === '\\n') {\n                            s += '\\n';\n                        }\n                        break;\n                }\n                s += serializeHTMLFragment(currentNode);\n                s += '</' + tagName + '>';\n                break;\n            case Node.TEXT_NODE:\n                switch (currentNode.parentNode.localName) {\n                    case 'style':case 'script':case 'xmp':case 'iframe':\n                    case 'noembed':case 'noframes':case 'plaintext':case 'noscript':\n                        s += currentNode.data;\n                        break;\n                    default:\n                        s += escapeString(currentNode.data);\n                        break;\n                }\n                break;\n            case Node.COMMENT_NODE:\n                s += '<!--' + currentNode.data + '-->';\n                break;\n            case Node.PROCESSING_INSTRUCTION_NODE:\n                s += '<?' + currentNode.target + ' ' + currentNode.data + '>';\n                break;\n            case Node.DOCUMENT_TYPE_NODE:\n                s += '<!DOCTYPE ' + currentNode.name + '>';\n                break;\n        }\n    }\n\n    // 4. The result of the algorithm is the string s.\n    return s;\n\n    function escapeString(string, attributeMode) {\n        if (!string || !string.length) {\n            return '';\n        }\n\n        string = string.replace('&', '&amp;');\n        string = string.replace('\\xA0', '&nbsp;');\n\n        if (attributeMode) {\n            string = string.replace('\"', '&quot;');\n        } else {\n            string = string.replace('<', '&lt;');\n            string = string.replace('>', '&gt;');\n        }\n\n        return string;\n    }\n\n    function serializeAttributeName(attribute) {\n        var namespaceURI = attribute.namespaceURI;\n        var localName = attribute.localName;\n        if (!namespaceURI) {\n            return localName;\n        }\n        switch (namespaceURI) {\n            case 'http://www.w3.org/XML/1998/namespace':\n                return 'xml:' + localName;\n            case 'http://www.w3.org/2000/xmlns/':\n                if (localName === 'xmlns') {\n                    return localName;\n                }\n                return 'xmlns:' + localName;\n            case 'http://www.w3.org/1999/xlink':\n                return 'xlink:' + localName;\n            default:\n                return attribute.name;\n        }\n    }\n}\n\n// https://dom.spec.whatwg.org/#trees\n\nfunction root(node) {\n    var root = node;\n    var parent = root.parentNode;\n\n    while (parent != null) {\n        root = parent;\n        parent = root.parentNode;\n    }\n\n    return root;\n}\n\nfunction descendant(nodeA, nodeB) {\n    var parent = nodeA.parentNode;\n\n    while (parent != null) {\n        if (nodeB === parent) {\n            return true;\n        }\n        parent = parent.parentNode;\n    }\n\n    return false;\n}\n\nfunction inclusiveDescendant(nodeA, nodeB) {\n    return nodeA === nodeB || descendant(nodeA, nodeB);\n}\n\nfunction ancestor(nodeA, nodeB) {\n    var parent = nodeB.parentNode;\n\n    while (parent != null) {\n        if (nodeA === parent) {\n            return true;\n        }\n        parent = parent.parentNode;\n    }\n\n    return false;\n}\n\nfunction inclusiveAncestor(nodeA, nodeB) {\n    return nodeA === nodeB || ancestor(nodeA, nodeB);\n}\n\n// https://dom.spec.whatwg.org/#interface-parentnode\n\nfunction convertNodesIntoANode(nodes, document) {\n    var node = null;\n\n    for (var i = 0; i < nodes.length; i++) {\n        var item = nodes[i];\n\n        if (typeof item === \"string\") {\n            nodes[i] = document.createTextNode(item);\n        }\n    }\n\n    if (nodes.length === 1) {\n        node = nodes[0];\n    } else {\n        node = document.createDocumentFragment();\n\n        for (var _i = 0; _i < nodes.length; _i++) {\n            node.appendChild(nodes[_i]);\n        }\n    }\n\n    return node;\n}\n\n// https://dom.spec.whatwg.org/#interface-node\n\nfunction clone(node, document, cloneChildren) {\n    // https://dom.spec.whatwg.org/#concept-node-clone\n    // To clone a node, with an optional document and clone children flag, run these steps:\n\n    // 1. If document is not given, let document be node’s node document.\n    document = document || node.ownerDocument;\n\n    // Use a shortcut here\n    // 2. If node is an element, then:\n    // 3. Otherwise, let copy be a node that implements the same interfaces \n    // as node, and fulfills these additional requirements, switching on node:\n    // 4. Set copy’s node document and document to copy, if copy is a document, \n    // and set copy’s node document to document otherwise.\n    // 5. Run any cloning steps defined for node in other applicable \n    // specifications and pass copy, node, document and the clone children \n    // flag if set, as parameters.\n    var copy = descriptors.Node.cloneNode.value.call(node, false);\n    if (_customElements2.default.isInstalled()) {\n        _customElements2.default.tryToUpgradeElement(copy);\n    }\n\n    // 6. If the clone children flag is set, clone all the children of node \n    // and append them to copy, with document as specified and the clone \n    // children flag being set.\n    if (cloneChildren === true) {\n        var childNodes = slice(node.childNodes);\n        for (var i = 0; i < childNodes.length; i++) {\n            append(childNodes[i].cloneNode(true), copy);\n        }\n    }\n\n    return copy;\n}\n\nfunction adopt(node, document) {\n    // https://dom.spec.whatwg.org/#concept-node-adopt\n\n    // 1. Let oldDocument be node’s node document.\n    var oldDocument = node.ownerDocument;\n\n    // 2. If node’s parent is not null, remove node from its parent.\n    var parent = node.parentNode;\n    if (parent != null) {\n        remove(node, parent);\n    }\n\n    // 3. If document is not the same as oldDocument, run these substeps:\n    if (document != oldDocument && _customElements2.default.isInstalled()) {\n        var inclusiveDescendants = [node];\n        recursiveGetShadowIncludingTreeOrderDescendants(node, inclusiveDescendants);\n        for (var i = 0; i < inclusiveDescendants.length; i++) {\n            var _inclusiveDescendant = inclusiveDescendants[i];\n            if (_customElements2.default.isCustom(_inclusiveDescendant)) {\n                _customElements2.default.enqueueCallbackReaction(_inclusiveDescendant, 'adoptedCallback', [oldDocument, document]);\n            }\n        }\n    }\n}\n\n// https://dom.spec.whatwg.org/#interface-documentfragment\n\nfunction hostIncludingInclusiveAncestor(nodeA, nodeB) {\n    if (inclusiveAncestor(nodeA, nodeB)) {\n        return true;\n    }\n\n    var host = root(nodeB).host;\n\n    if (host && hostIncludingInclusiveAncestor(nodeA, host)) {\n        return true;\n    }\n\n    return false;\n}\n\n// https://dom.spec.whatwg.org/#interface-shadowroot\n\nfunction shadowIncludingRoot(node) {\n    var rootNode = root(node);\n    if (isShadowRoot(rootNode)) {\n        rootNode = shadowIncludingRoot(rootNode.host);\n    }\n    return rootNode;\n}\n\nfunction shadowIncludingDescendant(nodeA, nodeB) {\n    do {\n        if (isShadowRoot(nodeA)) {\n            nodeA = nodeA.host;\n        } else {\n            nodeA = nodeA.parentNode;\n        }\n        if (nodeA === nodeB) {\n            return true;\n        }\n    } while (nodeA != null);\n\n    return false;\n}\n\nfunction shadowIncludingInclusiveDescendant(nodeA, nodeB) {\n    return nodeA === nodeB || shadowIncludingDescendant(nodeA, nodeB);\n}\n\nfunction shadowIncludingAncestor(nodeA, nodeB) {\n    return shadowIncludingDescendant(nodeB, nodeA);\n}\n\nfunction shadowIncludingInclusiveAncestor(nodeA, nodeB) {\n    return nodeA === nodeB || shadowIncludingAncestor(nodeA, nodeB);\n}\n\nfunction closedShadowHidden(nodeA, nodeB) {\n    // https://dom.spec.whatwg.org/#concept-closed-shadow-hidden\n    var rootNode = root(nodeA);\n\n    if (!isShadowRoot(rootNode)) {\n        return false;\n    }\n\n    if (shadowIncludingInclusiveAncestor(rootNode, nodeB)) {\n        return false;\n    }\n\n    if (rootNode.mode === 'closed' || closedShadowHidden(rootNode.host, nodeB)) {\n        return true;\n    }\n\n    return false;\n}\n\nfunction retarget(nodeA, nodeB) {\n    // https://dom.spec.whatwg.org/#retarget\n    // To retarget an object A against an object B, repeat these steps \n    // until they return an object:\n\n    var rootNode = void 0;\n    while (rootNode = root(nodeA)) {\n        // 1. If A’s root is not a shadow root, or A’s root is a shadow-including \n        // inclusive ancestor of B, then return A.\n        if (!isShadowRoot(rootNode) || shadowIncludingInclusiveAncestor(rootNode, nodeB)) {\n            return nodeA;\n        }\n        // 2. Set A to A’s root’s host.\n        nodeA = rootNode.host;\n    }\n}\n\n// https://dom.spec.whatwg.org/#interface-element\n\nfunction updateSlotName(element, localName, oldValue, value, namespace) {\n    // https://dom.spec.whatwg.org/#slot-name\n    if (element.localName === 'slot') {\n        if (localName === 'name' && namespace == null) {\n            if (value === oldValue) {\n                return;\n            }\n            if (value == null && oldValue === '') {\n                return;\n            }\n            if (value === '' && oldValue == null) {\n                return;\n            }\n            if (value == null || value === '') {\n                descriptors.Element.setAttribute.value.call(element, 'name', '');\n            } else {\n                descriptors.Element.setAttribute.value.call(element, 'name', value);\n            }\n            assignSlotablesForATree(element);\n        }\n    }\n}\n\nfunction updateSlotableName(element, localName, oldValue, value, namespace) {\n    // https://dom.spec.whatwg.org/#slotable-name\n    if (localName === 'slot' && namespace == null) {\n        if (value === oldValue) {\n            return;\n        }\n        if (value == null && oldValue === '') {\n            return;\n        }\n        if (value === '' && oldValue == null) {\n            return;\n        }\n        if (value == null || value === '') {\n            descriptors.Element.setAttribute.value.call(element, 'slot', '');\n        } else {\n            descriptors.Element.setAttribute.value.call(element, 'slot', value);\n        }\n        var elementState = getShadowState(element);\n        if (elementState && elementState.assignedSlot) {\n            assignSlotables(elementState.assignedSlot);\n        }\n        assignASlot(element);\n    }\n}\n\nfunction attributeChangeSteps(element, localName, oldValue, value, namespace) {\n    updateSlotName(element, localName, oldValue, value, namespace);\n    updateSlotableName(element, localName, oldValue, value, namespace);\n}\n\nfunction changeAttribute(attribute, element, value) {\n    // https://dom.spec.whatwg.org/#concept-element-attributes-change\n\n    var name = attribute.localName;\n    var namespace = attribute.namespaceURI;\n    var oldValue = descriptors.Attr.value.get.call(attribute);\n    var newValue = value;\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, { name: name, namespace: namespace, oldValue: oldValue });\n\n    // 2. If element is custom...\n    if (_customElements2.default.isInstalled() && _customElements2.default.isCustom(element)) {\n        var _args = [name, oldValue, newValue, namespace];\n        _customElements2.default.enqueueCallbackReaction(element, 'attributeChangedCallback', _args);\n    }\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, newValue, namespace);\n\n    // 4. Set attribute's value...\n    descriptors.Attr.value.set.call(attribute, newValue);\n}\n\nfunction appendAttribute(attribute, element) {\n    // https://dom.spec.whatwg.org/#concept-element-attributes-append\n\n    var name = attribute.localName;\n    var namespace = attribute.namespaceURI;\n    var oldValue = null;\n    var newValue = descriptors.Attr.value.get.call(attribute);\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, { name: name, namespace: namespace, oldValue: oldValue });\n\n    // 2. If element is custom...\n    if (_customElements2.default.isInstalled() && _customElements2.default.isCustom(element)) {\n        var _args2 = [name, oldValue, newValue, namespace];\n        _customElements2.default.enqueueCallbackReaction(element, 'attributeChangedCallback', _args2);\n    }\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, newValue, namespace);\n\n    // 4. Append the attribute to the element’s attribute list.\n    descriptors.Element.setAttributeNodeNS.value.call(element, attribute);\n\n    // Skip (native)\n    // 5. Set attribute’s element to element.\n}\n\nfunction removeAttribute(attribute, element) {\n    // https://dom.spec.whatwg.org/#concept-element-attributes-remove\n\n    var name = attribute.localName;\n    var namespace = attribute.namespaceURI;\n    var oldValue = descriptors.Attr.value.get.call(attribute);\n    var newValue = null;\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, { name: name, namespace: namespace, oldValue: oldValue });\n\n    // 2. If element is custom...\n    if (_customElements2.default.isInstalled() && _customElements2.default.isCustom(element)) {\n        var _args3 = [name, oldValue, newValue, namespace];\n        _customElements2.default.enqueueCallbackReaction(element, 'attributeChangedCallback', _args3);\n    }\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, null, namespace);\n\n    // 4. Remove attribute from the element’s attribute list.\n    descriptors.Element.removeAttributeNode.value.call(element, attribute);\n\n    // Skip (native)\n    // 5. Set attribute’s element to null.\n}\n\nfunction replaceAttribute(oldAttr, newAttr, element) {\n    // Used by 'set an attribute'\n    // https://dom.spec.whatwg.org/#concept-element-attributes-replace\n\n    var name = attribute.localName;\n    var namespace = attribute.namespaceURI;\n    var oldValue = descriptors.Attr.value.get.call(attribute);\n    var newValue = descriptors.Attr.value.get.call(newAttr);\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, { name: name, namespace: namespace, oldValue: oldValue });\n\n    // 2. If element is custom...\n    if (_customElements2.default.isInstalled() && _customElements2.default.isCustom(element)) {\n        var _args4 = [name, oldValue, newValue, namespace];\n        _customElements2.default.enqueueCallbackReaction(element, 'attributeChangedCallback', _args4);\n    }\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, newValue, namespace);\n\n    // 4. Replace oldAttr by newAttr in the element’s attribute list.\n    descriptors.Element.setAttributeNodeNS.value.call(element, newAttr);\n\n    // Skip (native)\n    // 5. Set oldAttr’s element to null.\n    // 6. Set newAttr’s element to element.\n}\n\nfunction setAttribute(attr, element) {\n    if (attr.ownerElement != null && attr.ownerElement !== element) {\n        throw makeError('InUseAttributeError');\n    }\n    var attributes = descriptors.Element.attributes.get.call(element);\n    var oldAttr = attributes.getNamedItemNS(attr.namespaceURI, attr.localName);\n    if (oldAttr === attr) {\n        return attr;\n    }\n    if (oldAttr) {\n        replaceAttribute(oldAttr, attr, element);\n    } else {\n        appendAttribute(attr, element);\n    }\n    return oldAttr;\n}\n\nfunction setAttributeValue(element, localName, value, prefix, ns) {\n    prefix = prefix || null;\n    ns = ns || null;\n    var attributes = descriptors.Element.attributes.get.call(element);\n    var attribute = attributes.getNamedItemNS(ns, localName);\n    if (!attribute) {\n        attribute = element.ownerDocument.createAttributeNS(ns, localName);\n        descriptors.Attr.value.set.call(attribute, value);\n        appendAttribute(attribute, element);\n        return;\n    }\n    changeAttribute(attribute, element, value);\n}\n\nfunction removeAttributeByName(qualifiedName, element) {\n    var attributes = descriptors.Element.attributes.get.call(element);\n    var attr = attributes.getNamedItem(qualifiedName);\n    if (attr) {\n        removeAttribute(attr, element);\n    }\n    return attr;\n}\n\nfunction removeAttributeByNamespace(namespace, localName, element) {\n    var attributes = descriptors.Element.attributes.get.call(element);\n    var attr = attributes.getNamedItemNS(namespace, localName);\n    if (attr) {\n        removeAttribute(attr, element);\n    }\n    return attr;\n}\n\nfunction insertAdjacent(element, where, node) {\n    if (!(node instanceof Node)) {\n        throw makeError('TypeError');\n    }\n    var parent = void 0;\n    // https://dom.spec.whatwg.org/#insert-adjacent\n    switch ((where || '').toLowerCase()) {\n        case \"beforebegin\":\n            if (parent = element.parentNode) {\n                return preInsert(node, parent, element);\n            }\n            return null;\n        case \"afterbegin\":\n            return preInsert(node, element, element.firstChild);\n        case \"beforeend\":\n            return preInsert(node, element, null);\n        case \"afterend\":\n            if (parent = element.parentNode) {\n                return preInsert(node, parent, element.nextSibling);\n            }\n            return null;\n        default:\n            throw makeError('SyntaxError');\n    }\n}\n\n// https://dom.spec.whatwg.org/#attr\n\nfunction setExistingAttributeValue(attribute, value) {\n    if (attribute.ownerElement == null) {\n        descriptors.Attr.value.set.call(attribute, value);\n    } else {\n        changeAttribute(attribute, attribute.ownerElement, value);\n    }\n}\n\n// https://dom.spec.whatwg.org/#interface-characterdata\n\nfunction replaceData(node, offset, count, data) {\n    // https://dom.spec.whatwg.org/#concept-cd-replace\n    if (data == null) {\n        data = '';\n    }\n    var dataDescriptor = descriptors.CharacterData.data;\n    var oldValue = dataDescriptor.get.call(node);\n    var length = oldValue.length;\n    if (offset > length) {\n        throw makeError('IndexSizeError');\n    }\n    if (offset + count > length) {\n        count = length - offset;\n    }\n    queueMutationRecord('characterData', node, { oldValue: oldValue });\n    dataDescriptor.set.call(node, oldValue.slice(0, offset) + data + oldValue.slice(offset + count));\n    // TODO: (Range)\n}\n\n// https://dom.spec.whatwg.org/#finding-slots-and-slotables\n\nfunction findASlot(slotable, open) {\n    // https://dom.spec.whatwg.org/#find-a-slot\n    // To find a slot for a given slotable slotable and an optional \n    // open flag (unset unless stated otherwise), run these steps:\n\n    // 1. If slotable’s parent is null, then return null.\n    var parent = slotable.parentNode;\n    if (!parent) {\n        return null;\n    }\n\n    // 2. Let shadow be slotable’s parent’s shadow root.\n    var parentState = getShadowState(parent);\n\n    // 3. If shadow is null, then return null.\n    if (!parentState || !parentState.shadowRoot) {\n        return null;\n    }\n\n    // 4. If the open flag is set and shadow’s mode is not \"open\", then return null.\n    if (open === true && parentState.shadowRoot.mode !== 'open') {\n        return null;\n    }\n\n    // 5. Return the first slot in shadow’s tree whose name is slotable’s name, if any, and null otherwise.\n    if (!parentState.shadowRoot.firstChild) {\n        return null;\n    }\n\n    var name = slotable instanceof Element ? slotable.slot : null;\n\n    return treeOrderRecursiveSelectFirst(parentState.shadowRoot.firstChild, function (node) {\n        return node.localName === 'slot' && node.name === name;\n    });\n}\n\nfunction findSlotables(slot) {\n    // https://dom.spec.whatwg.org/#find-slotables\n    // To find slotables for a given slot slot, run these steps:\n\n    // 1. Let result be an empty list.\n    var result = [];\n\n    // 2. If slot’s root is not a shadow root, then return result.\n    var slotRoot = root(slot);\n    if (!isShadowRoot(slotRoot)) {\n        return result;\n    }\n\n    // 3. Let host be slot’s root’s host.\n    var host = slotRoot.host;\n\n    // 4. For each slotable child of host, slotable, in tree order, run these substeps:\n    var slotableChildren = slice(host.childNodes);\n    for (var i = 0; i < slotableChildren.length; i++) {\n        var slotable = slotableChildren[i];\n        if (slotable.nodeType === Node.ELEMENT_NODE || slotable.nodeType === Node.TEXT_NODE) {\n            // 1. Let foundSlot be the result of finding a slot given slotable.\n            var foundSlot = findASlot(slotable);\n            // 2. If foundSlot is slot, then append slotable to result.\n            if (foundSlot === slot) {\n                result.push(slotable);\n            }\n        }\n    }\n\n    // 5. Return result.\n    return result;\n}\n\nfunction findFlattenedSlotables(slot) {\n    // https://dom.spec.whatwg.org/#find-flattened-slotables\n    // To find flattened slotables for a given slot slot, run these steps:\n\n    // 1. Let result be an empty list.\n    var result = [];\n\n    // 2. Let slotables be the result of finding slotables given slot.\n    var slotables = findSlotables(slot);\n\n    // 3. If slotables is the empty list, then append each slotable child of slot, in tree order, to slotables.\n    if (slotables.length === 0) {\n        var slotableChildren = slice(slot.childNodes);\n        for (var i = 0; i < slotableChildren.length; i++) {\n            var slotableChild = slotableChildren[i];\n            if (slotableChild.nodeType === Node.ELEMENT_NODE || slotableChild.nodeType === Node.TEXT_NODE) {\n                slotables.push(slotableChild);\n            }\n        }\n    }\n\n    // 4. For each node in slotables, run these substeps:\n    for (var _i2 = 0; _i2 < slotables.length; _i2++) {\n        var node = slotables[_i2];\n        // 1. If node is a slot, run these subsubsteps:\n        if (node.localName === 'slot') {\n            var temporaryResult = findFlattenedSlotables(node);\n            result.splice.apply(result, [result.length, 0].concat(_toConsumableArray(temporaryResult)));\n        } else {\n            result.push(node);\n        }\n    }\n\n    // 5. Return result.\n    return result;\n}\n\n// https://dom.spec.whatwg.org/#assigning-slotables-and-slots\n\nfunction assignSlotables(slot, suppressSignaling) {\n    // https://dom.spec.whatwg.org/#assign-slotables\n    // To assign slotables, for a slot slot with an optional suppress \n    // signaling flag (unset unless stated otherwise), run these steps:\n\n    // 1. Let slotables be the result of finding slotables for slot.\n    var slotables = findSlotables(slot);\n\n    // 2. If suppress signaling flag is unset, and slotables and slot’s assigned \n    // nodes are not identical, then run signal a slot change for slot.\n    var identical = true;\n    var slotState = getShadowState(slot) || setShadowState(slot, {});\n    var assignedNodes = slotState.assignedNodes || [];\n    for (var i = 0; i < slotables.length; i++) {\n        if (slotables[i] !== assignedNodes[i]) {\n            identical = false;\n            break;\n        }\n    }\n    if (!suppressSignaling && !identical) {\n        signalASlotChange(slot);\n    }\n\n    // 3. Set slot’s assigned nodes to slotables.\n    slotState.assignedNodes = slotables;\n\n    // 4. For each slotable in slotables, set slotable’s assigned slot to slot.\n    for (var _i3 = 0; _i3 < slotables.length; _i3++) {\n        var slotable = slotables[_i3];\n        // If it's a slotable it should already have an associated state object.\n        getShadowState(slotable).assignedSlot = slot;\n    }\n\n    // 4a. If we haven't tracked them yet, track the slot's logical children\n    if (!slotState.childNodes) {\n        slotState.childNodes = slice(descriptors.Node.childNodes.get.call(slot));\n    }\n\n    // function call avoiding closure for performance.\n    if (!identical) {\n        setImmediate(renderSlotablesAsync, slot);\n    }\n}\n\nfunction renderSlotablesAsync(slot) {\n    var slotState = getShadowState(slot);\n    var slotables = slotState.assignedNodes;\n\n    // 4b. Clean out the slot\n    var firstChild = void 0;\n    while (firstChild = descriptors.Node.firstChild.get.call(slot)) {\n        descriptors.Node.removeChild.value.call(slot, firstChild);\n    }\n\n    // 4c. Append the slotables, if any\n    for (var i = 0; i < slotables.length; i++) {\n        var slotable = slotables[i];\n        descriptors.Node.appendChild.value.call(slot, slotable);\n    }\n\n    // 4d. Append the fallback content, if no slots\n    if (!slotables.length) {\n        var childNodes = slotState.childNodes;\n        for (var _i4 = 0; _i4 < childNodes.length; _i4++) {\n            descriptors.Node.appendChild.value.call(slot, childNodes[_i4]);\n        }\n    }\n}\n\nfunction assignSlotablesForATree(tree, noSignalSlots) {\n    // https://dom.spec.whatwg.org/#assign-slotables-for-a-tree\n    // To assign slotables for a tree, given a tree tree and an optional set of slots noSignalSlots\n    // (empty unless stated otherwise), run these steps for each slot slot in tree, in tree order:\n    var slots = [];\n\n    if (tree.localName === 'slot') {\n        slots.push(tree);\n    }\n\n    if (tree.hasChildNodes()) {\n        slots.push.apply(slots, _toConsumableArray(tree.querySelectorAll('slot')));\n    }\n\n    for (var i = 0; i < slots.length; i++) {\n        var slot = slots[i];\n\n        // 1. Let suppress signaling flag be set, if slot is in noSignalSlots, and unset otherwise.\n        var suppressSignaling = noSignalSlots && noSignalSlots.indexOf(slot) !== -1;\n\n        // 2. Run assign slotables for slot with suppress signaling flag.\n        assignSlotables(slot, suppressSignaling);\n    }\n}\n\nfunction assignASlot(slotable) {\n    var slot = findASlot(slotable);\n\n    if (slot != null) {\n        assignSlotables(slot);\n    }\n}\n\n// https://dom.spec.whatwg.org/#signaling-slot-change\n\nfunction signalASlotChange(slot) {\n    // https://dom.spec.whatwg.org/#signal-a-slot-change\n    // To signal a slot change, for a slot slot, run these steps:\n\n    // 1. If slot is not in unit of related similar-origin browsing contexts' \n    // signal slot list, append slot to unit of related similar-origin browsing \n    // contexts' signal slot list.\n    if (signalSlotList.indexOf(slot) === -1) {\n        signalSlotList.push(slot);\n    }\n\n    // 2. Queue a mutation observer compound microtask.\n    queueMutationObserverCompoundMicrotask();\n}\n\n// https://dom.spec.whatwg.org/#mutation-algorithms\n\nfunction ensurePreInsertionValidity(node, parent, child) {\n    // https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n    // To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\n    // Skip (native)\n    // 1. If parent is not a Document, DocumentFragment, or Element node, throw a HierarchyRequestError.\n\n    // 2. If node is a host-including inclusive ancestor of parent, throw a HierarchyRequestError.\n    if (hostIncludingInclusiveAncestor(node, parent)) {\n        throw makeError('HierarchyRequestError');\n    }\n\n    // 3. If child is not null and its parent is not parent, then throw a NotFoundError.\n    if (child != null && child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // Skip (native)\n    // 4. If node is not a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction, \n    // or Comment node, throw a HierarchyRequestError.\n    // 5. If either node is a Text node and parent is a document, or node is a doctype \n    // and parent is not a document, throw a HierarchyRequestError.\n    // 6. If parent is a document, and any of the statements below, switched on node, \n    // are true, throw a HierarchyRequestError.\n}\n\nfunction preInsert(node, parent, child) {\n    // https://dom.spec.whatwg.org/#concept-node-pre-insert\n    // To pre-insert a node into a parent before a child, run these steps:\n\n    // 1. Ensure pre-insertion validity of node into parent before child.\n    ensurePreInsertionValidity(node, parent, child);\n\n    // 2. Let reference child be child.\n    var referenceChild = child;\n\n    // 3. If reference child is node, set it to node’s next sibling.\n    referenceChild === node && (referenceChild = node.nextSibling);\n\n    // 4. Adopt node into parent’s node document.\n    // https://dom.spec.whatwg.org/#concept-node-adopt\n    adopt(node, parent.ownerDocument);\n\n    // 5. Insert node into parent before reference child.\n    // https://dom.spec.whatwg.org/#concept-node-insert\n    insert(node, parent, referenceChild);\n\n    // 6. Return node.\n    return node;\n}\n\nfunction insert(node, parent, child, suppressObservers) {\n    // https://dom.spec.whatwg.org/#concept-node-insert\n    // To insert a node into a parent before a child, with an optional suppress observers flag, run these steps:\n\n    // 1. Let count be the number of children of node if it is a DocumentFragment node, and one otherwise.\n    var count = 1;\n    var nodeChildNodes = void 0;\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        nodeChildNodes = node.childNodes;\n        count = nodeChildNodes.length;\n    }\n\n    // Skip (Range)\n    // 2. If child is non-null, run these substeps:\n\n    // 3. Let nodes be node’s children if node is a DocumentFragment node, \n    // and a list containing solely node otherwise.\n    var nodes = new Array(count);\n\n    // 4. If node is a DocumentFragment node, remove its children with the suppress observers flag set.\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        for (var i = 0; i < count; i++) {\n            nodes[i] = nodeChildNodes[i];\n        }\n        for (var _i5 = 0; _i5 < count; _i5++) {\n            remove(nodes[_i5], node, true);\n        }\n        // 5. If node is a DocumentFragment node, queue a mutation record of \"childList\" for node with removedNodes nodes.\n        queueMutationRecord('childList', node, { removedNodes: nodes });\n    } else {\n        nodes[0] = node;\n    }\n\n    // 6. For each node in nodes, in tree order, run these substeps:\n    var parentState = getShadowState(parent);\n    var parentIsShadow = isShadowRoot(parent);\n    var hasShadowStateChildNodes = parentState && parentState.childNodes;\n    var parentIsConnected = parent.isConnected;\n    for (var _i6 = 0; _i6 < nodes.length; _i6++) {\n        var _node = nodes[_i6];\n        // 1. Insert node into parent before child or at the end of parent if child is null.\n        if (hasShadowStateChildNodes) {\n            if (child) {\n                var childIndex = parentState.childNodes.indexOf(child);\n                parentState.childNodes.splice(childIndex, 0, _node);\n            } else {\n                parentState.childNodes.push(_node);\n            }\n            var nodeState = getShadowState(_node) || setShadowState(_node, {});\n            nodeState.parentNode = parent;\n            // If it's a shadow root, perform physical insert on the host.\n            if (parentIsShadow) {\n                descriptors.Node.insertBefore.value.call(parentState.host, _node, child);\n            }\n        } else {\n            descriptors.Node.insertBefore.value.call(parent, _node, child);\n        }\n\n        // 2. If parent is a shadow host and node is a slotable, then assign a slot for node.\n        if (parentState && parentState.shadowRoot && 'assignedSlot' in _node) {\n            assignASlot(_node);\n        }\n\n        // 3. If parent is a slot whose assigned nodes is the empty list, \n        // then run signal a slot change for parent.\n        if (parent.localName === 'slot' && parent.assignedNodes().length === 0) {\n            // 3a. Physically append the child into the slot.\n            descriptors.Node.appendChild.value.call(parent, _node);\n            // 3b. Do what the spec said\n            signalASlotChange(parent);\n        }\n\n        // 4. Run assign slotables for a tree with node’s tree and a set containing \n        // each inclusive descendant of node that is a slot.\n        var inclusiveSlotDescendants = [];\n        if (_node.localName === 'slot') {\n            inclusiveSlotDescendants.push(_node);\n        }\n        if (_node.hasChildNodes()) {\n            inclusiveSlotDescendants.push.apply(inclusiveSlotDescendants, _toConsumableArray(_node.querySelectorAll('slot')));\n        }\n        assignSlotablesForATree(_node, inclusiveSlotDescendants);\n\n        if (!_customElements2.default.isInstalled()) {\n            continue;\n        }\n\n        // 5. For each shadow-including inclusive descendant inclusiveDescendant of node, \n        // in shadow-including tree order, run these subsubsteps:\n        var inclusiveDescendants = [_node];\n        recursiveGetShadowIncludingTreeOrderDescendants(_node, inclusiveDescendants);\n        for (var j = 0; j < inclusiveDescendants.length; j++) {\n            var _inclusiveDescendant2 = inclusiveDescendants[j];\n            // Skip (other)\n            // 1. Run the insertion steps with inclusiveDescendant\n\n            // 2. If inclusiveDescendant is connected, then:\n            // PERF: obviously the descendant is connected if the inserted node\n            // is connected, and obviously the inserted node is connected if\n            // the parent being inserted to is connected.\n            if (parentIsConnected) {\n                // 1. If inclusiveDescendant is custom, then enqueue a custom element \n                // callback reaction with inclusiveDescendant, callback name \n                // \"connectedCallback\", and an empty argument list.\n                if (_customElements2.default.isCustom(_inclusiveDescendant2)) {\n                    _customElements2.default.enqueueCallbackReaction(_inclusiveDescendant2, 'connectedCallback', []);\n                }\n                // 2. Otherwise, try to upgrade inclusiveDescendant.\n                else {\n                        _customElements2.default.tryToUpgradeElement(_inclusiveDescendant2);\n                    }\n            }\n        }\n    }\n\n    // 7. If suppress observers flag is unset, queue a mutation record of \"childList\" for parent \n    // with addedNodes nodes, nextSibling child, and previousSibling child’s previous sibling or \n    // parent’s last child if child is null.\n    if (!suppressObservers) {\n        queueMutationRecord('childList', parent, {\n            addedNodes: nodes,\n            nextSibling: child,\n            previousSibling: child ? child.previousSibling : parent.lastChild\n        });\n    }\n}\n\nfunction append(node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-append\n    // To append a node to a parent, pre-insert node into parent before null.\n    preInsert(node, parent, null);\n}\n\nfunction replace(child, node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-replace\n    // To replace a child with node within a parent, run these steps:\n\n    // Skip (native)\n    // 1. If parent is not a Document, DocumentFragment, or Element node, throw a HierarchyRequestError.\n\n    // 2. If node is a host-including inclusive ancestor of parent, throw a HierarchyRequestError.\n    if (hostIncludingInclusiveAncestor(node, parent)) {\n        throw makeError('HierarchyRequestError');\n    }\n\n    // 3. If child’s parent is not parent, then throw a NotFoundError.\n    if (child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // Skip (native)\n    // 4. If node is not a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction, or Comment node, throw a HierarchyRequestError.\n    // 5. If either node is a Text node and parent is a document, or node is a doctype and parent is not a document, throw a HierarchyRequestError.\n    // 6. If parent is a document, and any of the statements below, switched on node, are true, throw a HierarchyRequestError.\n\n    // 7. Let reference child be child’s next sibling.\n    var referenceChild = child.nextSibling;\n\n    // 8. If reference child is node, set it to node’s next sibling.\n    if (referenceChild === node) {\n        referenceChild = node.nextSibling;\n    }\n\n    // 9. Let previousSibling be child’s previous sibling.\n    var previousSibling = child.previousSibling;\n\n    // 10. Adopt node into parent’s node document.\n    adopt(node, parent.ownerDocument);\n\n    // 11. Let removedNodes be the empty list.\n    var removedNodes = [];\n\n    // 12. If child’s parent is not null, run these substeps:\n    var childParent = child.parentNode;\n    if (childParent != null) {\n        // 1. Set removedNodes to a list solely containing child.\n        removedNodes.push(child);\n        // 2. Remove child from its parent with the suppress observers flag set.\n        remove(child, parent, true);\n    }\n\n    // 13. Let nodes be node’s children if node is a DocumentFragment node, and a list containing solely node otherwise.\n    var nodes = void 0;\n    if (node instanceof DocumentFragment) {\n        nodes = slice(node.childNodes);\n    } else {\n        nodes = [node];\n    }\n\n    // 14. Insert node into parent before reference child with the suppress observers flag set.\n    insert(node, parent, referenceChild, true);\n\n    // 15. Queue a mutation record of \"childList\" for target parent with addedNodes nodes, \n    // removedNodes removedNodes, nextSibling reference child, and previousSibling previousSibling.\n    queueMutationRecord('childList', parent, {\n        addedNodes: nodes,\n        removedNodes: removedNodes,\n        nextSibling: referenceChild,\n        previousSibling: previousSibling\n    });\n}\n\nfunction replaceAll(node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-replace-all\n    // To replace all with a node within a parent, run these steps:\n\n    // 1. If node is not null, adopt node into parent’s node document.\n    if (node != null) {\n        adopt(node, parent.ownerDocument);\n    }\n\n    // 2. Let removedNodes be parent’s children.\n    var removedNodes = slice(parent.childNodes);\n\n    // 3. Let addedNodes be the empty list if node is null, node’s children if node is a DocumentFragment node, and a list containing node otherwise.\n    var addedNodes = node === null ? [] : node.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? slice(node.childNodes) : [node];\n\n    // 4. Remove all parent’s children, in tree order, with the suppress observers flag set.\n    for (var i = 0; i < removedNodes.length; i++) {\n        remove(removedNodes[i], parent, true);\n    }\n\n    // 5. If node is not null, insert node into parent before null with the suppress observers flag set.\n    if (node != null) {\n        insert(node, parent, null, true);\n    }\n\n    // 6. Queue a mutation record of \"childList\" for parent with addedNodes addedNodes and removedNodes removedNodes.\n    queueMutationRecord('childList', parent, { addedNodes: addedNodes, removedNodes: removedNodes });\n}\n\nfunction preRemove(child, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-pre-remove\n    // To pre-remove a child from a parent, run these steps:\n\n    // 1. If child’s parent is not parent, then throw a NotFoundError.\n    if (child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // 2. Remove child from parent.\n    remove(child, parent);\n\n    // 3. Return child.\n    return child;\n}\n\nfunction remove(node, parent, suppressObservers) {\n    // https://dom.spec.whatwg.org/#concept-node-remove\n    // To remove a node from a parent, with an optional suppress observers flag, run these steps:\n\n    // Skip (Range)\n    // 1. Let index be node’s index.\n    // 2. For each range whose start node is an inclusive descendant of node, set its start to (parent, index).\n    // 3. For each range whose end node is an inclusive descendant of node, set its end to (parent, index).\n    // 4. For each range whose start node is parent and start offset is greater than index, decrease its start offset by one.\n    // 5. For each range whose end node is parent and end offset is greater than index, decrease its end offset by one.\n\n    // Skip (NodeIterator)\n    // 6. For each NodeIterator object iterator whose root’s node document is node’s node document, \n    // run the NodeIterator pre-removing steps given node and iterator.\n\n    // 7. Let oldPreviousSibling be node’s previous sibling.\n    var oldPreviousSibling = node.previousSibling;\n\n    // 8. Let oldNextSibling be node’s next sibling.\n    var oldNextSibling = node.nextSibling;\n\n    // 9. Remove node from its parent.\n    var nodeState = getShadowState(node);\n    var parentState = getShadowState(parent);\n    if (parentState && parentState.childNodes) {\n        var nodeIndex = parentState.childNodes.indexOf(node);\n        parentState.childNodes.splice(nodeIndex, 1);\n        // Should always have nodeState if we got here.\n        nodeState.parentNode = null;\n        var parentNode = descriptors.Node.parentNode.get.call(node);\n        descriptors.Node.removeChild.value.call(parentNode, node);\n    } else {\n        descriptors.Node.removeChild.value.call(parent, node);\n    }\n\n    // 10. If node is assigned, then run assign slotables for node’s assigned slot.\n    if (nodeState && nodeState.assignedSlot) {\n        assignSlotables(nodeState.assignedSlot);\n        nodeState.assignedSlot = null;\n    }\n\n    // 11. If parent is a slot whose assigned nodes is the empty list,\n    // then run signal a slot change for parent.\n    if (parent.localName === 'slot' && parent.assignedNodes().length === 0) {\n        signalASlotChange(parent);\n    }\n\n    // 12. If node has an inclusive descendant that is a slot, then:\n    var inclusiveSlotDescendants = [];\n    if (node.localName === 'slot') {\n        inclusiveSlotDescendants.push(node);\n    }\n    if (node.hasChildNodes()) {\n        inclusiveSlotDescendants.push.apply(inclusiveSlotDescendants, _toConsumableArray(node.querySelectorAll('slot')));\n    }\n    if (inclusiveSlotDescendants.length) {\n        // 1. Run assign slotables for a tree with parent’s tree.\n        assignSlotablesForATree(parent);\n        // 2. Run assign slotables for a tree with node’s tree and a \n        // set containing each inclusive descendant of node that is a slot.\n        assignSlotablesForATree(node, inclusiveSlotDescendants);\n    }\n\n    // Skip (other)\n    // 13. Run the removing steps with node and parent.\n\n    if (_customElements2.default.isInstalled()) {\n        // 14. If node is custom, then enqueue a custom element callback reaction \n        // with node, callback name \"disconnectedCallback\", and an empty argument list.\n        if (_customElements2.default.isCustom(node)) {\n            _customElements2.default.enqueueCallbackReaction(node, 'disconnectedCallback', []);\n        }\n\n        // 15. For each shadow-including descendant descendant of node, in \n        // shadow-including tree order, run these substeps:\n        var descendants = [];\n        recursiveGetShadowIncludingTreeOrderDescendants(node, descendants);\n        for (var i = 0; i < descendants.length; i++) {\n            var _descendant = descendants[i];\n            // Skip (other)\n            // 1. Run the removing steps with descendant.\n\n            // 2. If descendant is custom, then enqueue a custom element \n            // callback reaction with descendant, callback name \"disconnectedCallback\", \n            // and an empty argument list.\n            if (_customElements2.default.isCustom(_descendant)) {\n                _customElements2.default.enqueueCallbackReaction(_descendant, 'disconnectedCallback', []);\n            }\n        }\n    }\n\n    // 16. For each inclusive ancestor inclusiveAncestor of parent...\n    var inclusiveAncestor = parent;\n    while (inclusiveAncestor) {\n        // ...if inclusiveAncestor has any registered observers whose options' \n        // subtree is true, then for each such registered observer registered... \n        var ancestorState = getShadowState(inclusiveAncestor);\n        if (ancestorState && ancestorState.observers) {\n            var ancestorObservers = ancestorState.observers;\n            for (var _i7 = 0; _i7 < ancestorObservers.length; _i7++) {\n                var registeredObserver = ancestorObservers[_i7];\n                if (registeredObserver.options.subtree) {\n                    // ...append a transient registered observer whose observer and options are \n                    // identical to those of registered and source which is registered to node’s \n                    // list of registered observers.\n                    var observer = registeredObserver.instance;\n                    var options = registeredObserver.options;\n                    var transientObserver = createTransientObserver(observer, node, options);\n                    mutationObservers.push(transientObserver);\n                }\n            }\n        }\n        inclusiveAncestor = inclusiveAncestor.parentNode;\n    }\n\n    // 17. If suppress observers flag is unset, queue a mutation record of \"childList\" \n    // for parent with removedNodes a list solely containing node, nextSibling \n    // oldNextSibling, and previousSibling oldPreviousSibling.\n    if (!suppressObservers) {\n        queueMutationRecord('childList', parent, {\n            removedNodes: [node],\n            nextSibling: oldNextSibling,\n            previousSibling: oldPreviousSibling\n        });\n    }\n}\n\n// https://dom.spec.whatwg.org/#mutation-observers\n\n// TODO: test everything that queues mutation records\n\nfunction getOrCreateNodeObservers(node) {\n    var nodeState = getShadowState(node) || setShadowState(node, {});\n    var observers = nodeState.observers;\n    return observers ? observers : nodeState.observers = [];\n}\n\nfunction createMutationObserver(callback) {\n    return {\n        callback: callback,\n        queue: [],\n        nodes: [],\n        observe: function observe(node, options) {\n            if (this.nodes.length === 0) {\n                mutationObservers.push(this);\n            }\n            var nodeObservers = getOrCreateNodeObservers(node);\n            nodeObservers.push({ instance: this, options: options });\n            this.nodes.push(node);\n        },\n        disconnect: function disconnect() {\n            var index = mutationObservers.indexOf(this);\n            mutationObservers.splice(index, 1);\n            for (var i = 0; i < this.nodes.length; i++) {\n                var nodeObservers = getOrCreateNodeObservers(this.nodes[i]);\n                for (var j = 0; j < nodeObservers.length; j++) {\n                    if (nodeObservers[j].instance === this) {\n                        nodeObservers.splice(j, 1);\n                        break;\n                    }\n                }\n            }\n            this.nodes = [];\n        }\n    };\n}\n\nfunction createTransientObserver(observer, node, options) {\n    var transientObserver = {\n        observer: observer,\n        callback: observer.callback,\n        options: options,\n        queue: [],\n        node: node,\n        disconnect: function disconnect() {\n            var nodeObservers = getOrCreateNodeObservers(this.node);\n            for (var j = 0; j < nodeObservers.length; j++) {\n                if (nodeObservers[j].instance === this) {\n                    nodeObservers.splice(j, 1);\n                    break;\n                }\n            }\n        }\n    };\n\n    var nodeObservers = getOrCreateNodeObservers(node);\n    nodeObservers.push({ instance: transientObserver, options: options });\n\n    return transientObserver;\n}\n\nvar mutationObserverCompoundMicrotaskQueuedFlag = false;\n\nvar mutationObservers = [];\nvar signalSlotList = [];\nvar theEmptyList = Object.freeze([]);\n\nfunction queueMutationRecord(type, target, details) {\n    // PERF: This is an out-of-spec optimization\n    if (mutationObservers.length === 0) {\n        return;\n    }\n\n    // https://dom.spec.whatwg.org/#queueing-a-mutation-record\n    // 1. Let interested observers be an initially empty set of \n    // MutationObserver objects optionally paired with a string.\n    var interestedObservers = [];\n    var pairedStrings = [];\n    // 2. Let nodes be the inclusive ancestors of target.\n    var nodes = [target];\n    var ancestor = target;\n    while (ancestor = ancestor.parentNode) {\n        nodes.push(ancestor);\n    }\n    // 3. Then, for each node in nodes... \n    for (var i = 0; i < nodes.length; i++) {\n        var node = nodes[i];\n        var nodeState = getShadowState(node);\n        if (!nodeState || !nodeState.observers) {\n            continue;\n        }\n        // ...and then for each registered observer (with registered \n        // observer’s options as options) in node’s list of registered \n        // observers...\n        for (var j = 0; j < nodeState.observers.length; j++) {\n            var registeredObserver = nodeState.observers[j];\n            var options = registeredObserver.options;\n            // ...run these substeps:\n            // 1. If none of the following are true:\n            if (node != target && !options.subtree) {\n                continue;\n            }\n            if (type === 'attributes') {\n                if (!options.attributes) {\n                    continue;\n                }\n                // if options' attributeFilter is present, and options' attributeFilter\n                // does not contain name or namespace is non-null\n                if (options.attributeFilter && (options.attributeFilter.indexOf(details.name) === -1 || details.namespace != null)) {\n                    continue;\n                }\n            }\n            if (type === 'characterData' && !options.characterData) {\n                continue;\n            }\n            if (type === 'childList' && !options.childList) {\n                continue;\n            }\n            // ...then run the subsubsteps:\n            // 1. If registered observer’s observer is not in interested observers, \n            // append registered observer’s observer to interested observers.\n            var observer = registeredObserver.instance;\n            var index = interestedObservers.indexOf(observer);\n            if (index === -1) {\n                index = interestedObservers.length;\n                interestedObservers[index] = observer;\n            }\n            // 2. If either type is \"attributes\" and options’ attributeOldValue is true, \n            // or type is \"characterData\" and options’ characterDataOldValue is true, \n            // set the paired string of registered observer’s observer in interested observers to oldValue.\n            if (type === 'attributes' && options.attributeOldValue || type === 'characterData' && options.characterDataOldValue) {\n                pairedStrings[index] = details.oldValue;\n            }\n        }\n    }\n\n    // PERF: This is an out-of-spec optimization\n    if (interestedObservers.length === 0) {\n        return;\n    }\n\n    // 4. Then, for each observer in interested observers, run these substeps:\n    for (var _i8 = 0; _i8 < interestedObservers.length; _i8++) {\n        var _observer = interestedObservers[_i8];\n        // 1. Let record be a new MutationRecord object with its type set to type and target set to target.\n        var record = {\n            type: type,\n            target: target,\n            attributeName: null,\n            attributeNamespace: null,\n            addedNodes: theEmptyList,\n            removedNodes: theEmptyList,\n            previousSibling: null,\n            nextSibling: null,\n            oldValue: null\n        };\n        // 2. If name and namespace are given, set record’s attributeName to name, and record’s attributeNamespace to namespace.\n        if ('name' in details) {\n            record.attributeName = details.name;\n            record.attributeNamespace = details.namespace;\n        }\n        // 3. If addedNodes is given, set record’s addedNodes to addedNodes.\n        if ('addedNodes' in details) {\n            record.addedNodes = Object.freeze(details.addedNodes);\n        }\n        // 4. If removedNodes is given, set record’s removedNodes to removedNodes.\n        if ('removedNodes' in details) {\n            record.removedNodes = Object.freeze(details.removedNodes);\n        }\n        // 5. If previousSibling is given, set record’s previousSibling to previousSibling.\n        if ('previousSibling' in details) {\n            record.previousSibling = details.previousSibling;\n        }\n        // 6. If nextSibling is given, set record’s nextSibling to nextSibling.\n        if ('nextSibling' in details) {\n            record.nextSibling = details.nextSibling;\n        }\n        // 7. If observer has a paired string, set record’s oldValue to observer’s paired string.\n        var pairedString = pairedStrings[_i8];\n        if (pairedString != null) {\n            record.oldValue = pairedString;\n        }\n        // 8. Append record to observer’s record queue.\n        Object.freeze(record);\n        _observer.queue.push(record);\n\n        // TODO: consider setting prototype to MutationRecord.prototype\n    }\n\n    // 5. Queue a mutation observer compound microtask.\n    queueMutationObserverCompoundMicrotask();\n}\n\nfunction queueMutationObserverCompoundMicrotask() {\n    if (mutationObserverCompoundMicrotaskQueuedFlag) {\n        return;\n    }\n    mutationObserverCompoundMicrotaskQueuedFlag = true;\n    setImmediate(notifyMutationObservers);\n}\n\nfunction notifyMutationObservers() {\n    mutationObserverCompoundMicrotaskQueuedFlag = false;\n    var notifyList = mutationObservers.slice();\n    var signalList = signalSlotList.splice(0, signalSlotList.length);\n    for (var i = 0; i < notifyList.length; i++) {\n        var observer = notifyList[i];\n        var queue = observer.queue.splice(0, observer.queue.length);\n        for (var j = mutationObservers.length - 1; j >= 0; j--) {\n            var transientObserver = mutationObservers[j];\n            if (transientObserver.observer === observer) {\n                mutationObservers.splice(j, 1);\n                transientObserver.disconnect();\n            }\n        }\n        if (queue.length) {\n            try {\n                observer.callback.call(observer.interface, queue, observer.interface);\n            } catch (error) {\n                reportError(error);\n            }\n        }\n    }\n    for (var _i9 = 0; _i9 < signalList.length; _i9++) {\n        var slot = signalList[_i9];\n        var event = slot.ownerDocument.createEvent('event');\n        event.initEvent('slotchange', true, false);\n        try {\n            slot.dispatchEvent(event);\n        } catch (error) {\n            reportError(error);\n        }\n    }\n}"]}